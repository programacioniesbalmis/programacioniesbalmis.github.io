<!DOCTYPE html><html><head>
      <title>Eventos en C#</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .caso_estudio {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .resumen {
  background-color: #d6d6d6;
  border: 2px solid #b0b0b0;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .ejercicio {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  justify-content: space-between;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="tema-112">Tema 11.2 </h1>
<p>Descargar estos apuntes en <a href="./Tema11_2.pdf">pdf</a> o <a href="./Tema11_2.html">html</a></p>
<h2 id="índice">Índice </h2>

<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#eventos-en-csharp" class="md-toc-link"><p>Eventos en CSharp</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#definición" class="md-toc-link">
            <p>Definición</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#nomenclatura-básica" class="md-toc-link">
            <p>Nomenclatura básica</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#gestión-básica-de-eventos-con-csharp" class="md-toc-link">
            <p>Gestión básica de eventos con CSharp</p>

          </a></div>
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<h2 id="eventos-en-csharp">Eventos en CSharp </h2>
<h3 id="definición">Definición </h3>
<p>Un evento es un mensaje que se envía de un objeto a otro cuando ocurre algún suceso que deseamos notificar. Por lo tanto, podemos decir que <strong>es una forma de comunicación entre objetos</strong>.</p>
<p>Dicho suceso puede ser debido a la interacción del usuario, como hacer clic en un botón, o podría proceder de cualquier otra lógica del programa, como el cambio del valor de una propiedad.</p>
<p>Más específicamente podremos diferenciar entre '<em>3 tipos</em>' de eventos:</p>
<ol>
<li>
<p>Los que hemos mencionado y que me indicarán ua determinado suceso definido por el usuario, desencadenando una operación '<em>asíncrona</em>'.</p>
<blockquote>
<p>📌 <strong>Nota:</strong> Nosotros en este tema vamos a tratar estos últimos, asociados a un objeto delegado encargado de ejecutar esa operación asíncrona.</p>
</blockquote>
</li>
<li>
<p>Los que me ayudarán a sincronizar varios hilos de ejecución. Esto es, un hilo concurrente comunica a otro o al principal que ya ha terminado de hacer una determinada tarea. Es una concreción del caso 1.</p>
</li>
<li>
<p>Generados por una <strong><a href="https://martinfowler.com/eaaDev/EventSourcing.html"><em>'fuente'</em> de eventos</a></strong> y que me servirán para recuperar el estado de un objeto o dominio en un determinado momento.</p>
<blockquote>
<p>📌 <strong>Nota:</strong> Estos dos últimos casos quedan completamente fuera del tema, pero son la base de muchas arquitecturas de Sotfware '<em>complejas</em>'.</p>
</blockquote>
</li>
</ol>
<h3 id="nomenclatura-básica">Nomenclatura básica </h3>
<p>El <strong>esquema más básico</strong> y que vamos a tratar en este tema, es el siguiente:</p>
<p align="center" style="zoom:0.6" class="dot"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 9.0.0 (20230911.1827)
 -->
<!-- Title: G Pages: 1 -->
<svg width="532pt" height="154pt" viewBox="0.00 0.00 531.54 153.56" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 149.56)">
<title>G</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-149.56 527.54,-149.56 527.54,4 -4,4"></polygon>
<!-- p -->
<g id="node1" class="node">
<title>p</title>
<polygon fill="none" stroke="black" points="8,-49.96 8,-101.56 92.15,-101.56 92.15,-49.96 8,-49.96"></polygon>
<text text-anchor="start" x="29.45" y="-79.96" font-family="Arial" font-size="14.00">Objeto</text>
<text text-anchor="start" x="17" y="-63.16" font-family="Arial" font-size="14.00">Publicador</text>
<text text-anchor="start" x="100.15" y="-71.56" font-family="Arial" font-size="14.00">.EventoA</text>
</g>
<!-- s -->
<g id="node2" class="node">
<title>s</title>
<polygon fill="none" stroke="black" points="297.11,-49.96 297.11,-101.56 385.92,-101.56 385.92,-49.96 297.11,-49.96"></polygon>
<text text-anchor="start" x="320.89" y="-79.96" font-family="Arial" font-size="14.00">Objeto</text>
<text text-anchor="start" x="306.11" y="-63.16" font-family="Arial" font-size="14.00">Subscriptor</text>
<text text-anchor="start" x="393.92" y="-71.56" font-family="Arial" font-size="14.00">.ManejadorEvento</text>
</g>
<!-- p&#45;&gt;s -->
<g id="edge1" class="edge">
<title>p:s-&gt;s:s</title>
<path fill="none" stroke="black" d="M50.48,-48.76C50.48,11.96 307.17,15.64 338.26,-37.73"></path>
<polygon fill="black" stroke="black" points="334.87,-38.6 340.92,-47.3 341.61,-36.73 334.87,-38.6"></polygon>
<text text-anchor="middle" x="231.04" y="-27.76" font-family="Arial" font-size="14.00">Dispara</text>
<text text-anchor="middle" x="231.04" y="-10.96" font-family="Arial" font-size="14.00">Evento</text>
</g>
<!-- s&#45;&gt;p -->
<g id="edge2" class="edge">
<title>s:n-&gt;p:n</title>
<path fill="none" stroke="grey" stroke-dasharray="5,2" d="M450.33,-102.76C450.33,-135.3 183.72,-138.23 135.81,-111.53"></path>
<polygon fill="grey" stroke="grey" points="138.55,-109.35 129.45,-103.92 133.18,-113.84 138.55,-109.35"></polygon>
<text text-anchor="middle" x="231.04" y="-132.96" font-family="Arial" font-size="14.00" fill="grey">Subscripción</text>
</g>
</g>
</svg>
</p><ul>
<li>Los métodos asociados al delegado que se ejecutan al producirse un evento se denominan <strong>manejadores o controladores</strong>.</li>
<li>El objeto que provoca el evento se conoce como <strong>emisor o publicador</strong> del evento y es el que contiene el tipo delegado.</li>
<li>El objeto que maneja el evento se conoce como <strong>receptor o suscriptor</strong> del evento. Debe ser un objeto diferente al objeto emisor y es el que contiene los controladores.</li>
</ul>
<div style="page-break-after:always;"></div>
<h3 id="gestión-básica-de-eventos-con-csharp">Gestión básica de eventos con CSharp </h3>
<p>La sintaxis de definición será ...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Publicador</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-event">event</span> <span class="token class-name">TipoDelegado</span> IdEvento<span class="token punctuation">;</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><p>Cómo vemos, es similar a definir un campo o un propiedad de la clase. Pero... <strong>¿Por qué utilizamos una palabra reservada <a href="https://docs.microsoft.com/es-es/dotnet/csharp/language-reference/keywords/event">event</a>?</strong>.</p>
<p>La idea es que se puedan distinguir de los elementos vistos hasta el momento en la definición de la clase. Por si no os habíais fijado, la ayuda del editor o IDE me distinguirá cada definición con un símbolo diferente.</p>
<p>Por ejemplo, para el siguiente código ...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Publicador</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">TipoCampo</span> IdCampo<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name">TipoPropiedad</span> IdPropiedad <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-event">event</span> <span class="token class-name">TipoDelegado</span> IdEvento<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Dependiendo del editor o IDE usado me mostrará junto a la definición un símbolo similar a los siguientes...</p>
<table>
<thead>
<tr>
<th>Símbolo</th>
<th>Lo que mostrará el editor al ver <br> las definiciones en un objeto de la clase <strong><code>Publicador</code></strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Caja azul</td>
<td>🔹 <strong><code>IdCampo</code></strong></td>
</tr>
<tr>
<td>Llave fija</td>
<td>🔧 <strong><code>IdPropiedad</code></strong></td>
</tr>
<tr>
<td>Rayo amarillo</td>
<td>⚡ <strong><code>IdEvento</code></strong></td>
</tr>
</tbody>
</table>
<p>De esta manea, el símbolo ⚡ nos indicará que el identificador <strong><code>IdEvento</code></strong> es un objeto delegado, que gestionará cierto evento del objeto y al que otros objetos se podrán suscribir con un manejador que cumpla la signatura del delegado.</p>
<p>Vamos a completar un esquema <strong>Publicador - Subscriptor</strong> con ejemplo genérico y posteriormente iremos concretando un poco más para entender el concepto.</p>
<p>Supongamos las siguientes definiciones esquemáticas genéricas...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token comment">// Clase que encapsulará información del evento.</span>
<span class="token comment">// Solo la definiremos si hay información que pasar al subscriptor.</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">DatosDelEvento</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> Dato1 <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> Dato2 <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Suscriptor</span> 
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">ManejadorDeEventoDelSuscriptor</span><span class="token punctuation">(</span><span class="token class-name">DatosDelEvento</span> datos<span class="token punctuation">)</span> 
    <span class="token punctuation">{</span> 
        <span class="token comment">// Tratamiento del evento.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Publicador</span> 
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-delegate">delegate</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">ManejadorDeEvento</span><span class="token punctuation">(</span><span class="token class-name">DatosDelEvento</span> datos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-event">event</span> <span class="token class-name">ManejadorDeEvento</span> IdEvento<span class="token punctuation">;</span>
    
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">OperacionQuePuedeDesencadenarElEvento</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// En algún momento el objeto publicador deberá notificar el evento.</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>hayQueEnviarEvento<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Generamos la multidifusión del evento a todos los objetos</span>
            <span class="token comment">// subscriptores. Estos los tratarán a través del manejador que</span>
            <span class="token comment">// asociaron.</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>IdEvento <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span> 
                <span class="token function">IdEvento</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">DatosDelEvento</span><span class="token punctuation">(</span>dato1<span class="token punctuation">,</span> dato2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Otra forma de expresar de forma más compácta el código de arriba</span>
            <span class="token comment">// es usar el operador ?. de la siguiente forma.</span>
            IdEvento<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">DatosDelEvento</span><span class="token punctuation">(</span>dato1<span class="token punctuation">,</span> dato2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>En algún momento habrá en el programa un objeto publicador y uno o varios subscriptores instanciados....</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token class-name">Publicador</span> p <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Publicador</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// En este esquema básico, por simplificar, los objetos suscriptores </span>
<span class="token comment">// son del mismo tipo pero podrían ser de tipos diferentes.</span>
<span class="token class-name">Suscriptor</span> s1 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Suscriptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Suscriptor</span> s2 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Suscriptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Además, tendremos el siguiente código donde los objetos <strong>suscriptores</strong> <strong><code>s1</code></strong> y <strong><code>s2</code></strong> se suscriben al evento que genera el <strong>publicador</strong> <strong><code>p</code></strong></p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>p<span class="token punctuation">.</span>IdEvento <span class="token operator">+=</span> s1<span class="token punctuation">.</span>ManejadorDeEventoDelSuscriptor<span class="token punctuation">;</span>
p<span class="token punctuation">.</span>IdEvento <span class="token operator">+=</span> s2<span class="token punctuation">.</span>ManejadorDeEventoDelSuscriptor<span class="token punctuation">;</span>
</code></pre><p>Posteriormente, en algún lugar del programa, se ejecutará la siguiente línea con la operación que puede desencadenar el evento sobre el objeto publicador <strong><code>p</code></strong>.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token comment">// De producir la operación el evento, se ejecutará el código </span>
<span class="token comment">// de los manejadores en los objetos subscriptores.</span>
p<span class="token punctuation">.</span><span class="token function">OperacionQuePuedeDesencadenarElEvento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre><blockquote>
<p>✋ <strong>Importante:</strong></p>
<p>El código de los manejadores se ejecutará por defecto en el mismo hilo de ejecución. Por esta razón, si el proceso de gestión del evento es muy costoso temporalmente podría bloquear la secuencia normal de ejecución.</p>
<p>Aunque queda fuera de este tema, en estos casos convendría ejecutar el proceso del evento en un hilo aparte.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<div class="caso_estudio">
<p>🎓 <strong>Caso de estudio:</strong></p>
<p>Vamos a tratar de modelar mediante el mecanismo de comunicación con eventos entre objetos. Un modelo muy simplificado de una central nuclear donde:</p>
<p>Tendremos una clase <strong><code>Reactor</code></strong> a la que se le podrá cambiar la potencia que genera en <strong><code>kW</code></strong> a través de una propiedad. Esta potencia tendrá un máximo de <strong><code>2000 kW</code></strong> para que la temperatura del mismo se mantenga a menos de <strong><code>1000°C</code></strong>. En este modelo simplificado, el valor de la propiedad <strong><code>Temperatura</code></strong> se calculará con una simple regla de 3 dados los máximos anteriormente dados.</p>
<p>El reactor generará un evento de cambio de temperatura al modificarse la potencia requerida en el mismo.</p>
<p>Piensa en cómo modelar dicha clase <strong><code>Reactor</code></strong> si no se te ocurre, puedes partir de la siguiente propuesta...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-using">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token class-name">Reactor</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> kW_MAXIMOS <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-double">double</span></span> TEMPERATURA_MAXIMA <span class="token operator">=</span> <span class="token number">1000D</span><span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>    <span class="token keyword keyword-public">public</span> <span class="token function">Reactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Potencia_kW <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// Temperatura es una propiedad calculada en función de la potencia.</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> Temperatura <span class="token operator">=&gt;</span> TEMPERATURA_MAXIMA <span class="token operator">*</span> Potencia_kW <span class="token operator">/</span> kW_MAXIMOS<span class="token punctuation">;</span>
    <span class="token comment">// Definimos el evento de cambio de temperatura al que suscribirnos.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-delegate">delegate</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">GestionTemperatura</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-double">double</span></span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-event">event</span> <span class="token class-name">GestionTemperatura<span class="token punctuation">?</span></span> CambioEnTemperatura<span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> potencia_kW<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> Potencia_kW
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-get">get</span> <span class="token operator">=&gt;</span> potencia_kW<span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>        <span class="token keyword keyword-set">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token keyword keyword-value">value</span> <span class="token operator">!=</span> potencia_kW<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                potencia_kW <span class="token operator">=</span> <span class="token keyword keyword-value">value</span><span class="token punctuation">;</span>
                <span class="token comment">// Si realmente se ha modificado el valor generamos el</span>
                <span class="token comment">// evento de indicando la nueva temperatura.</span>
                CambioEnTemperatura<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>Temperatura<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Vamos ahora a modelas dos <strong>clases suscriptoras</strong> a los eventos de cambios de temperatura en el reactor. La primera será una sencilla clase <strong><code>Alarma</code></strong> de tal manera que, al instanciar un objeto <strong><code>Alarma</code></strong> le indicaremos un umbral de activación y además tendremos el <strong>método manejador</strong> <strong><code>GestionActivacion</code></strong> que cumplirá el interfaz del tipo delegado del evento de cambio de temperatura para poder suscribirse a él.</p>
<p>Piensa en cómo modelar dicha clase <strong><code>Alarma</code></strong> si no se te ocurre, puedes partir de la siguiente propuesta...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Alarma</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token function">Alarma</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-double">double</span></span> umbralActivacion<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> UmbralActivacion <span class="token operator">=</span> umbralActivacion<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> Activada <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-set">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> UmbralActivacion <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">GestionActivacion</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-double">double</span></span> valor<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Activada <span class="token operator">=</span> valor <span class="token operator">&gt;</span> UmbralActivacion<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>El siguiente tipo que se suscribirá al evento del reactor será la clase <strong><code>Refrigeración</code></strong>. De tal manera que, una refrigeración se definirá con un numero de bombas de agua disponibles para hacer circular agua por la vasija del reactor y posteriormente llevarla al circuito de enfriamiento y evaporación. También recibirá una temperatura máxima para la que activar todas las bombas de agua, y de esta manera establecer el flujo de agua en el circuito.</p>
<p>Los objetos <strong><code>Refrigeracion</code></strong> se suscribirán al evento de cambio de temperatura en el reactor mediante el manejador <strong><code>GestionTemperaturaReactor</code></strong> que será el encargado de activar las bombas en el reactor. Para simplificar, vamos a implementar esta acción modificando una propiedad privada para modificación <strong><code>BombasActivas</code></strong> que se calculará también con una simple regla de tres, a partir del número de bombas disponibles y la temperatura a partir de la que se activarán todas.</p>
<p>Piensa en cómo modelar dicha clase <strong><code>Refrigeracion</code></strong> si no se te ocurre, puedes partir de la siguiente propuesta...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Refrigeracion</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token function">Refrigeracion</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-int">int</span></span> bombasDisponibles<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-double">double</span></span> temperaturaMaxima<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        TemperaturaMaxima <span class="token operator">=</span> temperaturaMaxima<span class="token punctuation">;</span>
        BombasDisponibles <span class="token operator">=</span> bombasDisponibles<span class="token punctuation">;</span>
        BombasActivas <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> TemperaturaMaxima <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> BombasDisponibles <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> BombasActivas <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-set">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">GestionTemperaturaReactor</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-double">double</span></span> t<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> BombasActivas <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span>t <span class="token operator">*</span> BombasDisponibles <span class="token operator">/</span> TemperaturaMaxima<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Vamos generar un programa principal para probar que los eventos entre los objetos que modelan nuestro reactor se generan y se gestionan correctamente, para ello dentro de la clase <strong><code>Program</code></strong> voy a definir un método de utilidad, para visualizar lo que está sucediendo con los objetos involucrados. Por ejemplo, una posible implementación podría ser ...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token comment">// Simula por consola un panel de motorización de los diferentes objetos que tenemos.</span>
<span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">MuestraMonitorizacionControl</span><span class="token punctuation">(</span>
                                <span class="token class-name">Reactor</span> reactor<span class="token punctuation">,</span> 
                                <span class="token class-name">Refrigeracion</span> refrigeracion<span class="token punctuation">,</span> 
                                <span class="token class-name">Alarma</span> alarma<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-string">string</span></span> informacion <span class="token operator">=</span> 
    <span class="token interpolation-string"><span class="token string">$"Potencia: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">reactor<span class="token punctuation">.</span>Potencia_kW<span class="token punctuation">,</span> <span class="token number">9</span></span><span class="token punctuation">}</span></span><span class="token string"> kW"</span></span> <span class="token operator">+</span>
    <span class="token interpolation-string"><span class="token string">$"\nTemperatura: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">reactor<span class="token punctuation">.</span>Temperatura<span class="token punctuation">,</span> <span class="token number">6</span></span><span class="token punctuation">}</span></span><span class="token string"> °C"</span></span> <span class="token operator">+</span>
    <span class="token punctuation">(</span>alarma<span class="token punctuation">.</span>Activada <span class="token punctuation">?</span> <span class="token string">" ALARMA"</span><span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token string">" "</span><span class="token punctuation">,</span><span class="token number">7</span></span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token interpolation-string"><span class="token string">$"\nBombas de refrigeración activas </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">refrigeracion<span class="token punctuation">.</span>BombasActivas</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">SetCursorPosition</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>informacion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Una posible implementación de un programa principal de prueba sería ...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Definimos los objetos relacionados.</span>
    <span class="token class-name">Reactor</span> reactor <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Reactor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> BOMBAS_DE_AGUA_REFRIGERACION <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token class-name">Refrigeracion</span> refrigeracion <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Refrigeracion</span><span class="token punctuation">(</span>
                                BOMBAS_DE_AGUA_REFRIGERACION<span class="token punctuation">,</span> 
                                Reactor<span class="token punctuation">.</span>TEMPERATURA_MAXIMA<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Alarma</span> alarma <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Alarma</span><span class="token punctuation">(</span>Reactor<span class="token punctuation">.</span>TEMPERATURA_MAXIMA<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Proceso de subscripción de la refrigeración y la alarma a los cambios</span>
    <span class="token comment">// de temperatura en el objeto reactor.</span>
    reactor<span class="token punctuation">.</span>CambioEnTemperatura <span class="token operator">+=</span> refrigeracion<span class="token punctuation">.</span>GestionTemperaturaReactor<span class="token punctuation">;</span>
    reactor<span class="token punctuation">.</span>CambioEnTemperatura <span class="token operator">+=</span> alarma<span class="token punctuation">.</span>GestionActivacion<span class="token punctuation">;</span>

    <span class="token class-name">Random</span> s <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-int">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Al cambiar la potencia solicitada al reactor de forma aleatoria</span>
        <span class="token comment">// se desencadenará el evento de cambio de temperatura que puede</span>
        <span class="token comment">// cambiar el estado de los objetos alarma y refrigeración.</span>
        reactor<span class="token punctuation">.</span>Potencia_kW <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> Reactor<span class="token punctuation">.</span>kW_MAXIMOS <span class="token operator">+</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">MuestraMonitorizacionControl</span><span class="token punctuation">(</span>reactor<span class="token punctuation">,</span> refrigeracion<span class="token punctuation">,</span> alarma<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p align="center" style="zoom:0.8" class="dot"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 9.0.0 (20230911.1827)
 -->
<!-- Title: G Pages: 1 -->
<svg width="552pt" height="146pt" viewBox="0.00 0.00 551.82 146.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 142.4)">
<title>G</title>
<!-- p -->
<g id="node1" class="node">
<title>p</title>
<polygon fill="none" stroke="black" points="184.96,-99.6 184.96,-134.4 246.53,-134.4 246.53,-99.6 184.96,-99.6"></polygon>
<text text-anchor="start" x="193.96" y="-112.8" font-family="Arial" font-size="14.00">reactor</text>
<text text-anchor="start" x="254.53" y="-112.8" font-family="Arial" font-size="14.00">.CambioEnTemperatura</text>
</g>
<!-- s1 -->
<g id="node2" class="node">
<title>s1</title>
<polygon fill="none" stroke="black" points="8,-4 8,-38.8 111.59,-38.8 111.59,-4 8,-4"></polygon>
<text text-anchor="start" x="17" y="-17.2" font-family="Arial" font-size="14.00">refrigenración</text>
<text text-anchor="start" x="119.59" y="-17.2" font-family="Arial" font-size="14.00">.GestionTemperaturaReactor</text>
</g>
<!-- p&#45;&gt;s1 -->
<g id="edge1" class="edge">
<title>p-&gt;s1</title>
<path fill="none" stroke="black" d="M268.07,-95.69C247.61,-82.01 220.43,-63.84 198.25,-49.01"></path>
<polygon fill="black" stroke="black" points="200.28,-46.16 190.02,-43.51 196.39,-51.98 200.28,-46.16"></polygon>
<text text-anchor="middle" x="279.19" y="-65" font-family="Arial" font-size="14.00">temperatura</text>
</g>
<!-- s2 -->
<g id="node3" class="node">
<title>s2</title>
<polygon fill="none" stroke="black" points="343.08,-4 343.08,-38.8 403.87,-38.8 403.87,-4 343.08,-4"></polygon>
<text text-anchor="start" x="352.08" y="-17.2" font-family="Arial" font-size="14.00">alarma</text>
<text text-anchor="start" x="411.87" y="-17.2" font-family="Arial" font-size="14.00">.GestionActivacion</text>
</g>
<!-- p&#45;&gt;s2 -->
<g id="edge2" class="edge">
<title>p-&gt;s2</title>
<path fill="none" stroke="black" d="M329.04,-95.69C349.64,-82.01 377.03,-63.84 399.36,-49.01"></path>
<polygon fill="black" stroke="black" points="401.26,-51.95 407.65,-43.51 397.38,-46.12 401.26,-51.95"></polygon>
<text text-anchor="middle" x="419.19" y="-65" font-family="Arial" font-size="14.00">temperatura</text>
</g>
</g>
</svg>
</p><blockquote>
<p>✋ <strong>Importante:</strong> Si nos fijamos en el diseño consecuencia del uso de eventos, podemos observar que las clases '<em>desconocen</em>' con que otras clases se están relacionando. Por ejemplo, <strong><code>Alarma</code></strong> no sabe nada sobre quien le produce la activación. Solo sabe que se creó para saltar a partir de una determinado umbral y es lo que hace al recibir el evento. Podríamos rehusar este tipo <strong><code>Alarma</code></strong> para cualquier otro tipo que no sea una reactor.<br>
Lo mismo sucede con la clase <strong><code>Reactor</code></strong>. No recibe ni usa ni se relaciona con el tipo <strong><code>Alarma</code></strong> o <strong><code>Refrigeracion</code></strong> y <em><code>desconoce</code></em> que tipo de objetos se suscribirán a sus eventos de cambio en la temperatura del reactor. Esto nos conduce  a un fuerte <strong><code>desacoplamiento</code></strong> en nuestro diseño y a la posibilidad de hacer modificaciones o ampliaciones futuras sin tener que cambiar nuestra clase <strong><code>Reactor</code></strong>.</p>
</blockquote>
<p>No todos los lenguajes dispondrán de la posibilidad de definir <strong>eventos</strong>, pero si que dispondrán de la posibilidad de implementar un esquema similar utilizando la programación orientada a objetos tradicional. A este tipo de esquema publicador/subscriptor simple, también se le conoce como Patron Observador u <strong><a href="https://es.wikipedia.org/wiki/Observer_(patr%C3%B3n_de_dise%C3%B1o)">Observer</a></strong> y hemos visto que en C# se implementa de forma simple a través de <strong>eventos</strong>.</p>
<blockquote>
<p>📌 <strong>Nota1:</strong> No debemos confundir el <strong>patrón observador</strong> con el <strong>patrón publicador-subscriptor</strong> que será una arquitectura mucho más compleja basada en el patrón observador.</p>
</blockquote>
<blockquote>
<p>📌 <strong>Nota2:</strong> El estudio en profundidad de ambos patrones y su comparación, quedan completamente fuera del alcance de este curso y lo único que se pretende en el tema es, entender el concepto de evento y gestionar en C# la comunicación simple entre objetos, utilizando los mismos.</p>
</blockquote>
</div> <!-- fin caso de estudio -->

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>