<!DOCTYPE html><html><head>
      <title>Programación 1º DAM Tema 7 parte 3</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .caso_estudio {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .ejercicio {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  justify-content: space-between;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="tema-7-parte-3">Tema 7 parte 3 </h1>
<p>Descargar estos apuntes en <a href="./Tema7_3.pdf">pdf</a> o <a href="./Tema7_3.html">html</a></p>
<h2 id="índice">Índice </h2>

<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#gestión-de-errores-en-poo" class="md-toc-link"><p>Gestión de errores en POO</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#excepciones-conceptos-previos" class="md-toc-link">
            <p>Excepciones Conceptos Previos</p>

          </a></div><details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#excepciones-en-csharp" class="md-toc-link"><p>Excepciones en CSharp</p>
</a>
          </summary>
        <div>
          <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#generación-de-excepciones" class="md-toc-link"><p>Generación de excepciones</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#captura-y-control-de-excepciones" class="md-toc-link">
            <p>Captura y control de excepciones</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#capturando-excepciones-diferentes" class="md-toc-link">
            <p>Capturando excepciones diferentes</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#liberando-recursos-con-finally" class="md-toc-link"><p>Liberando recursos con finally</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ejemplo-práctico-de-uso-de-finally" class="md-toc-link">
            <p>Ejemplo práctico de uso de finally</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#creando-nuestras-propias-excepciones" class="md-toc-link"><p>Creando nuestras propias excepciones</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ejemplo-de-creación-de-una-excepción-propia" class="md-toc-link">
            <p>Ejemplo de creación de una excepción propia</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#encadenamiento-de-excepciones-avanzado" class="md-toc-link"><p>Encadenamiento de excepciones (Avanzado)</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#caso-de-uso-de-encadenamiento-de-excepciones" class="md-toc-link">
            <p>Caso de uso de encadenamiento de excepciones</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#bulb-tips-de-uso-de-excepciones-en-net" class="md-toc-link"><p>💡 Tips de uso de excepciones en .NET</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#excepciones-estándar-en-net" class="md-toc-link">
            <p>Excepciones estándar en .NET</p>

          </a></div>
        </div>
      </details>
    
        </div>
      </details>
    
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<h2 id="gestión-de-errores-en-poo">Gestión de errores en POO </h2>
<h3 id="excepciones-conceptos-previos">Excepciones Conceptos Previos </h3>
<ul>
<li>
<p><strong>Definición</strong>: Es la forma en que los lenguajes orientados a objetos realizan el control de errores.</p>
</li>
<li>
<p><strong>Frente al control de errores en la programación estructurada tradicional, nos ofrecen:</strong></p>
<ul>
<li>
<p><strong>Claridad y simplicidad</strong>, ya que <strong>evitamos lógica adicional</strong> del caso de error.</p>
<p>Por ejemplo, evitando que un método devuelva un error como parámetro a través de la pila de llamadas como sucedía en la <strong>programación estructurada</strong>.</p>
<p align="center" style="zoom:0.7" class="dot"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 9.0.0 (20230911.1827)
 -->
<!-- Title: G Pages: 1 -->
<svg width="443pt" height="449pt" viewBox="0.00 0.00 442.69 448.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 444.8)">
<title>G</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-444.8 438.69,-444.8 438.69,4 -4,4"></polygon>
<!-- n0 -->
<g id="node1" class="node">
<title>n0</title>
<polygon fill="none" stroke="black" points="173.34,-436.8 119.34,-436.8 119.34,-400.8 173.34,-400.8 173.34,-436.8"></polygon>
<polygon fill="none" stroke="black" points="177.34,-440.8 115.34,-440.8 115.34,-396.8 177.34,-396.8 177.34,-440.8"></polygon>
<text text-anchor="middle" x="146.34" y="-414.6" font-family="Arial" font-size="14.00">main</text>
</g>
<!-- n1 -->
<g id="node2" class="node">
<title>n1</title>
<polygon fill="none" stroke="black" points="71.69,-339.2 9,-339.2 9,-297.6 71.69,-297.6 71.69,-339.2"></polygon>
<text text-anchor="middle" x="40.34" y="-322.6" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="40.34" y="-305.8" font-family="Arial" font-size="14.00">1</text>
</g>
<!-- n0&#45;&gt;n1 -->
<g id="edge1" class="edge">
<title>n0-&gt;n1</title>
<path fill="none" stroke="gray" d="M123.34,-396.45C107.79,-382.01 87.09,-362.8 70.26,-347.17"></path>
<polygon fill="gray" stroke="gray" points="72.67,-344.64 62.96,-340.4 67.91,-349.77 72.67,-344.64"></polygon>
</g>
<!-- n2 -->
<g id="node3" class="node">
<title>n2</title>
<polygon fill="none" stroke="black" points="152.69,-339.2 90,-339.2 90,-297.6 152.69,-297.6 152.69,-339.2"></polygon>
<text text-anchor="middle" x="121.34" y="-322.6" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="121.34" y="-305.8" font-family="Arial" font-size="14.00">2</text>
</g>
<!-- n0&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n0-&gt;n2</title>
<path fill="none" stroke="gray" d="M140.92,-396.45C137.49,-382.94 132.99,-365.24 129.18,-350.22"></path>
<polygon fill="gray" stroke="gray" points="132.65,-349.67 126.79,-340.84 125.86,-351.39 132.65,-349.67"></polygon>
</g>
<!-- n3 -->
<g id="node4" class="node">
<title>n3</title>
<polygon fill="none" stroke="black" points="303.69,-339.2 241,-339.2 241,-297.6 303.69,-297.6 303.69,-339.2"></polygon>
<text text-anchor="middle" x="272.34" y="-322.6" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="272.34" y="-305.8" font-family="Arial" font-size="14.00">3</text>
</g>
<!-- n0&#45;&gt;n3 -->
<g id="edge3" class="edge">
<title>n0-&gt;n3</title>
<path fill="none" stroke="gray" d="M173.68,-396.45C192.51,-381.74 217.68,-362.09 237.88,-346.31"></path>
<polygon fill="gray" stroke="gray" points="239.86,-349.21 245.58,-340.3 235.55,-343.7 239.86,-349.21"></polygon>
</g>
<!-- n21 -->
<g id="node5" class="node">
<title>n21</title>
<polygon fill="none" stroke="black" points="62.69,-240 0,-240 0,-198.4 62.69,-198.4 62.69,-240"></polygon>
<text text-anchor="middle" x="31.34" y="-223.4" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="31.34" y="-206.6" font-family="Arial" font-size="14.00">2.1</text>
</g>
<!-- n2&#45;&gt;n21 -->
<g id="edge4" class="edge">
<title>n2-&gt;n21</title>
<path fill="none" stroke="gray" d="M102.7,-297.26C89.66,-283.18 72.08,-264.19 57.63,-248.58"></path>
<polygon fill="gray" stroke="gray" points="60.36,-246.38 51,-241.42 55.22,-251.14 60.36,-246.38"></polygon>
</g>
<!-- n22 -->
<g id="node6" class="node">
<title>n22</title>
<polygon fill="none" stroke="black" points="143.69,-240 81,-240 81,-198.4 143.69,-198.4 143.69,-240"></polygon>
<text text-anchor="middle" x="112.34" y="-223.4" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="112.34" y="-206.6" font-family="Arial" font-size="14.00">2.2</text>
</g>
<!-- n2&#45;&gt;n22 -->
<g id="edge5" class="edge">
<title>n2-&gt;n22</title>
<path fill="none" stroke="gray" d="M119.48,-297.26C118.26,-284.1 116.64,-266.63 115.26,-251.66"></path>
<polygon fill="gray" stroke="gray" points="118.75,-251.46 114.35,-241.82 111.78,-252.1 118.75,-251.46"></polygon>
</g>
<!-- n3&#45;&gt;n0 -->
<g id="edge20" class="edge">
<title>n3-&gt;n0</title>
<path fill="none" stroke="red" d="M258.89,-339.67C249.91,-352.09 237.23,-367.69 223.34,-378.8 212.76,-387.27 200.03,-394.63 188.01,-400.6"></path>
<polygon fill="red" stroke="red" points="186.6,-397.39 179.06,-404.83 189.59,-403.72 186.6,-397.39"></polygon>
<text text-anchor="middle" x="250.35" y="-362.6" font-family="Arial" font-size="18.00" fill="red">e</text>
</g>
<!-- n31 -->
<g id="node7" class="node">
<title>n31</title>
<polygon fill="none" stroke="black" points="224.69,-240 162,-240 162,-198.4 224.69,-198.4 224.69,-240"></polygon>
<text text-anchor="middle" x="193.34" y="-223.4" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="193.34" y="-206.6" font-family="Arial" font-size="14.00">3.1</text>
</g>
<!-- n3&#45;&gt;n31 -->
<g id="edge6" class="edge">
<title>n3-&gt;n31</title>
<path fill="none" stroke="gray" d="M255.98,-297.26C244.64,-283.32 229.38,-264.54 216.77,-249.02"></path>
<polygon fill="gray" stroke="gray" points="219.67,-247.04 210.65,-241.49 214.24,-251.46 219.67,-247.04"></polygon>
</g>
<!-- n32 -->
<g id="node8" class="node">
<title>n32</title>
<polygon fill="none" stroke="black" points="305.69,-240 243,-240 243,-198.4 305.69,-198.4 305.69,-240"></polygon>
<text text-anchor="middle" x="274.34" y="-223.4" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="274.34" y="-206.6" font-family="Arial" font-size="14.00">3.2</text>
</g>
<!-- n3&#45;&gt;n32 -->
<g id="edge7" class="edge">
<title>n3-&gt;n32</title>
<path fill="none" stroke="gray" d="M272.76,-297.26C273.03,-284.1 273.39,-266.63 273.7,-251.66"></path>
<polygon fill="gray" stroke="gray" points="277.19,-251.9 273.9,-241.83 270.19,-251.75 277.19,-251.9"></polygon>
</g>
<!-- n33 -->
<g id="node9" class="node">
<title>n33</title>
<polygon fill="none" stroke="black" points="386.69,-240 324,-240 324,-198.4 386.69,-198.4 386.69,-240"></polygon>
<text text-anchor="middle" x="355.34" y="-223.4" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="355.34" y="-206.6" font-family="Arial" font-size="14.00">3.3</text>
</g>
<!-- n3&#45;&gt;n33 -->
<g id="edge8" class="edge">
<title>n3-&gt;n33</title>
<path fill="none" stroke="gray" d="M289.54,-297.26C301.45,-283.32 317.48,-264.54 330.74,-249.02"></path>
<polygon fill="gray" stroke="gray" points="333.35,-251.34 337.19,-241.47 328.03,-246.8 333.35,-251.34"></polygon>
</g>
<!-- n221 -->
<g id="node10" class="node">
<title>n221</title>
<polygon fill="none" stroke="black" points="62.69,-140.8 0,-140.8 0,-99.2 62.69,-99.2 62.69,-140.8"></polygon>
<text text-anchor="middle" x="31.34" y="-124.2" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="31.34" y="-107.4" font-family="Arial" font-size="14.00">2.2.1</text>
</g>
<!-- n22&#45;&gt;n221 -->
<g id="edge9" class="edge">
<title>n22-&gt;n221</title>
<path fill="none" stroke="gray" d="M95.56,-198.06C83.94,-184.12 68.3,-165.34 55.36,-149.82"></path>
<polygon fill="gray" stroke="gray" points="58.17,-147.72 49.08,-142.28 52.79,-152.2 58.17,-147.72"></polygon>
</g>
<!-- n222 -->
<g id="node11" class="node">
<title>n222</title>
<polygon fill="none" stroke="black" points="143.69,-140.8 81,-140.8 81,-99.2 143.69,-99.2 143.69,-140.8"></polygon>
<text text-anchor="middle" x="112.34" y="-124.2" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="112.34" y="-107.4" font-family="Arial" font-size="14.00">2.2.2</text>
</g>
<!-- n22&#45;&gt;n222 -->
<g id="edge10" class="edge">
<title>n22-&gt;n222</title>
<path fill="none" stroke="gray" d="M112.34,-198.06C112.34,-184.9 112.34,-167.43 112.34,-152.46"></path>
<polygon fill="gray" stroke="gray" points="115.84,-152.63 112.34,-142.63 108.84,-152.63 115.84,-152.63"></polygon>
</g>
<!-- n223 -->
<g id="node12" class="node">
<title>n223</title>
<polygon fill="none" stroke="black" points="224.69,-140.8 162,-140.8 162,-99.2 224.69,-99.2 224.69,-140.8"></polygon>
<text text-anchor="middle" x="193.34" y="-124.2" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="193.34" y="-107.4" font-family="Arial" font-size="14.00">2.2.3</text>
</g>
<!-- n22&#45;&gt;n223 -->
<g id="edge11" class="edge">
<title>n22-&gt;n223</title>
<path fill="none" stroke="gray" d="M129.13,-198.06C140.75,-184.12 156.39,-165.34 169.33,-149.82"></path>
<polygon fill="gray" stroke="gray" points="171.9,-152.2 175.61,-142.28 166.52,-147.72 171.9,-152.2"></polygon>
</g>
<!-- n33&#45;&gt;n3 -->
<g id="edge19" class="edge">
<title>n33-&gt;n3</title>
<path fill="none" stroke="red" d="M348.86,-240.44C344.23,-252.7 337.09,-268.13 327.34,-279.6 323.16,-284.52 318.19,-289.09 312.98,-293.23"></path>
<polygon fill="red" stroke="red" points="311.28,-290.13 305.29,-298.87 315.42,-295.78 311.28,-290.13"></polygon>
<text text-anchor="middle" x="346.35" y="-263.4" font-family="Arial" font-size="18.00" fill="red">e</text>
</g>
<!-- n331 -->
<g id="node13" class="node">
<title>n331</title>
<polygon fill="none" stroke="black" points="353.69,-140.8 291,-140.8 291,-99.2 353.69,-99.2 353.69,-140.8"></polygon>
<text text-anchor="middle" x="322.34" y="-124.2" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="322.34" y="-107.4" font-family="Arial" font-size="14.00">3.3.1</text>
</g>
<!-- n33&#45;&gt;n331 -->
<g id="edge12" class="edge">
<title>n33-&gt;n331</title>
<path fill="none" stroke="gray" d="M344.19,-198.19C341.35,-192.55 338.5,-186.34 336.34,-180.4 333.09,-171.44 330.39,-161.44 328.26,-152.23"></path>
<polygon fill="gray" stroke="gray" points="331.72,-151.66 326.19,-142.62 324.88,-153.13 331.72,-151.66"></polygon>
</g>
<!-- n332 -->
<g id="node14" class="node">
<title>n332</title>
<polygon fill="none" stroke="black" points="434.69,-140.8 372,-140.8 372,-99.2 434.69,-99.2 434.69,-140.8"></polygon>
<text text-anchor="middle" x="403.34" y="-124.2" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="403.34" y="-107.4" font-family="Arial" font-size="14.00">3.3.2</text>
</g>
<!-- n33&#45;&gt;n332 -->
<g id="edge13" class="edge">
<title>n33-&gt;n332</title>
<path fill="none" stroke="gray" d="M365.29,-198.06C371.98,-184.51 380.93,-166.39 388.46,-151.13"></path>
<polygon fill="gray" stroke="gray" points="391.45,-152.99 392.74,-142.47 385.18,-149.89 391.45,-152.99"></polygon>
</g>
<!-- n331&#45;&gt;n33 -->
<g id="edge18" class="edge">
<title>n331-&gt;n33</title>
<path fill="none" stroke="red" d="M329.17,-141.11C333.73,-154.53 339.8,-172.43 344.96,-187.6"></path>
<polygon fill="red" stroke="red" points="341.49,-188.28 348.02,-196.63 348.12,-186.03 341.49,-188.28"></polygon>
<text text-anchor="middle" x="347.35" y="-164.2" font-family="Arial" font-size="18.00" fill="red">e</text>
</g>
<!-- n3311 -->
<g id="node15" class="node">
<title>n3311</title>
<polygon fill="none" stroke="black" points="254.69,-41.6 192,-41.6 192,0 254.69,0 254.69,-41.6"></polygon>
<text text-anchor="middle" x="223.34" y="-25" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="223.34" y="-8.2" font-family="Arial" font-size="14.00">3.3.1.1</text>
</g>
<!-- n331&#45;&gt;n3311 -->
<g id="edge14" class="edge">
<title>n331-&gt;n3311</title>
<path fill="none" stroke="gray" d="M301.83,-98.86C287.36,-84.65 267.79,-65.44 251.81,-49.75"></path>
<polygon fill="gray" stroke="gray" points="254.5,-47.48 244.91,-42.97 249.59,-52.48 254.5,-47.48"></polygon>
</g>
<!-- n3312 -->
<g id="node16" class="node">
<title>n3312</title>
<polygon fill="none" stroke="black" points="335.69,-41.6 273,-41.6 273,0 335.69,0 335.69,-41.6"></polygon>
<text text-anchor="middle" x="304.34" y="-25" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="304.34" y="-8.2" font-family="Arial" font-size="14.00">3.3.1.2</text>
</g>
<!-- n331&#45;&gt;n3312 -->
<g id="edge15" class="edge">
<title>n331-&gt;n3312</title>
<path fill="none" stroke="gray" d="M318.62,-98.86C316.15,-85.57 312.88,-67.89 310.09,-52.82"></path>
<polygon fill="gray" stroke="gray" points="313.61,-52.6 308.35,-43.4 306.72,-53.87 313.61,-52.6"></polygon>
</g>
<!-- n3313 -->
<g id="node17" class="node">
<title>n3313</title>
<polygon fill="none" stroke="black" points="416.69,-41.6 354,-41.6 354,0 416.69,0 416.69,-41.6"></polygon>
<text text-anchor="middle" x="385.34" y="-25" font-family="Arial" font-size="14.00">método</text>
<text text-anchor="middle" x="385.34" y="-8.2" font-family="Arial" font-size="14.00">3.3.1.3</text>
</g>
<!-- n331&#45;&gt;n3313 -->
<g id="edge16" class="edge">
<title>n331-&gt;n3313</title>
<path fill="none" stroke="gray" d="M333.5,-98.88C340.13,-87.22 348.88,-72.37 357.34,-59.6 359.16,-56.86 361.1,-54.04 363.08,-51.24"></path>
<polygon fill="gray" stroke="gray" points="365.91,-53.3 368.94,-43.15 360.24,-49.19 365.91,-53.3"></polygon>
</g>
<!-- n3313&#45;&gt;n331 -->
<g id="edge17" class="edge">
<title>n3313-&gt;n331</title>
<path fill="none" stroke="red" d="M377.7,-41.88C372.73,-53.79 365.64,-68.92 357.34,-81.2 355.29,-84.24 353,-87.27 350.6,-90.23"></path>
<polygon fill="red" stroke="red" points="348.09,-87.78 344.18,-97.63 353.37,-92.37 348.09,-87.78"></polygon>
<text text-anchor="middle" x="374.35" y="-65" font-family="Arial" font-size="18.00" fill="red">e</text>
</g>
</g>
</svg>
</p><p>En el diagrama de arriba podemos ver una situación típica de la programación estructurada donde si se producía un error en un módulo básico como el <strong><code>módulo 3313()</code></strong> del ejemplo. Este tenía que propagarse hacia arriba a través de todos los módulos devolviéndose en todas las llamadas. Esto hacía, que muchos interfaces tuviesen que devolver información adicional para el error con un interfaz similar al siguiente...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo3</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-string">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo33</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-string">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo331</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-string">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo3313</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name"><span class="token keyword keyword-string">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre></li>
<li>
<p><strong>Tratamiento asegurado</strong> de errores.</p>
</li>
</ul>
</li>
</ul>
<div class="contenedor">
    <div class="fondo">
        <div class="abre_comilla">"</div>
        <div class="cierra_comilla">"</div>
        <div class="cita">It's hard enough to find an error in your code when you're looking for it; it's even harder when you've assumed your code is error-free.</div>
        <div class="autor">- Steve McConnell.</div>
    </div>
</div>
<div style="page-break-after:always;"></div>
<h3 id="excepciones-en-csharp">Excepciones en CSharp </h3>
<ul>
<li>Todas derivan de la clase <strong><code>System.Exception</code></strong></li>
<li>Existen ya muchas <a href="https://docs.microsoft.com/es-es/dotnet/standard/exceptions/?redirectedfrom=MSDN#common-exceptions">predefinidas</a>.</li>
<li>Podemos definir <strong>excepciones propias</strong> mediante el mecanismo de herencia.</li>
</ul>
<h4 id="generación-de-excepciones">Generación de excepciones </h4>
<p>Utilizaremos la instrucción <strong><a href="https://docs.microsoft.com/es-es/dotnet/csharp/language-reference/keywords/throw">throw</a></strong> → <code>throw new &lt;TipoExcepción&gt;(...);</code></p>
<p>Veamos un <strong>ejemplo</strong> en el que vamos a usar la excepción ya predefinida <a href="https://docs.microsoft.com/es-es/dotnet/api/system.argumentnullexception?view=netcore-3.1">ArgumentNullException</a> que me servirá para detectar aquellos tipos referencia que sean <code>null</code> antes de usarlos.</p>
<p>Por ejemplo, en el método <strong><code>Diagnostico</code></strong> del bloque anterior que creamos para la clase <strong><code>Sicologo</code></strong> supongamos que me llega <strong><code>Paciente?</code></strong> anulable y queremos asegurarnos de que no sea <strong><code>null</code></strong></p>
<blockquote>
<p>📌 <strong>Nota:</strong> Antes de existir los tipos no anulables en C# era un problema muy común y fuente de errores en otros lenguajes como C++. Es por eso que desde C#10 los objetos no son anulables por defecto.</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Sicologo</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">Diagnostico</span><span class="token punctuation">(</span><span class="token class-name">Paciente<span class="token punctuation">?</span></span> p<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>p <span class="token keyword keyword-is">is</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token string">"paciente"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> p <span class="token keyword keyword-switch">switch</span>
        <span class="token punctuation">{</span>
            <span class="token return-type class-name">PacienteAlegre</span> _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">p<span class="token punctuation">.</span><span class="token function">GetNombre</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> le veo estupendamente. Enhorabuena!! no necesita más terapia."</span></span><span class="token punctuation">,</span>
            <span class="token return-type class-name">PacienteTriste</span> _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">p<span class="token punctuation">.</span><span class="token function">GetNombre</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> tome fluoxetina 20mg y vuelva en un mes."</span></span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">p<span class="token punctuation">.</span><span class="token function">GetNombre</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> déjeme que estudie un poco más su caso y vuelva la semana que viene."</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><p>Nadie nos asegura que cuando se llame al método Diagnóstico no se pase un null como parámetro. Si eso sucediese la instrucción <strong><code>p.GetNombre()</code></strong> generaría la excepción del sistema <strong><code>NullReferenceException</code></strong> finalizando el programa. Es más el compilador nos generará un aviso y deberíamos poner cosas como <strong><code>p?.GetNombre() ?? "Sin Nombre"</code></strong><br>
Este es uno de los errores más típicos en muchos lenguajes y nosotros lo filtramos generando una excepción de <strong><code>ArgumentNullException</code></strong> que podremos gestionar de una manera más específica.</p>
<blockquote>
<p>✋ <strong>Importante:</strong> Fíjate, que al lanzar la excepción realmente lo que hacemos es crear una referencia objeto en memoria con <strong><code>new ArgumentNullException("paciente");</code></strong>. Este objeto contendrá información sobre el error y una referencia al mismo será pasada al punto donde controlemos el error.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<h5 id="captura-y-control-de-excepciones">Captura y control de excepciones </h5>
<p>En la gran mayoría de lenguajes orientados a objetos se realiza con las palabras reservadas <strong><a href="https://docs.microsoft.com/es-es/dotnet/csharp/language-reference/keywords/try-catch">try y catch</a></strong>.</p>
<p>Una sintaxis básica de este tipo de estructura podría ser...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-try">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Código del que quiero controlar errores.</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">TipoDeLaExcepci</span>ó<span class="token class-name">nACapturar</span> e<span class="token punctuation">)</span> <span class="token keyword keyword-when">when</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>expresión con e<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Tratamiento del error o excepción del tipo TipoDeLaExcepciónACapturar</span>
<span class="token punctuation">}</span>
</code></pre><p>Donde <strong><code>catch</code></strong> es un punto de control de errores, en el cual el identificador <strong><code>e</code></strong> será opcional y lo definiremos solo si lo vamos a usar dentro del bloque o en una condición <strong><code>when</code></strong>.<br>
La cláusula <strong><code>when</code></strong> será <strong>opcional</strong>.</p>
<blockquote>
<p>✋ <strong>Importante:</strong> No podremos, poner ningún bloque <strong><code>catch</code></strong> que no esté asociado a uno <strong><code>try</code></strong></p>
</blockquote>
<p>Veamos un ejemplo de sintáxis muy <strong>simple</strong> para ver cómo funcionan. Supongamos el siguiente código...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce un número real: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textoNumero <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword keyword-double">double</span></span> n <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>textoNumero<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Tu número es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">n</span><span class="token format-string"><span class="token punctuation">:</span>G</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Si lo ejecutamos e introducimos <strong><code>25</code></strong> obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>Introduce un número real: <span class="token number">25</span>
Tu número es <span class="token number">25</span>
</code></pre><p>Pero si introducimos <strong><code>veinticinco</code></strong> obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>Introduce un número real: veinticinco
Unhandled exception. System.FormatException: Input string was not <span class="token keyword keyword-in">in</span> a correct format.
   at System.Number.ThrowOverflowOrFormatException<span class="token punctuation">(</span>ParsingStatus status, TypeCode <span class="token builtin class-name">type</span><span class="token punctuation">)</span>
   at System.Double.Parse<span class="token punctuation">(</span>String s<span class="token punctuation">)</span>
   at EjemploExcepciones.EjemploExcepciones.Main<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-in">in</span> C:<span class="token punctuation">\</span>ejemplo<span class="token punctuation">\</span>Program.cs:line <span class="token number">15</span>
</code></pre><p>Si nos fijamos <strong><code>double.Parse(textoNumero);</code></strong> ha generado una excepción de tipo <strong><code>FormatException</code></strong> porque no ha podido pasar la cadena de entrada <strong><code>"veinticinco"</code></strong> a <strong><code>double</code></strong>.</p>
<blockquote>
<p>✋ <strong>Importante:</strong> Para saber que errores/excepciones puede generar una llamada a un método, además de ver el error que produce, como en el caso anterior, lo más normal es consultar la <strong><a href="https://docs.microsoft.com/es-es/dotnet/api/system.double.parse?view=net-5.0">documentación del método</a></strong>. En el apartado <strong>Excepciones</strong> nos lo indicará.<br>
También podemos hacer <strong><code>Ctrl + &lt;click izquierdo del ratón&gt;</code></strong> sobre el método y esto nos abrirá su definición y el la documentación del método podremos verlo.</p>
</blockquote>
<p>La excepción ha sido capturada por el Runtime de C#, nos la ha mostrado y ha finalizado la ejecución. A efectos prácticos, es cómo si hubiera un bloque <strong><code>try - catch</code></strong> que englobara todo nuestro código y que <em>'barriera'</em> o capturase cualquier error/excepción que se pudiera producir aunque nosotros no lo hagamos.</p>
<p>Veamos cómo sería el código siguiendo la sintaxis del <strong>try - catch</strong> para capturar la excepción <strong><code>FormatException</code></strong></p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Tendremos que definir la variable textoNumero fuera del bloque try </span>
    <span class="token comment">// si queremos que sea accesible desde el bloque catch.</span>
    <span class="token class-name"><span class="token keyword keyword-string">string</span></span> textoNumero <span class="token operator">=</span> <span class="token keyword keyword-default">default</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce un número real: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textoNumero <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> n <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>textoNumero<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Tu número es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">n</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Como no usamos e no lo declaramos.</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Lo siento, el valor '</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">textoNumero</span><span class="token punctuation">}</span></span><span class="token string">' no es Real."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Si lo ejecutamos e introducimos <strong>'veinticinco'</strong> ahora obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>Introduce un número real: veinticinco
Lo siento, el valor <span class="token string">'veinticinco'</span> no es Real.
</code></pre><p>También tendremos la opción de mostrar el mensaje de error que devuelven las BCL a través del <strong>objeto</strong> <strong><code>e</code></strong> que contiene la información de la excepción y que se creó al generarse la misma en el <strong><code>throw</code></strong>.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce un número real: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> n <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Tu número es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">n</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>        
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Mostrando el mensaje.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Si lo ejecutamos e introducimos <strong>'veinticinco'</strong> ahora obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>Introduce un número real: veinticinco
Input string was not <span class="token keyword keyword-in">in</span> a correct format.
</code></pre><blockquote>
<p>✋ <strong>Importante:</strong> Al especificar que capturamos solo la excepción <strong><code>FormatException</code></strong>, solo se entrará en este bloque catch si se produce la misma. Por tanto, cualquier otro error/excepción será capturado por el Runtime.</p>
</blockquote>
<h5 id="capturando-excepciones-diferentes">Capturando excepciones diferentes </h5>
<p>Si <strong><code>catch (FormatException e)</code></strong> solo captura las excepciones de formato de entrada incorrecto.</p>
<p><strong>¿Cómo haremos para controlar diferentes tipos errores/excepciones?</strong></p>
<p>Supongamos el siguiente <strong>ejemplo</strong> donde hemos creado un método <strong><code>Divide</code></strong> que genera una excepción <strong><code>DivideByZeroException</code></strong> al intentar dividir por cero. Pero si nos fijamos en el <strong><code>Main</code></strong> solo gestionamos <strong><code>FormatException</code></strong>.<br>
El programa principal nos pedirá 2 números e intentará dividirlos y si no puede finaliza.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">EjemploExcepciones</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> <span class="token function">Divide</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-double">double</span></span> numerador<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-double">double</span></span> divisor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>divisor <span class="token operator">&lt;</span> <span class="token number">1e-5</span><span class="token punctuation">)</span> 
            <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">DivideByZeroException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Lanzamos la excepción</span>
        <span class="token keyword keyword-return">return</span> numerador <span class="token operator">/</span> divisor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-try">try</span> <span class="token comment">// Abrimos bloque try</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce el numerador: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword keyword-double">double</span></span> numerador <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce el divisor: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword keyword-double">double</span></span> divisor <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"La división es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token function">Divide</span><span class="token punctuation">(</span>numerador<span class="token punctuation">,</span> divisor<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Has introducido un valor que no es un número real."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Al ejecutar el código e intentar dividir por cero obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: <span class="token number">0</span>
Unhandled exception. System.DivideByZeroException: Attempted to divide by zero.
   at EjemploExcepciones.EjemploExcepciones.Divide<span class="token punctuation">(</span>Double numerador, Double divisor<span class="token punctuation">)</span> <span class="token keyword keyword-in">in</span> C:<span class="token punctuation">\</span>ejemplo<span class="token punctuation">\</span>Program.cs:line <span class="token number">11</span>
   at EjemploExcepciones.EjemploExcepciones.Main<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-in">in</span> C:<span class="token punctuation">\</span>ejemplo<span class="token punctuation">\</span>Program.cs:line <span class="token number">23</span>
</code></pre><p>Si nos fijamos el programa finaliza porque la excepción es capturada por el catch del Runtime.</p>
<p>Para capturar también este error, lo que haremos es añadir <strong>dos bloques</strong> <strong><code>catch</code></strong> <strong>consecutivos</strong> para el mismo bloque <strong><code>try</code></strong>.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-try">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Has introducido un valor que no es un número real."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"No se puede dividir por cero."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Al ejecutar ahora con la misma entrada obtendremos...</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>Ejecución 1: 
    Introduce el numerador: 4
    Introduce el divisor: 0
    No se puede dividir por cero.

Ejecución 2: 
    Introduce el numerador: 4
    Introduce el divisor: cero
    Has introducido un valor que no es un número real.

Ejecución 3: 
    Introduce el numerador: 4
    Introduce el divisor: 2
    La división es 2
</code></pre><p>Fíjate que ahora capturamos '<em>nosotros</em>' los 2 errores.</p>
<blockquote>
<p>✋ <strong>Importante</strong>: Si el <strong>tipo</strong> del primer bloque <strong><code>catch</code></strong> es una <strong>superclase</strong> del tipo del segundo. <strong>El segundo bloque catch nunca se ejecutará</strong> y además nos avisará con un <strong>error de compilación</strong>.</p>
</blockquote>
<p>Por ejemplo el siguiente código ...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-try">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token comment">// Está cláusula catch nos producirá un error</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Hay un error."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Has introducido un valor que no es un número real."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"No se puede dividir por cero."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Generará el siguiente error ....</p>
<blockquote>
<p>❌ <strong>"Una cláusula catch previa ya detecta todas las excepciones de este tipo o de tipo superior ('Exception')"</strong></p>
</blockquote>
<p>ya que todas las excepciones heredan de <strong><code>Exception</code></strong> y por tanto <strong><code>FormatException</code></strong> y <strong><code>DivideByZeroException</code></strong> lo hacen. Lo cual implicaría que es un código inalcanzable, porque cualquier error entraría primero por el primer <strong><code>catch</code></strong>.</p>
<blockquote>
<p>✋ <strong>Importante:</strong> De lo anterior se deduce que siempre podremos los <strong><code>catch</code></strong> excepciones más concretas primero y a continuación las excepciones más generales.</p>
</blockquote>
<p>Si añadimos un único bloque <strong><code>catch (Exception e)</code></strong> en el Main controlaríamos cualquier error/excepción que se produjese y seguiríamos con nuestro bucle infinito.</p>
<blockquote>
<p>⚠️ <strong>Aviso:</strong> Microsoft no nos recomienda hacerlo** fuera del <strong><code>Main</code></strong>, indicándonos en su <a href="https://docs.microsoft.com/es-es/dotnet/standard/design-guidelines/using-standard-exception-types#exception-and-systemexception">documentación</a> que no es una buena práctica.</p>
</blockquote>
<p>Por tanto, si probamos el siguiente código....</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce el numerador: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> numerador <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce el divisor: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> divisor <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"La división es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token function">Divide</span><span class="token punctuation">(</span>numerador<span class="token punctuation">,</span> divisor<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>Ejecución 1:
    Introduce el numerador: 4
    Introduce el divisor: 0
    Attempted to divide by zero.

Ejecución 2:
    Introduce el numerador: 4
    Introduce el divisor: cero
    Input string was not in a correct format.

Ejecución 3:
    Introduce el numerador: 4
    Introduce el divisor: 2
    La división es 2
</code></pre><div class="contenedor">
    <div class="fondo">
        <div class="abre_comilla">"</div>
        <div class="cierra_comilla">"</div>
        <div class="cita">If you're good at the debugger it means you spent a lot of time debugging. I don't want you to be good at the debugger.</div>
        <div class="autor">- Robert C. Martin.</div>
    </div>
</div>
<div style="page-break-after:always;"></div>
<h4 id="liberando-recursos-con-finally">Liberando recursos con finally </h4>
<p>En ocasiones se pueden dar casos en los que queramos, <strong>independientemente de si ha producido un error o no</strong>, hacer algo siempre después de un bloque de instrucciones. Por ejemplo:</p>
<ul>
<li>Liberar un recurso de memoria asociado a un fichero cómo una imágen o una fuente.</li>
<li>Cerrar una conexión remota o a una base de datos, un fichero abierto por el sistema, etc.</li>
<li>Parar algún proceso en paralelo iniciado.</li>
</ul>
<p>Para eso tendremos un bloque <strong><code>finally</code></strong>...</p>
<ul>
<li>
<p>El bloque <strong><code>finally</code></strong> es <strong>opcional</strong> y debe estar <strong>asociado a un bloque <code>try</code></strong>.</p>
</li>
<li>
<p>Libera o cierra los recursos usados dentro del un bloque <strong><code>try</code></strong> al que está asociado.</p>
</li>
<li>
<p>El bloque <strong><code>finally</code></strong> <strong>se ejecutará siempre</strong>, tanto si ha ido bien el bloque try, como si ha entrado por alguno de los bloques <strong><code>catch</code></strong>.</p>
</li>
<li>
<p>Se <strong>ejecutará en último lugar</strong> respecto a sus bloques try-catch asociados en su ámbito, esto es, después del <strong><code>try</code></strong> si todo ha ido bien o después del <strong><code>catch</code></strong> correspondiente.</p>
<blockquote>
<p>✋ <strong>Importante</strong>: Se puede tener un bloque <strong><code>try</code></strong> seguido de un <strong><code>finally</code></strong> (sin bloques catch), y realizar la captura de la excepción en un catch de ámbito más externo o incluso por el Runtime. En este caso, el finally se ejecutará siempre y antes que el catch del ámbito superior.</p>
</blockquote>
<p>Veámoslo en un simples ejemplos de código esquematizado.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>    <span class="token comment">// Si correcto: BT -&gt; BF               // Si correcto: BT1 -&gt; BT2 -&gt; BF2       </span>
    <span class="token comment">// Si error:    BT -&gt; BC -&gt; BF         // Si error:    BT1 -&gt; BT2 -&gt; BF2 -&gt; BC1</span>
    <span class="token keyword keyword-try">try</span>                                    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation">{</span>                                      <span class="token punctuation">{</span>
        <span class="token comment">// BT                                  // BT1</span>
    <span class="token punctuation">}</span>                                          <span class="token keyword keyword-try">try</span>
    <span class="token keyword keyword-catch">catch</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>                                 <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>                                              <span class="token comment">// BT2</span>
        <span class="token comment">// BC                                  }</span>
    <span class="token punctuation">}</span>                                          <span class="token keyword keyword-finally">finally</span>
    <span class="token keyword keyword-finally">finally</span>                                    <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>                                              <span class="token comment">// BF2</span>
        <span class="token comment">// BF                                  }</span>
    <span class="token punctuation">}</span>                                      <span class="token punctuation">}</span>
                                           <span class="token keyword keyword-catch">catch</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
                                           <span class="token punctuation">{</span>
                                               <span class="token comment">// BC1</span>
                                           <span class="token punctuation">}</span>                                    
</code></pre></li>
</ul>
<div style="page-break-after:always;"></div>
<h5 id="ejemplo-práctico-de-uso-de-finally">Ejemplo práctico de uso de finally </h5>
<p>Vemos un ejemplo típico de úso de <strong><code>finally</code></strong> que se nos va a dar en en el futuro.</p>
<blockquote>
<p>📌 <strong>Nota:</strong> Cómo aún no hemos visto E/S con ficheros, lee los comentarios para entender que estamos haciendo en cada bloque y el porqué de cada uno. Este ejemplo <strong>solo pretende aplicar un esquema práctico de uso real de try - catch - finally</strong> y no abordar la lectura de ficheros en este punto del curso.</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">LeeFichero</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-int">int</span></span> posicion<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-char">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> buffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-char">char</span></span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">StreamReader<span class="token punctuation">?</span></span> streamReader <span class="token operator">=</span> <span class="token keyword keyword-default">default</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword keyword-string">string</span></span> ruta <span class="token operator">=</span> <span class="token string">@"c:\test.txt"</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-try">try</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Intentamos abrir un fichero</span>
        streamReader <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span>ruta<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Si llegamos aquí le hemos dicho al SO que ocupamos un recurso </span>
        <span class="token comment">// (En nuestro caso un fichero) y por tanto deberemos liberarlo </span>
        <span class="token comment">// en el bloque finally, tanto si todo va bien como sino.</span>

        <span class="token comment">// Intentamos leer el fichero (podemos obtener una excepción de lectura)</span>
        streamReader<span class="token punctuation">.</span><span class="token function">ReadBlock</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> posicion<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span><span class="token punctuation">)</span>  <span class="token comment">// Capturamos el error de que el fichero no existe.</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"El fichero </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ruta</span><span class="token punctuation">}</span></span><span class="token string"> no existe."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token comment">// Capturamos un error de lectura devuelto por el dispositivo.</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Error leyendo de </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ruta</span><span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">e<span class="token punctuation">.</span>Message</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-finally">finally</span> <span class="token comment">// ESTE BLOQUE SE EJECUTARÁ SIEMPRE</span>
    <span class="token punctuation">{</span>        
        <span class="token comment">// En el caso de que el fichero no exista, llegaremos aquí desde el</span>
        <span class="token comment">// catch (FileNotFoundException). Por tanto, la referencia streamReader será null </span>
        <span class="token comment">// y no deberemos liberar el recurso con Close().</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>streamReader <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
            <span class="token comment">// En el caso de que el fichero exista, llegaremos aquí:</span>
            <span class="token comment">//  1. Después de haber leído correctamente el fichero.</span>
            <span class="token comment">//  2. Tras una excepción de lectura capturada en el catch (IOException e) y en</span>
            <span class="token comment">// ambos casos deberemos liberar el recurso (el fichero) indicándoselo al SO.</span>
            streamReader<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div style="page-break-after:always;"></div>
<h4 id="creando-nuestras-propias-excepciones">Creando nuestras propias excepciones </h4>
<p>En ocasiones nos interesará crear nuestras propias excepciones para <strong>capturar errores de tipos de excepciones específicos</strong> en nuestras clases, a la hora de pasar test por ejemplo.</p>
<p>En este caso las definiremos el tipo de la excepción nosotros y heredando de una excepción ya creada si queremos concertarla más o de la clase base para excepciones <strong><code>System.Exception</code></strong>.</p>
<h5 id="ejemplo-de-creación-de-una-excepción-propia">Ejemplo de creación de una excepción propia </h5>
<p>El convenio en C# es acabar el nombre del tipo de nuestra excepción con el sufijo <em><code>Exception</code></em> y en este ejemplo lo hemos hecho.</p>
<pre data-role="codeBlock" data-info="cshar" class="language-cshar cshar"><code>class DepartamentoException : Exception
{
    public DepartamentoException(string message) : base (message) {}
}
</code></pre><ul>
<li>En el código de arriba hemos creado una excepción <strong><code>ExcepcionDepartamento</code></strong> que usaré para saber cuando no he controlado algo en los departamentos de mi compañía.</li>
<li>Ahora supongamos un método para imprimir nóminas de un departamento, donde no hemos contemplado uno de reciente creación como en el siguiente código.</li>
</ul>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">ImprimeNominas</span><span class="token punctuation">(</span><span class="token class-name">Departamentos</span> departamento<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-string">string</span></span> datosNominas <span class="token operator">=</span> departamento <span class="token keyword keyword-switch">switch</span>
    <span class="token punctuation">{</span>
        Departamentos<span class="token punctuation">.</span>Contable <span class="token operator">=&gt;</span> <span class="token string">"Datos nóminas contabilidad."</span><span class="token punctuation">,</span>
        Departamentos<span class="token punctuation">.</span>Desarrollo <span class="token operator">=&gt;</span> <span class="token string">"Datos nóminas Desarrollo."</span><span class="token punctuation">,</span>
        <span class="token comment">// En el default lanzamos muestra propia excepción. </span>
        _ <span class="token operator">=&gt;</span> <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">DepartamentoException</span><span class="token punctuation">(</span>
                    <span class="token interpolation-string"><span class="token string">$"No se pueden imprimir nóminas de este departamento de </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">departamento</span><span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>datosNominas<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Otra posibilidad es crear excepciones personalizadas para una clase, podría ser definir la excepción de forma anidada dentro de la clase.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Departamento</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">NominaGestionadaException</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Exception</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-public">public</span> <span class="token function">NominaGestionadaException</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> message<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword keyword-base">base</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-enum">enum</span> <span class="token class-name">Departamentos</span> <span class="token punctuation">{</span> Contable<span class="token punctuation">,</span> Desarrollo<span class="token punctuation">,</span> Marketing <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">ImprimeNominas</span><span class="token punctuation">(</span><span class="token class-name">Departamentos</span> departamento<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-string">string</span></span> datosNominas <span class="token operator">=</span> departamento <span class="token keyword keyword-switch">switch</span>
        <span class="token punctuation">{</span>
            Departamentos<span class="token punctuation">.</span>Contable <span class="token operator">=&gt;</span> <span class="token string">"Imprimiendo nóminas contabilidad."</span><span class="token punctuation">,</span>
            Departamentos<span class="token punctuation">.</span>Desarrollo <span class="token operator">=&gt;</span> <span class="token string">"Imprimiendo nóminas Desarrollo."</span><span class="token punctuation">,</span>
            <span class="token comment">// El tipo de la excepción es más especifico</span>
            <span class="token comment">// y su definición está dentro de departamento.</span>
            _ <span class="token operator">=&gt;</span> <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Departamento<span class="token punctuation">.</span>NominaGestionadaException</span><span class="token punctuation">(</span>
                        <span class="token interpolation-string"><span class="token string">$"No se pueden imprimir nóminas de este departamento de </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">departamento</span><span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>datosNominas<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Fíjate que al estar anidada en el tipo <strong><code>Departamento.NoGestionadoException</code></strong> queda claro que es una excepción relacionada con la clase <strong><code>Departamento</code></strong>.</p>
<h4 id="encadenamiento-de-excepciones-avanzado">Encadenamiento de excepciones (Avanzado) </h4>
<p>En ocasiones, puedo tener la necesidad de crear un bloque <strong><code>catch</code></strong> para capturar una excepción en un ámbito, añadir un <strong>mensaje específico para ese ámbito</strong> y posteriormente <strong>relanzarla</strong> para ser capturada en otro ámbito superior. Además, este proceso se puede repetir de forma sucesiva.</p>
<p>La mayoría de constructores de excepciones de las BCL, admiten una sobrecarga con el parámetro <strong>Exception <a href="https://docs.microsoft.com/es-es/dotnet/api/system.exception.innerexception?view=net-5.0">innerException</a></strong>. (a NULL por defecto).</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-try">try</span> 
<span class="token punctuation">{</span>
    <span class="token comment">// Ámbito del try</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExcepcionTipoA</span> e<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token comment">// En este punto de control de excepciones capturamos la excepción</span>
    <span class="token comment">// del tipo ExcepcionTipoA y añadimos un mensaje específico de lo</span>
    <span class="token comment">// que estamos haciendo en el ámbito del try y la relanzamos a un</span>
    <span class="token comment">// catch en un ámbito superior donde puede haber otro punto</span>
    <span class="token comment">// de control o de recuperación de excepciones.</span>
    <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">ExcepcionTipoA</span><span class="token punctuation">(</span><span class="token string">"mensaje específico en ámbito del try"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>Fíjate que en al hacer <strong><code>throw new ExcepcionTipoA("mensaje específico en ámbito del try", e);</code></strong> estamos creando otro objeto <strong><code>ExcepcionTipoA</code></strong> al que le pasamos una referencia al objeto <strong><code>ExcepcionTipoA e</code></strong>, donde nos llegaba la información del error.</p>
<p>Esto me permitirá recorrer todos los objetos excepción encadenados en el orden que se han ido relanzando y así acceder a mensajes específicos en cada ámbito.</p>
<h5 id="caso-de-uso-de-encadenamiento-de-excepciones">Caso de uso de encadenamiento de excepciones </h5>
<p>Veamos un caso de uso de encadenamiento de excepciones a través del siguiente esquema, donde desde el Main se iría llamando a métodos de diferentes objetos para realizar una tarea. Tenemos un <strong><code>Método_D</code></strong> que es usado en <strong>dos ramas diferentes de la pila de llamadas</strong> y que puede generar la excepción/error <strong><code>E</code></strong></p>
<p></p><p align="center" style="zoom:0.7" class="dot"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 9.0.0 (20230911.1827)
 -->
<!-- Title: G Pages: 1 -->
<svg width="840pt" height="725pt" viewBox="0.00 0.00 840.00 725.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 721.2)">
<title>G</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-721.2 836,-721.2 836,4 -4,4"></polygon>
<!-- n0 -->
<g id="node1" class="node">
<title>n0</title>
<polygon fill="snow" stroke="gray" points="360.87,-713.2 251.13,-713.2 251.13,-617.2 360.87,-617.2 360.87,-713.2"></polygon>
<polygon fill="none" stroke="gray" points="364.87,-717.2 247.13,-717.2 247.13,-613.2 364.87,-613.2 364.87,-717.2"></polygon>
<text text-anchor="middle" x="306" y="-686.2" font-family="Arial" font-size="14.00" fill="red">Main</text>
<text text-anchor="middle" x="306" y="-669.4" font-family="Arial" font-size="14.00" fill="red">Punto de</text>
<text text-anchor="middle" x="306" y="-652.6" font-family="Arial" font-size="14.00" fill="red">recuperación</text>
<text text-anchor="middle" x="306" y="-635.8" font-family="Arial" font-size="14.00" fill="red">catch E</text>
</g>
<!-- n1 -->
<g id="node2" class="node">
<title>n1</title>
<polygon fill="whitesmoke" stroke="gray" points="214,-561.8 160,-561.8 160,-525.8 214,-525.8 214,-561.8"></polygon>
</g>
<!-- n0&#45;&gt;n1 -->
<g id="edge1" class="edge">
<title>n0-&gt;n1</title>
<path fill="none" stroke="lightgray" d="M254.84,-612.87C238.68,-596.66 221.69,-579.61 208.75,-566.62"></path>
<polygon fill="lightgray" stroke="lightgray" points="210.01,-565.41 205.24,-563.11 207.54,-567.88 210.01,-565.41"></polygon>
</g>
<!-- n2 -->
<g id="node3" class="node">
<title>n2</title>
<polygon fill="whitesmoke" stroke="gray" points="286,-561.8 232,-561.8 232,-525.8 286,-525.8 286,-561.8"></polygon>
</g>
<!-- n0&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n0-&gt;n2</title>
<path fill="none" stroke="gray" stroke-width="2" d="M285.8,-612.87C279.64,-597.23 273.17,-580.8 268.13,-568.01"></path>
<polygon fill="gray" stroke="gray" stroke-width="2" points="270.35,-568.86 266.89,-564.85 267.1,-570.14 270.35,-568.86"></polygon>
</g>
<!-- n3 -->
<g id="node4" class="node">
<title>n3</title>
<polygon fill="whitesmoke" stroke="gray" points="495,-561.8 441,-561.8 441,-525.8 495,-525.8 495,-561.8"></polygon>
</g>
<!-- n0&#45;&gt;n3 -->
<g id="edge3" class="edge">
<title>n0-&gt;n3</title>
<path fill="none" stroke="lightgray" d="M365.3,-619.65C368.24,-617.46 371.15,-615.3 374,-613.2 395.66,-597.2 420.29,-579.29 438.89,-565.81"></path>
<polygon fill="lightgray" stroke="lightgray" points="439.73,-567.37 442.75,-563.02 437.67,-564.54 439.73,-567.37"></polygon>
</g>
<!-- n21 -->
<g id="node8" class="node">
<title>n21</title>
<polygon fill="whitesmoke" stroke="gray" points="126,-444.4 72,-444.4 72,-408.4 126,-408.4 126,-444.4"></polygon>
</g>
<!-- n2&#45;&gt;n21 -->
<g id="edge4" class="edge">
<title>n2-&gt;n21</title>
<path fill="none" stroke="lightgray" d="M239.93,-525.41C234.57,-520.72 228.65,-515.75 223,-511.4 193,-488.29 157,-464.29 131.54,-447.89"></path>
<polygon fill="lightgray" stroke="lightgray" points="132.7,-446.55 127.54,-445.33 130.81,-449.5 132.7,-446.55"></polygon>
</g>
<!-- n22 -->
<g id="node9" class="node">
<title>n22</title>
<polygon fill="snow" stroke="gray" points="377.2,-474.4 234.8,-474.4 234.8,-378.4 377.2,-378.4 377.2,-474.4"></polygon>
<text text-anchor="middle" x="306" y="-447.4" font-family="Arial" font-size="14.00" fill="red">Método_A</text>
<text text-anchor="middle" x="306" y="-430.6" font-family="Arial" font-size="14.00" fill="red">Punto de</text>
<text text-anchor="middle" x="306" y="-413.8" font-family="Arial" font-size="14.00" fill="red">control</text>
<text text-anchor="middle" x="306" y="-397" font-family="Arial" font-size="14.00" fill="red">catch E → thorw E</text>
</g>
<!-- n2&#45;&gt;n22 -->
<g id="edge5" class="edge">
<title>n2-&gt;n22</title>
<path fill="none" stroke="gray" stroke-width="2" d="M265.94,-525.77C270.82,-513.77 277.66,-496.98 284.3,-480.67"></path>
<polygon fill="gray" stroke="gray" stroke-width="2" points="285.33,-482.79 285.6,-477.5 282.09,-481.47 285.33,-482.79"></polygon>
</g>
<!-- n31 -->
<g id="node5" class="node">
<title>n31</title>
<polygon fill="whitesmoke" stroke="gray" points="466,-444.4 412,-444.4 412,-408.4 466,-408.4 466,-444.4"></polygon>
</g>
<!-- n3&#45;&gt;n31 -->
<g id="edge6" class="edge">
<title>n3-&gt;n31</title>
<path fill="none" stroke="lightgray" d="M463.72,-525.77C458.76,-506.03 450.55,-473.36 444.96,-451.13"></path>
<polygon fill="lightgray" stroke="lightgray" points="446.68,-450.77 443.76,-446.34 443.28,-451.62 446.68,-450.77"></polygon>
</g>
<!-- n32 -->
<g id="node6" class="node">
<title>n32</title>
<polygon fill="whitesmoke" stroke="gray" points="538,-444.4 484,-444.4 484,-408.4 538,-408.4 538,-444.4"></polygon>
</g>
<!-- n3&#45;&gt;n32 -->
<g id="edge7" class="edge">
<title>n3-&gt;n32</title>
<path fill="none" stroke="lightgray" d="M474.34,-525.77C481.73,-505.94 493.98,-473.08 502.26,-450.84"></path>
<polygon fill="lightgray" stroke="lightgray" points="503.85,-451.59 503.96,-446.29 500.57,-450.37 503.85,-451.59"></polygon>
</g>
<!-- n33 -->
<g id="node7" class="node">
<title>n33</title>
<polygon fill="whitesmoke" stroke="gray" points="611,-444.4 557,-444.4 557,-408.4 611,-408.4 611,-444.4"></polygon>
</g>
<!-- n3&#45;&gt;n33 -->
<g id="edge8" class="edge">
<title>n3-&gt;n33</title>
<path fill="none" stroke="lightgray" d="M490.12,-525.55C506.54,-512.31 529.09,-493.17 547,-474.4 554.36,-466.69 561.77,-457.6 568.01,-449.48"></path>
<polygon fill="lightgray" stroke="lightgray" points="569.19,-450.82 570.81,-445.78 566.4,-448.71 569.19,-450.82"></polygon>
</g>
<!-- n331 -->
<g id="node15" class="node">
<title>n331</title>
<polygon fill="whitesmoke" stroke="gray" points="724,-341.4 670,-341.4 670,-305.4 724,-305.4 724,-341.4"></polygon>
</g>
<!-- n33&#45;&gt;n331 -->
<g id="edge14" class="edge">
<title>n33-&gt;n331</title>
<path fill="none" stroke="lightgray" d="M603.43,-408.04C622.59,-390.91 651.93,-364.68 672.64,-346.17"></path>
<polygon fill="lightgray" stroke="lightgray" points="673.76,-347.52 676.32,-342.88 671.43,-344.91 673.76,-347.52"></polygon>
</g>
<!-- n332 -->
<g id="node16" class="node">
<title>n332</title>
<polygon fill="whitesmoke" stroke="gray" points="611,-341.4 557,-341.4 557,-305.4 611,-305.4 611,-341.4"></polygon>
</g>
<!-- n33&#45;&gt;n332 -->
<g id="edge15" class="edge">
<title>n33-&gt;n332</title>
<path fill="none" stroke="lightgray" d="M584,-408.27C584,-391.73 584,-366.54 584,-348.08"></path>
<polygon fill="lightgray" stroke="lightgray" points="585.75,-348.13 584,-343.13 582.25,-348.13 585.75,-348.13"></polygon>
</g>
<!-- n211 -->
<g id="node10" class="node">
<title>n211</title>
<polygon fill="whitesmoke" stroke="gray" points="126,-341.4 72,-341.4 72,-305.4 126,-305.4 126,-341.4"></polygon>
</g>
<!-- n21&#45;&gt;n211 -->
<g id="edge9" class="edge">
<title>n21-&gt;n211</title>
<path fill="none" stroke="lightgray" d="M99,-408.27C99,-391.73 99,-366.54 99,-348.08"></path>
<polygon fill="lightgray" stroke="lightgray" points="100.75,-348.13 99,-343.13 97.25,-348.13 100.75,-348.13"></polygon>
</g>
<!-- n212 -->
<g id="node11" class="node">
<title>n212</title>
<polygon fill="whitesmoke" stroke="gray" points="54,-341.4 0,-341.4 0,-305.4 54,-305.4 54,-341.4"></polygon>
</g>
<!-- n21&#45;&gt;n212 -->
<g id="edge10" class="edge">
<title>n21-&gt;n212</title>
<path fill="none" stroke="lightgray" d="M86.79,-408.27C74.68,-391.29 56.09,-365.21 42.85,-346.64"></path>
<polygon fill="lightgray" stroke="lightgray" points="44.48,-345.91 40.15,-342.85 41.63,-347.94 44.48,-345.91"></polygon>
</g>
<!-- n22&#45;&gt;n0 -->
<g id="edge30" class="edge">
<title>n22-&gt;n0</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M306,-474.66C306,-511.02 306,-561.61 306,-601.38"></path>
<polygon fill="red" stroke="red" points="302.5,-601.3 306,-611.3 309.5,-601.3 302.5,-601.3"></polygon>
<text text-anchor="middle" x="343.52" y="-560" font-family="Arial" font-size="18.00" fill="red">E(a+b+d)</text>
<text text-anchor="middle" x="343.52" y="-538.4" font-family="Arial" font-size="18.00" fill="red">o</text>
<text text-anchor="start" x="306" y="-516.8" font-family="Arial" font-size="18.00" fill="red">E(a+c+d)</text>
</g>
<!-- n221 -->
<g id="node12" class="node">
<title>n221</title>
<polygon fill="whitesmoke" stroke="gray" points="270,-341.4 216,-341.4 216,-305.4 270,-305.4 270,-341.4"></polygon>
</g>
<!-- n22&#45;&gt;n221 -->
<g id="edge11" class="edge">
<title>n22-&gt;n221</title>
<path fill="none" stroke="#63b8ff" stroke-width="2" d="M276.53,-378.15C269.85,-367.44 263.04,-356.53 257.32,-347.36"></path>
<polygon fill="#63b8ff" stroke="#63b8ff" stroke-width="2" points="259.65,-347.78 255.52,-344.47 256.68,-349.63 259.65,-347.78"></polygon>
</g>
<!-- n222 -->
<g id="node13" class="node">
<title>n222</title>
<polygon fill="whitesmoke" stroke="gray" points="534,-341.4 480,-341.4 480,-305.4 534,-305.4 534,-341.4"></polygon>
</g>
<!-- n22&#45;&gt;n222 -->
<g id="edge12" class="edge">
<title>n22-&gt;n222</title>
<path fill="none" stroke="#36648b" stroke-width="2" d="M377.43,-389.51C410.37,-372.95 447.87,-354.11 474.02,-340.97"></path>
<polygon fill="#36648b" stroke="#36648b" stroke-width="2" points="473.37,-343.26 477.05,-339.45 471.79,-340.13 473.37,-343.26"></polygon>
</g>
<!-- n223 -->
<g id="node14" class="node">
<title>n223</title>
<polygon fill="whitesmoke" stroke="gray" points="198,-341.4 144,-341.4 144,-305.4 198,-305.4 198,-341.4"></polygon>
</g>
<!-- n22&#45;&gt;n223 -->
<g id="edge13" class="edge">
<title>n22-&gt;n223</title>
<path fill="none" stroke="lightgray" d="M242.85,-378.15C227.58,-366.73 212.02,-355.09 199.3,-345.57"></path>
<polygon fill="lightgray" stroke="lightgray" points="200.65,-344.4 195.6,-342.8 198.55,-347.2 200.65,-344.4"></polygon>
</g>
<!-- n2211 -->
<g id="node17" class="node">
<title>n2211</title>
<polygon fill="snow" stroke="gray" points="312.2,-268.4 169.8,-268.4 169.8,-172.4 312.2,-172.4 312.2,-268.4"></polygon>
<text text-anchor="middle" x="241" y="-241.4" font-family="Arial" font-size="14.00" fill="red">Método_B</text>
<text text-anchor="middle" x="241" y="-224.6" font-family="Arial" font-size="14.00" fill="red">Punto de</text>
<text text-anchor="middle" x="241" y="-207.8" font-family="Arial" font-size="14.00" fill="red">control</text>
<text text-anchor="middle" x="241" y="-191" font-family="Arial" font-size="14.00" fill="red">catch E → thorw E</text>
</g>
<!-- n221&#45;&gt;n2211 -->
<g id="edge16" class="edge">
<title>n221-&gt;n2211</title>
<path fill="none" stroke="#63b8ff" stroke-width="2" d="M242.66,-305.27C242.49,-296.8 242.28,-286.06 242.06,-275.13"></path>
<polygon fill="#63b8ff" stroke="#63b8ff" stroke-width="2" points="243.84,-276.67 242,-271.71 240.35,-276.74 243.84,-276.67"></polygon>
</g>
<!-- n2212 -->
<g id="node18" class="node">
<title>n2212</title>
<polygon fill="whitesmoke" stroke="gray" points="152,-238.4 98,-238.4 98,-202.4 152,-202.4 152,-238.4"></polygon>
</g>
<!-- n221&#45;&gt;n2212 -->
<g id="edge17" class="edge">
<title>n221-&gt;n2212</title>
<path fill="none" stroke="lightgray" d="M215.51,-307.46C198.75,-297.61 177.47,-283.73 161,-268.4 153.15,-261.09 145.72,-251.93 139.67,-243.65"></path>
<polygon fill="lightgray" stroke="lightgray" points="141.3,-242.91 136.97,-239.86 138.45,-244.94 141.3,-242.91"></polygon>
</g>
<!-- n2221 -->
<g id="node19" class="node">
<title>n2221</title>
<polygon fill="whitesmoke" stroke="gray" points="544,-238.4 490,-238.4 490,-202.4 544,-202.4 544,-238.4"></polygon>
</g>
<!-- n222&#45;&gt;n2221 -->
<g id="edge18" class="edge">
<title>n222-&gt;n2221</title>
<path fill="none" stroke="lightgray" d="M508.7,-305.27C510.33,-288.73 512.83,-263.54 514.66,-245.08"></path>
<polygon fill="lightgray" stroke="lightgray" points="516.39,-245.27 515.15,-240.12 512.91,-244.93 516.39,-245.27"></polygon>
</g>
<!-- n2222 -->
<g id="node20" class="node">
<title>n2222</title>
<polygon fill="whitesmoke" stroke="gray" points="616,-238.4 562,-238.4 562,-202.4 616,-202.4 616,-238.4"></polygon>
</g>
<!-- n222&#45;&gt;n2222 -->
<g id="edge19" class="edge">
<title>n222-&gt;n2222</title>
<path fill="none" stroke="lightgray" d="M522.15,-305.08C531.23,-294.58 542.94,-280.85 553,-268.4 559.53,-260.32 566.51,-251.3 572.57,-243.34"></path>
<polygon fill="lightgray" stroke="lightgray" points="573.67,-244.78 575.3,-239.74 570.88,-242.67 573.67,-244.78"></polygon>
</g>
<!-- n2223 -->
<g id="node21" class="node">
<title>n2223</title>
<polygon fill="snow" stroke="gray" points="472.2,-268.4 329.8,-268.4 329.8,-172.4 472.2,-172.4 472.2,-268.4"></polygon>
<text text-anchor="middle" x="401" y="-241.4" font-family="Arial" font-size="14.00" fill="red">Método_C</text>
<text text-anchor="middle" x="401" y="-224.6" font-family="Arial" font-size="14.00" fill="red">Punto de</text>
<text text-anchor="middle" x="401" y="-207.8" font-family="Arial" font-size="14.00" fill="red">control</text>
<text text-anchor="middle" x="401" y="-191" font-family="Arial" font-size="14.00" fill="red">catch E → thorw E</text>
</g>
<!-- n222&#45;&gt;n2223 -->
<g id="edge20" class="edge">
<title>n222-&gt;n2223</title>
<path fill="none" stroke="#36648b" stroke-width="2" d="M489.02,-305.27C479.55,-296.24 467.38,-284.65 455.13,-272.98"></path>
<polygon fill="#36648b" stroke="#36648b" stroke-width="2" points="457.64,-272.95 452.81,-270.77 455.22,-275.48 457.64,-272.95"></polygon>
</g>
<!-- n3311 -->
<g id="node23" class="node">
<title>n3311</title>
<polygon fill="whitesmoke" stroke="gray" points="832,-238.4 778,-238.4 778,-202.4 832,-202.4 832,-238.4"></polygon>
</g>
<!-- n331&#45;&gt;n3311 -->
<g id="edge21" class="edge">
<title>n331-&gt;n3311</title>
<path fill="none" stroke="lightgray" d="M723.7,-305.01C737.91,-295.13 755.23,-282.03 769,-268.4 776.5,-260.97 783.78,-251.94 789.8,-243.79"></path>
<polygon fill="lightgray" stroke="lightgray" points="790.98,-245.15 792.49,-240.08 788.14,-243.1 790.98,-245.15"></polygon>
</g>
<!-- n3312 -->
<g id="node24" class="node">
<title>n3312</title>
<polygon fill="whitesmoke" stroke="gray" points="688,-238.4 634,-238.4 634,-202.4 688,-202.4 688,-238.4"></polygon>
</g>
<!-- n331&#45;&gt;n3312 -->
<g id="edge22" class="edge">
<title>n331-&gt;n3312</title>
<path fill="none" stroke="lightgray" d="M690.89,-305.27C684.95,-288.58 675.86,-263.1 669.27,-244.6"></path>
<polygon fill="lightgray" stroke="lightgray" points="670.97,-244.17 667.65,-240.04 667.68,-245.34 670.97,-244.17"></polygon>
</g>
<!-- n3313 -->
<g id="node25" class="node">
<title>n3313</title>
<polygon fill="whitesmoke" stroke="gray" points="760,-238.4 706,-238.4 706,-202.4 760,-202.4 760,-238.4"></polygon>
</g>
<!-- n331&#45;&gt;n3313 -->
<g id="edge23" class="edge">
<title>n331-&gt;n3313</title>
<path fill="none" stroke="lightgray" d="M703.11,-305.27C709.05,-288.58 718.14,-263.1 724.73,-244.6"></path>
<polygon fill="lightgray" stroke="lightgray" points="726.32,-245.34 726.35,-240.04 723.03,-244.17 726.32,-245.34"></polygon>
</g>
<!-- n2211&#45;&gt;n22 -->
<g id="edge31" class="edge">
<title>n2211-&gt;n22</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M264.42,-268.7C269.7,-280.5 274.93,-293.26 279,-305.4 285.6,-325.13 291.09,-347.22 295.36,-367.02"></path>
<polygon fill="red" stroke="red" points="291.88,-367.51 297.35,-376.58 298.74,-366.08 291.88,-367.51"></polygon>
<text text-anchor="middle" x="316.26" y="-318" font-family="Arial" font-size="18.00" fill="red">E(b+d)</text>
</g>
<!-- n22111 -->
<g id="node22" class="node">
<title>n22111</title>
<polygon fill="whitesmoke" stroke="gray" points="276,-135.4 222,-135.4 222,-99.4 276,-99.4 276,-135.4"></polygon>
</g>
<!-- n2211&#45;&gt;n22111 -->
<g id="edge24" class="edge">
<title>n2211-&gt;n22111</title>
<path fill="none" stroke="#63b8ff" stroke-width="2" d="M244.74,-172.15C245.57,-161.74 246.41,-151.15 247.12,-142.14"></path>
<polygon fill="#63b8ff" stroke="#63b8ff" stroke-width="2" points="248.72,-144.04 247.38,-138.91 245.24,-143.76 248.72,-144.04"></polygon>
</g>
<!-- n2223&#45;&gt;n22 -->
<g id="edge32" class="edge">
<title>n2223-&gt;n22</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M380.75,-268.65C371.08,-290.85 359.2,-317.6 348,-341.4 343.96,-349.99 339.58,-359.02 335.23,-367.84"></path>
<polygon fill="red" stroke="red" points="332.15,-366.19 330.84,-376.7 338.42,-369.3 332.15,-366.19"></polygon>
<text text-anchor="middle" x="390.76" y="-318" font-family="Arial" font-size="18.00" fill="red">E(c+d)</text>
</g>
<!-- n22231 -->
<g id="node26" class="node">
<title>n22231</title>
<polygon fill="whitesmoke" stroke="gray" points="492,-135.4 438,-135.4 438,-99.4 492,-99.4 492,-135.4"></polygon>
</g>
<!-- n2223&#45;&gt;n22231 -->
<g id="edge25" class="edge">
<title>n2223-&gt;n22231</title>
<path fill="none" stroke="#36648b" stroke-width="2" d="M430.94,-172.15C437.73,-161.44 444.64,-150.53 450.45,-141.36"></path>
<polygon fill="#36648b" stroke="#36648b" stroke-width="2" points="451.09,-143.61 452.29,-138.45 448.14,-141.74 451.09,-143.61"></polygon>
</g>
<!-- n22232 -->
<g id="node27" class="node">
<title>n22232</title>
<polygon fill="whitesmoke" stroke="gray" points="348,-135.4 294,-135.4 294,-99.4 348,-99.4 348,-135.4"></polygon>
</g>
<!-- n2223&#45;&gt;n22232 -->
<g id="edge26" class="edge">
<title>n2223-&gt;n22232</title>
<path fill="none" stroke="lightgray" d="M363.58,-172.15C354.93,-161.24 346.12,-150.12 338.78,-140.85"></path>
<polygon fill="lightgray" stroke="lightgray" points="340.28,-139.92 335.8,-137.08 337.53,-142.09 340.28,-139.92"></polygon>
</g>
<!-- n22233 -->
<g id="node28" class="node">
<title>n22233</title>
<polygon fill="whitesmoke" stroke="gray" points="420,-135.4 366,-135.4 366,-99.4 420,-99.4 420,-135.4"></polygon>
</g>
<!-- n2223&#45;&gt;n22233 -->
<g id="edge27" class="edge">
<title>n2223-&gt;n22233</title>
<path fill="none" stroke="lightgray" d="M397.26,-172.15C396.43,-161.74 395.59,-151.15 394.88,-142.14"></path>
<polygon fill="lightgray" stroke="lightgray" points="396.64,-142.25 394.51,-137.41 393.16,-142.53 396.64,-142.25"></polygon>
</g>
<!-- n222311 -->
<g id="node29" class="node">
<title>n222311</title>
<polygon fill="snow" stroke="gray" points="430.69,-62.4 337.31,-62.4 337.31,0 430.69,0 430.69,-62.4"></polygon>
<text text-anchor="middle" x="384" y="-35.4" font-family="Arial" font-size="14.00" fill="red">Método_D</text>
<text text-anchor="middle" x="384" y="-18.6" font-family="Arial" font-size="14.00" fill="red">throw E</text>
</g>
<!-- n22111&#45;&gt;n222311 -->
<g id="edge28" class="edge">
<title>n22111-&gt;n222311</title>
<path fill="none" stroke="#63b8ff" stroke-width="2" d="M276.32,-99.36C292.24,-89.43 312.84,-76.58 331.75,-64.79"></path>
<polygon fill="#63b8ff" stroke="#63b8ff" stroke-width="2" points="331.15,-67.22 334.47,-63.09 329.3,-64.25 331.15,-67.22"></polygon>
</g>
<!-- n22231&#45;&gt;n222311 -->
<g id="edge29" class="edge">
<title>n22231-&gt;n222311</title>
<path fill="none" stroke="#36648b" stroke-width="2" d="M448.22,-98.95C439.38,-89.77 428.21,-78.16 417.68,-67.21"></path>
<polygon fill="#36648b" stroke="#36648b" stroke-width="2" points="420.04,-67.14 415.31,-64.75 417.52,-69.56 420.04,-67.14"></polygon>
</g>
<!-- n222311&#45;&gt;n2211 -->
<g id="edge33" class="edge">
<title>n222311-&gt;n2211</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M337.12,-32.76C288.58,-36.15 214.93,-49.81 179,-99.4 164.92,-118.83 172,-141.9 185.58,-162.6"></path>
<polygon fill="red" stroke="red" points="182.69,-164.57 191.34,-170.68 188.39,-160.51 182.69,-164.57"></polygon>
<text text-anchor="middle" x="196" y="-112" font-family="Arial" font-size="18.00" fill="red">E(d)</text>
</g>
<!-- n222311&#45;&gt;n2223 -->
<g id="edge34" class="edge">
<title>n222311-&gt;n2223</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M430.94,-46.22C456.5,-56.52 485.92,-73.35 501,-99.4 514.91,-123.44 501.69,-147.45 480.82,-167.61"></path>
<polygon fill="red" stroke="red" points="478.68,-164.82 473.6,-174.12 483.37,-170.01 478.68,-164.82"></polygon>
<text text-anchor="middle" x="524" y="-112" font-family="Arial" font-size="18.00" fill="red">E(d)</text>
</g>
<!-- n222312 -->
<g id="node30" class="node">
<title>n222312</title>
<polygon fill="whitesmoke" stroke="gray" points="437,-683.2 383,-683.2 383,-647.2 437,-647.2 437,-683.2"></polygon>
</g>
</g>
</svg>
</p><p></p>
<div style="page-break-after:always;"></div>
<p>Si sólo tuviera un punto de recuperación de errores (catch) en el <strong><code>Main</code></strong> al producirse el la excepción <strong><code>E(d)</code></strong> en <strong><code>Método_D</code></strong>, no sabría por donde se ha producido.</p>
<p>Sin embargo, si vamos añadiendo <em>'<strong><code>catch</code></strong> de control'</em> donde relanzamos la misma excepción, añadiendo una capa de información de que proceso estamos haciendo en ese momento. El <em>'<strong><code>catch</code></strong> de contol'</em> en el <strong><code>Método_A</code></strong>, si nos fijamos, puede relanzar la excepción añadiendo información de cada uno de los <em>'<strong><code>catch</code></strong> de contol'</em> por donde ha pasado <strong><code>E(a+b+d) o E(a+c+d)</code></strong> y saber de forma más específica en un <em>'<strong><code>catch</code></strong> de mensaje o recuperación'</em> del <strong><code>Main</code></strong>, por donde se ha producido el error.</p>
<p>Una posible implementación esquemática del la situación descrita en el diagrama, podría ser la siguiente:</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-namespace">namespace</span> <span class="token namespace">EsquemaExcepcionesEncadenadas</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-class">class</span> <span class="token class-name">E</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Exception</span></span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-public">public</span> <span class="token function">E</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> message<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword keyword-base">base</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword keyword-public">public</span> <span class="token function">E</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> message<span class="token punctuation">,</span> <span class="token class-name">Exception</span> innerException<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword keyword-base">base</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> innerException<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-class">class</span> <span class="token class-name">JerarquiaDeLlamadas</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo_D</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// En algún punto de pude lanzar la excepción</span>
            <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">E</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo_C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-try">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// En algún punto de este código en su jerarquía de llamadas,</span>
                <span class="token comment">// se llamará a Metodo_D()</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-catch">catch</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token comment">// Catch de control en C</span>
            <span class="token punctuation">{</span>
                <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">E</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo_B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-try">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// En algún punto de este código en su jerarquía de llamadas,</span>
                <span class="token comment">// se llamará a Metodo_D()</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-catch">catch</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token comment">// Catch de control en B</span>
            <span class="token punctuation">{</span>
                <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">E</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Metodo_A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-try">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// En algún punto de este código en su jerarquía de llamadas,</span>
                <span class="token comment">// o bien se llemará a Metodo_B() o a Metodo_C()</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-catch">catch</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token comment">// Catch de control en A</span>
            <span class="token punctuation">{</span>
                <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">E</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre><pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>        <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-try">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// En algún punto de este código en su jerarquía de llamadas,</span>
                <span class="token comment">// se llamará a Metodo_A()</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">?</span> e<span class="token punctuation">)</span> <span class="token comment">// Catch de mensaje o recuperación en Main</span>
            <span class="token punctuation">{</span>
                <span class="token class-name">StringBuilder</span> mensaje <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    mensaje<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    e <span class="token operator">=</span> e<span class="token punctuation">.</span>InnerException <span class="token keyword keyword-as">as</span> <span class="token class-name">E</span><span class="token punctuation">;</span>
                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
                        mensaje<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>mensaje<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h4 id="bulb-tips-de-uso-de-excepciones-en-net">💡 Tips de uso de excepciones en .NET </h4>
<p>En ocasiones usar adecuadamente las excepciones es complicado incluso para programadores <strong>experimentados</strong>, y se han de establecer convenios y patrones en los equipos de desarrollo.</p>
<p>Aunque en este curso no vamos tratar más que los conceptos básicos. Si deseas profundizar, en el siguiente enlace puedes encontrar una serie de instrucciones para la correcta generación  de excepciones descritas en la documentación de Microsoft. Que además de ser una lectura complementaria interesante, puede ser extrapolable a otros lenguajes.</p>
<ul>
<li><a href="https://docs.microsoft.com/es-es/dotnet/standard/design-guidelines/exception-throwing">Instrucciones para la correcta generación de excepciones</a>.</li>
</ul>
<p>De entre los tips del enlace anterior, destacaremos un uso incorrecto y muy común en programadores noveles.</p>
<blockquote>
<p>❌ <strong>No utilice excepciones para el flujo de control normal, si es posible.</strong></p>
</blockquote>
<p>Veamos <strong>un ejemplo similar al del inicio</strong> del tema, donde queríamos pedir dos números y mostrar su división.<br>
Un código algo más modularizado, pero sin gestión de excepciones sería el siguiente:</p>
<div class="contenedor">
    <div class="fondo">
        <div class="abre_comilla">"</div>
        <div class="cierra_comilla">"</div>
        <div class="cita">Truth can only be found in one place: the code.</div>
        <div class="autor">- Robert C. Martin.</div>
    </div>
</div>
<div style="page-break-after:always;"></div>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Consola</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> <span class="token function">Lee</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> etiqueta<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">etiqueta</span><span class="token punctuation">}</span></span><span class="token string">: "</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Principal</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> numerador <span class="token operator">=</span> Consola<span class="token punctuation">.</span><span class="token function">Lee</span><span class="token punctuation">(</span><span class="token string">"Introduce el numerador"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> divisor <span class="token operator">=</span> Consola<span class="token punctuation">.</span><span class="token function">Lee</span><span class="token punctuation">(</span><span class="token string">"Introduce el divisor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"La división es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">numerador <span class="token operator">/</span> divisor</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Si ahora nos piden filtrar la entrada de datos, para que no se generase error al producirse una entrada correcta.</p>
<blockquote>
<p>💀 <strong>Peligro</strong>: Una tentación sería hacer la siguiente implementación...</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> <span class="token function">Lee</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> etiqueta<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-string">string</span></span> textoEntrada <span class="token operator">=</span> <span class="token keyword keyword-default">default</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword keyword-double">double</span><span class="token punctuation">?</span></span> valor <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-do">do</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-try">try</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">etiqueta</span><span class="token punctuation">}</span></span><span class="token string">: "</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            textoEntrada <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            valor <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>textoEntrada<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"El valor introducido </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">textoEntrada</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> 
                              <span class="token string">"no es un valor real válido."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>valor <span class="token operator">==</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token punctuation">(</span><span class="token keyword keyword-double">double</span><span class="token punctuation">)</span>valor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>En esta implementación, utilizamos excepciones para el <strong>control del flujo de código</strong> y no para una situación de error.</p>
<p><strong>¿Cual sería la implementación correcta del código anterior para no hacerlo?</strong></p>
<p>✔️ 👍 Microsoft nos propone usar el <strong><a href="https://docs.microsoft.com/es-es/dotnet/standard/design-guidelines/exceptions-and-performance#try-parse-pattern">patrón try-parse</a></strong> en su lugar, de la siguiente forma...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> <span class="token function">Lee</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> etiqueta<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-double">double</span></span> valor<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> error<span class="token punctuation">;</span>

    <span class="token keyword keyword-do">do</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">etiqueta</span><span class="token punctuation">}</span></span><span class="token string">: "</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-string">string</span></span> textoEntrada <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        error <span class="token operator">=</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>textoEntrada<span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> valor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"El valor introducido </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">textoEntrada</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> 
                              <span class="token string">"no es un valor real válido."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> valor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>❌💀 De forma similar sucedería si intentásemos controlar la división por cero en el programa principal de la siguiente forma ....</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-double">double</span><span class="token punctuation">?</span></span> division <span class="token operator">=</span> <span class="token keyword keyword-default">default</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-do">do</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-try">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword keyword-double">double</span></span> numerador <span class="token operator">=</span> Consola<span class="token punctuation">.</span><span class="token function">Lee</span><span class="token punctuation">(</span><span class="token string">"Introduce el numerador"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword keyword-double">double</span></span> divisor <span class="token operator">=</span> Consola<span class="token punctuation">.</span><span class="token function">Lee</span><span class="token punctuation">(</span><span class="token string">"Introduce el divisor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">DivideByZeroException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Lanzo una excepción</span>
            division <span class="token operator">=</span> numerador <span class="token operator">/</span> divisor<span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"La división es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">division</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-catch">catch</span><span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span><span class="token punctuation">)</span> <span class="token comment">// La capturo en el mismo ámbito</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"No se puede dividir por cero.\n"</span> <span class="token operator">+</span>
                              <span class="token string">"Introduzca de nuevo los valores."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>division <span class="token operator">==</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>En esta implementación, estamos cometiendo un doble mal uso</p>
<ul>
<li>❌ Utilizamos excepciones para el <strong>control del flujo de código</strong>.</li>
<li>❌ En <strong>el mismo ámbito</strong> estámos lanzando una excepción (<strong><code>Línea 11</code></strong>) y capturándola (<strong><code>Línea 15</code></strong>) y esto, <mark><strong>nunca se debe producir</strong></mark>.</li>
</ul>
<p><strong>¿Cual sería la implementación correcta del código anterior para no hacerlo?</strong></p>
<p>✔️ 👍 Usaríamos estructuras condicionales tradicionales.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> errorDivisionPorCero<span class="token punctuation">;</span>
    <span class="token keyword keyword-do">do</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> numerador <span class="token operator">=</span> Consola<span class="token punctuation">.</span><span class="token function">Lee</span><span class="token punctuation">(</span><span class="token string">"Introduce el numerador"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-double">double</span></span> divisor <span class="token operator">=</span> Consola<span class="token punctuation">.</span><span class="token function">Lee</span><span class="token punctuation">(</span><span class="token string">"Introduce el divisor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        errorDivisionPorCero <span class="token operator">=</span> divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-string">string</span></span> textoError <span class="token operator">=</span> errorDivisionPorCero                    
                            <span class="token punctuation">?</span> <span class="token interpolation-string"><span class="token string">$"No se puede dividir por cero.\nIntroduzca de nuevo los valores."</span></span>
                            <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$"La división es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">numerador <span class="token operator">/</span> divisor</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>textoError<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>errorDivisionPorCero<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h5 id="excepciones-estándar-en-net">Excepciones estándar en .NET </h5>
<p>Además, Microsoft nos proporciona unas recomendaciones de uso de excepciones estándar ya definidas por las propias BCL.<br>
Fíjate que algunas <strong>no</strong> son recomendables capturarlas, lanzarlas o derivarlas.</p>
<ul>
<li><a href="https://docs.microsoft.com/es-es/dotnet/standard/design-guidelines/using-standard-exception-types">Recomendaciones de uso de excepciones estándar</a></li>
</ul>
<p>Aunque cuando necesitemos lanzar algún tipo de excepción estándar se te indicará en el enunciado. En el siguiente diagramá tienes un resumen <strong>simplificado</strong> de las principales excepciones en .NET y las recomendaciones de uso del cuadro anterior.</p>
<p></p><p align="center" style="zoom:0.4" class="dot"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 9.0.0 (20230911.1827)
 -->
<!-- Title: G Pages: 1 -->
<svg width="1639pt" height="540pt" viewBox="0.00 0.00 1639.28 540.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 536)">
<title>G</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-536 1635.28,-536 1635.28,4 -4,4"></polygon>
<!-- Exception -->
<g id="node1" class="node">
<title>Exception</title>
<polygon fill="none" stroke="black" points="860.57,-430 860.57,-528 1048.88,-528 1048.88,-430 860.57,-430"></polygon>
<text text-anchor="start" x="921.28" y="-495.4" font-family="Arial" font-weight="bold" font-size="14.00">Exception</text>
<text text-anchor="start" x="919.71" y="-481.4" font-family="Arial" font-size="14.00">No generar</text>
<text text-anchor="start" x="903.76" y="-467.4" font-family="Arial" font-size="14.00">Evitar capturarla</text>
<text text-anchor="start" x="881.57" y="-453.4" font-family="Arial" font-size="14.00">Regenerar si capturada</text>
</g>
<!-- SystemException -->
<g id="node2" class="node">
<title>SystemException</title>
<polygon fill="none" stroke="black" points="750.57,-288 750.57,-386 938.88,-386 938.88,-288 750.57,-288"></polygon>
<text text-anchor="start" x="786.37" y="-353.4" font-family="Arial" font-weight="bold" font-size="14.00">SystemException</text>
<text text-anchor="start" x="809.71" y="-339.4" font-family="Arial" font-size="14.00">No generar</text>
<text text-anchor="start" x="793.76" y="-325.4" font-family="Arial" font-size="14.00">Evitar capturarla</text>
<text text-anchor="start" x="771.57" y="-311.4" font-family="Arial" font-size="14.00">Regenerar si capturada</text>
</g>
<!-- SystemException&#45;&gt;Exception -->
<g id="edge1" class="edge">
<title>SystemException-&gt;Exception</title>
<path fill="none" stroke="black" d="M885.37,-389.73C892.35,-398.61 899.66,-407.91 906.81,-417.01"></path>
<polygon fill="none" stroke="black" points="904.01,-419.12 912.94,-424.82 909.52,-414.8 904.01,-419.12"></polygon>
</g>
<!-- ApplicationException -->
<g id="node3" class="node">
<title>ApplicationException</title>
<polygon fill="none" stroke="black" points="973.17,-295 973.17,-379 1158.29,-379 1158.29,-295 973.17,-295"></polygon>
<text text-anchor="start" x="994.17" y="-346.4" font-family="Arial" font-weight="bold" font-size="14.00">ApplicationException</text>
<text text-anchor="start" x="1030.71" y="-332.4" font-family="Arial" font-size="14.00">No generar</text>
<text text-anchor="start" x="1030.71" y="-318.4" font-family="Arial" font-size="14.00">No heredar</text>
</g>
<!-- ApplicationException&#45;&gt;Exception -->
<g id="edge2" class="edge">
<title>ApplicationException-&gt;Exception</title>
<path fill="none" stroke="black" d="M1030.3,-382.68C1021.5,-393.78 1011.93,-405.85 1002.64,-417.57"></path>
<polygon fill="none" stroke="black" points="1000.03,-415.23 996.56,-425.24 1005.51,-419.58 1000.03,-415.23"></polygon>
</g>
<!-- ArgumentException -->
<g id="node4" class="node">
<title>ArgumentException</title>
<polygon fill="none" stroke="black" points="284.22,-146 284.22,-244 459.23,-244 459.23,-146 284.22,-146"></polygon>
<text text-anchor="start" x="305.22" y="-211.4" font-family="Arial" font-weight="bold" font-size="14.00">ArgumentException</text>
<text text-anchor="start" x="339.04" y="-197.4" font-family="Arial" font-size="14.00">Generable</text>
<text text-anchor="start" x="315.71" y="-183.4" font-family="Arial" font-size="14.00">Usar </text>
<text text-anchor="start" x="349.16" y="-183.4" font-family="Arial" font-style="italic" font-size="14.00">ParamName</text>
<text text-anchor="start" x="338.27" y="-169.4" font-family="Arial" font-size="14.00">Usar </text>
<text text-anchor="start" x="371.72" y="-169.4" font-family="Arial" font-style="italic" font-size="14.00">value</text>
</g>
<!-- ArgumentException&#45;&gt;SystemException -->
<g id="edge3" class="edge">
<title>ArgumentException-&gt;SystemException</title>
<path fill="none" stroke="black" d="M467.06,-235.76C478.66,-240.11 490.41,-244.3 501.73,-248 577.43,-272.74 664.34,-294.97 731.74,-310.9"></path>
<polygon fill="none" stroke="black" points="730.8,-314.28 741.33,-313.16 732.4,-307.46 730.8,-314.28"></polygon>
</g>
<!-- ArithmeticException -->
<g id="node5" class="node">
<title>ArithmeticException</title>
<polygon fill="none" stroke="black" points="518.66,-165.6 518.66,-224.4 696.8,-224.4 696.8,-165.6 518.66,-165.6"></polygon>
<text text-anchor="start" x="539.66" y="-191.8" font-family="Arial" font-weight="bold" font-size="14.00">ArithmeticException</text>
</g>
<!-- ArithmeticException&#45;&gt;SystemException -->
<g id="edge4" class="edge">
<title>ArithmeticException-&gt;SystemException</title>
<path fill="none" stroke="black" d="M662.4,-228.29C687.58,-243.17 718.23,-261.28 747.17,-278.37"></path>
<polygon fill="none" stroke="black" points="745.21,-281.28 755.6,-283.35 748.77,-275.25 745.21,-281.28"></polygon>
</g>
<!-- IndexOutOfRangeException -->
<g id="node6" class="node">
<title>IndexOutOfRangeException</title>
<polygon fill="none" stroke="black" points="730.77,-160 730.77,-230 958.68,-230 958.68,-160 730.77,-160"></polygon>
<text text-anchor="start" x="751.77" y="-197.4" font-family="Arial" font-weight="bold" font-size="14.00">IndexOutOfRangeException</text>
<text text-anchor="start" x="809.71" y="-183.4" font-family="Arial" font-size="14.00">No generar</text>
</g>
<!-- IndexOutOfRangeException&#45;&gt;SystemException -->
<g id="edge5" class="edge">
<title>IndexOutOfRangeException-&gt;SystemException</title>
<path fill="none" stroke="black" d="M844.73,-233.89C844.73,-245.85 844.73,-259.41 844.73,-272.65"></path>
<polygon fill="none" stroke="black" points="841.23,-272.64 844.73,-282.64 848.23,-272.64 841.23,-272.64"></polygon>
</g>
<!-- NullReferenceException -->
<g id="node7" class="node">
<title>NullReferenceException</title>
<polygon fill="none" stroke="black" points="992.2,-160 992.2,-230 1195.25,-230 1195.25,-160 992.2,-160"></polygon>
<text text-anchor="start" x="1013.2" y="-197.4" font-family="Arial" font-weight="bold" font-size="14.00">NullReferenceException</text>
<text text-anchor="start" x="1058.71" y="-183.4" font-family="Arial" font-size="14.00">No generar</text>
</g>
<!-- NullReferenceException&#45;&gt;SystemException -->
<g id="edge6" class="edge">
<title>NullReferenceException-&gt;SystemException</title>
<path fill="none" stroke="black" d="M1026.34,-233.89C1001.84,-247.66 973.58,-263.56 946.75,-278.64"></path>
<polygon fill="none" stroke="black" points="945.26,-275.46 938.26,-283.41 948.69,-281.56 945.26,-275.46"></polygon>
</g>
<!-- IOException -->
<g id="node8" class="node">
<title>IOException</title>
<polygon fill="none" stroke="black" points="1228.89,-165.6 1228.89,-224.4 1352.57,-224.4 1352.57,-165.6 1228.89,-165.6"></polygon>
<text text-anchor="start" x="1249.89" y="-191.8" font-family="Arial" font-weight="bold" font-size="14.00">IOException</text>
</g>
<!-- IOException&#45;&gt;SystemException -->
<g id="edge7" class="edge">
<title>IOException-&gt;SystemException</title>
<path fill="none" stroke="black" d="M1249.71,-228.29C1238.3,-235.87 1225.5,-243.14 1212.73,-248 1108.3,-287.74 1068.78,-253.46 957.77,-283.69"></path>
<polygon fill="none" stroke="black" points="956.91,-280.3 948.26,-286.41 958.83,-287.03 956.91,-280.3"></polygon>
</g>
<!-- ArgumentNullException -->
<g id="node9" class="node">
<title>ArgumentNullException</title>
<polygon fill="none" stroke="black" points="8,-4 8,-102 209.46,-102 209.46,-4 8,-4"></polygon>
<text text-anchor="start" x="29" y="-69.4" font-family="Arial" font-weight="bold" font-size="14.00">ArgumentNullException</text>
<text text-anchor="start" x="76.04" y="-55.4" font-family="Arial" font-size="14.00">Generable</text>
<text text-anchor="start" x="52.71" y="-41.4" font-family="Arial" font-size="14.00">Usar </text>
<text text-anchor="start" x="86.16" y="-41.4" font-family="Arial" font-style="italic" font-size="14.00">ParamName</text>
<text text-anchor="start" x="75.27" y="-27.4" font-family="Arial" font-size="14.00">Usar </text>
<text text-anchor="start" x="108.72" y="-27.4" font-family="Arial" font-style="italic" font-size="14.00">value</text>
</g>
<!-- ArgumentNullException&#45;&gt;ArgumentException -->
<g id="edge8" class="edge">
<title>ArgumentNullException-&gt;ArgumentException</title>
<path fill="none" stroke="black" d="M206.29,-105.93C225.92,-116.38 246.64,-127.41 266.52,-138"></path>
<polygon fill="none" stroke="black" points="264.71,-141 275.18,-142.61 268,-134.82 264.71,-141"></polygon>
</g>
<!-- ArgumentOutOfRangeException -->
<g id="node10" class="node">
<title>ArgumentOutOfRangeException</title>
<polygon fill="none" stroke="black" points="243,-4 243,-102 500.46,-102 500.46,-4 243,-4"></polygon>
<text text-anchor="start" x="264" y="-69.4" font-family="Arial" font-weight="bold" font-size="14.00">ArgumentOutOfRangeException</text>
<text text-anchor="start" x="339.04" y="-55.4" font-family="Arial" font-size="14.00">Generable</text>
<text text-anchor="start" x="315.71" y="-41.4" font-family="Arial" font-size="14.00">Usar </text>
<text text-anchor="start" x="349.16" y="-41.4" font-family="Arial" font-style="italic" font-size="14.00">ParamName</text>
<text text-anchor="start" x="338.27" y="-27.4" font-family="Arial" font-size="14.00">Usar </text>
<text text-anchor="start" x="371.72" y="-27.4" font-family="Arial" font-style="italic" font-size="14.00">value</text>
</g>
<!-- ArgumentOutOfRangeException&#45;&gt;ArgumentException -->
<g id="edge9" class="edge">
<title>ArgumentOutOfRangeException-&gt;ArgumentException</title>
<path fill="none" stroke="black" d="M371.73,-105.73C371.73,-113.87 371.73,-122.37 371.73,-130.73"></path>
<polygon fill="none" stroke="black" points="368.23,-130.5 371.73,-140.5 375.23,-130.5 368.23,-130.5"></polygon>
</g>
<!-- DivideByZeroException -->
<g id="node11" class="node">
<title>DivideByZeroException</title>
<polygon fill="none" stroke="black" points="534.15,-23.6 534.15,-82.4 733.3,-82.4 733.3,-23.6 534.15,-23.6"></polygon>
<text text-anchor="start" x="555.15" y="-49.8" font-family="Arial" font-weight="bold" font-size="14.00">DivideByZeroException</text>
</g>
<!-- DivideByZeroException&#45;&gt;ArithmeticException -->
<g id="edge10" class="edge">
<title>DivideByZeroException-&gt;ArithmeticException</title>
<path fill="none" stroke="black" d="M627.76,-86.12C624.2,-105.33 619.62,-129.98 615.74,-150.87"></path>
<polygon fill="none" stroke="black" points="612.33,-150.07 613.94,-160.54 619.21,-151.35 612.33,-150.07"></polygon>
</g>
<!-- EndOfStremException -->
<g id="node12" class="node">
<title>EndOfStremException</title>
<polygon fill="none" stroke="black" points="966.44,-23.6 966.44,-82.4 1157.02,-82.4 1157.02,-23.6 966.44,-23.6"></polygon>
<text text-anchor="start" x="987.44" y="-49.8" font-family="Arial" font-weight="bold" font-size="14.00">EndOfStremException</text>
</g>
<!-- EndOfStremException&#45;&gt;IOException -->
<g id="edge11" class="edge">
<title>EndOfStremException-&gt;IOException</title>
<path fill="none" stroke="black" d="M1118.86,-86.21C1147.31,-102.53 1182.09,-122.89 1212.73,-142 1219.56,-146.26 1226.67,-150.82 1233.69,-155.41"></path>
<polygon fill="none" stroke="black" points="1231.63,-158.24 1241.91,-160.81 1235.48,-152.39 1231.63,-158.24"></polygon>
</g>
<!-- FileNotFoundException -->
<g id="node13" class="node">
<title>FileNotFoundException</title>
<polygon fill="none" stroke="black" points="1191.18,-23.6 1191.18,-82.4 1390.28,-82.4 1390.28,-23.6 1191.18,-23.6"></polygon>
<text text-anchor="start" x="1212.18" y="-49.8" font-family="Arial" font-weight="bold" font-size="14.00">FileNotFoundException</text>
</g>
<!-- FileNotFoundException&#45;&gt;IOException -->
<g id="edge12" class="edge">
<title>FileNotFoundException-&gt;IOException</title>
<path fill="none" stroke="black" d="M1290.73,-86.12C1290.73,-105.24 1290.73,-129.75 1290.73,-150.58"></path>
<polygon fill="none" stroke="black" points="1287.23,-150.52 1290.73,-160.52 1294.23,-150.52 1287.23,-150.52"></polygon>
</g>
<!-- FileLoadException -->
<g id="node14" class="node">
<title>FileLoadException</title>
<polygon fill="none" stroke="black" points="1424.18,-23.6 1424.18,-82.4 1623.28,-82.4 1623.28,-23.6 1424.18,-23.6"></polygon>
<text text-anchor="start" x="1445.18" y="-49.8" font-family="Arial" font-weight="bold" font-size="14.00">FileNotFoundException</text>
</g>
<!-- FileLoadException&#45;&gt;IOException -->
<g id="edge13" class="edge">
<title>FileLoadException-&gt;IOException</title>
<path fill="none" stroke="black" d="M1469.98,-86.29C1435.44,-107.05 1390.4,-134.11 1354.11,-155.91"></path>
<polygon fill="none" stroke="black" points="1352.67,-152.7 1345.91,-160.85 1356.28,-158.7 1352.67,-152.7"></polygon>
</g>
</g>
</svg>
</p><p></p>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>