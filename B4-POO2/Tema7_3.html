<!DOCTYPE html><html><head>
      <title>Programaci&#xF3;n 1&#xBA; DAM Tema 7 parte 3</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
.markdown-preview.markdown-preview .slides > section {
  height: 100%;
  font-size: 90%;
  overflow-y: auto !important;
}

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header undefined" id="tema-7-parte-3">Tema 7 parte 3</h1>

<p><a href="./Tema7_3.pdf">Descargar estos apuntes</a></p>
<h2 class="mume-header" id="%C3%ADndice">&#xCD;ndice</h2>

<ol>
<li><a href="#%C3%ADndice">&#xCD;ndice</a></li>
<li><a href="#gesti%C3%B3n-de-errores-en-poo">Gesti&#xF3;n de errores en POO</a>
<ol>
<li><a href="#programaci%C3%B3n-defensiva">Programaci&#xF3;n defensiva</a></li>
<li><a href="#excepciones">Excepciones</a>
<ol>
<li><a href="#excepciones-en-c">Excepciones en C#</a>
<ol>
<li><a href="#generaci%C3%B3n-de-excepciones">Generaci&#xF3;n de excepciones</a></li>
<li><a href="#captura-y-control-de-excepciones">Captura y control de excepciones</a></li>
<li><a href="#liberando-recursos-con-finally">Liberando recursos con finally</a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<div style="page-break-after:always;"></div>
<h2 class="mume-header" id="gesti%C3%B3n-de-errores-en-poo">Gesti&#xF3;n de errores en POO</h2>

<h3 class="mume-header" id="programaci%C3%B3n-defensiva">Programaci&#xF3;n defensiva</h3>

<ul>
<li>En este tema vamos a explicar el</li>
</ul>
<p><a href="https://es.wikipedia.org/wiki/Steve_McConnell" target="_blank">Steve McConell</a><br>
<a href="https://es.wikipedia.org/wiki/Steve_McConnell">Steve McConell</a></p>
<div style="page-break-after:always;"></div>
<h3 class="mume-header" id="excepciones">Excepciones</h3>

<ul>
<li>
<p><strong>Definici&#xF3;n</strong>: Es la forma en que los lenguajes orientados a objetos realizan el control de errores.</p>
</li>
<li>
<p><strong>Frente al control de errores en la programaci&#xF3;n estructurada tradicional nos ofrecen:</strong></p>
<ul>
<li>
<p><strong>Claridad y simplicidad</strong>, ya que <strong>evitamos l&#xF3;gica adicional</strong> del caso de error.</p>
<p>Por ejemplo, evitando que un m&#xE9;todo devuelva un error como par&#xE1;metro a trav&#xE9;s de la pila de llamadas como suced&#xED;a en la <strong>programaci&#xF3;n estructurada</strong>.</p>
<p align="center" style="zoom:0.7"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="437pt" height="449pt" viewBox="0.00 0.00 437.23 448.80" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 444.8)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-444.8 433.2322,-444.8 433.2322,4 -4,4"/>
<!-- n0 -->
<g id="node1" class="node">
<title>n0</title>
<polygon fill="none" stroke="#000000" points="206.1161,-436.8 152.1161,-436.8 152.1161,-400.8 206.1161,-400.8 206.1161,-436.8"/>
<polygon fill="none" stroke="#000000" points="210.1161,-440.8 148.1161,-440.8 148.1161,-396.8 210.1161,-396.8 210.1161,-440.8"/>
<text text-anchor="middle" x="179.1161" y="-414.6" font-family="Arial" font-size="14.00" fill="#000000">main</text>
</g>
<!-- n1 -->
<g id="node2" class="node">
<title>n1</title>
<polygon fill="none" stroke="#000000" points="92.3487,-339.0019 29.8835,-339.0019 29.8835,-297.7981 92.3487,-297.7981 92.3487,-339.0019"/>
<text text-anchor="middle" x="61.1161" y="-322.6" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="61.1161" y="-305.8" font-family="Arial" font-size="14.00" fill="#000000">1</text>
</g>
<!-- n0&#45;&gt;n1 -->
<g id="edge1" class="edge">
<title>n0-&gt;n1</title>
<path fill="none" stroke="#c0c0c0" d="M153.2205,-396.7668C135.5306,-381.7154 111.9703,-361.6692 93.1071,-345.6195"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="95.2256,-342.8265 85.3412,-339.0119 90.6894,-348.1578 95.2256,-342.8265"/>
</g>
<!-- n2 -->
<g id="node3" class="node">
<title>n2</title>
<polygon fill="none" stroke="#000000" points="172.3487,-339.0019 109.8835,-339.0019 109.8835,-297.7981 172.3487,-297.7981 172.3487,-339.0019"/>
<text text-anchor="middle" x="141.1161" y="-322.6" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="141.1161" y="-305.8" font-family="Arial" font-size="14.00" fill="#000000">2</text>
</g>
<!-- n0&#45;&gt;n2 -->
<g id="edge2" class="edge">
<title>n0-&gt;n2</title>
<path fill="none" stroke="#c0c0c0" d="M170.6827,-396.518C165.3735,-382.4905 158.4503,-364.1987 152.638,-348.842"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="155.8203,-347.3622 149.007,-339.2487 149.2735,-349.8401 155.8203,-347.3622"/>
</g>
<!-- n3 -->
<g id="node4" class="node">
<title>n3</title>
<polygon fill="none" stroke="#000000" points="292.3487,-339.0019 229.8835,-339.0019 229.8835,-297.7981 292.3487,-297.7981 292.3487,-339.0019"/>
<text text-anchor="middle" x="261.1161" y="-322.6" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="261.1161" y="-305.8" font-family="Arial" font-size="14.00" fill="#000000">3</text>
</g>
<!-- n0&#45;&gt;n3 -->
<g id="edge3" class="edge">
<title>n0-&gt;n3</title>
<path fill="none" stroke="#c0c0c0" d="M190.215,-396.5785C196.8674,-384.3321 205.9888,-369.2218 216.1161,-357.2 219.273,-353.4526 222.8076,-349.76 226.4711,-346.231"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="229.0813,-348.5865 234.0922,-339.2516 224.3536,-343.4242 229.0813,-348.5865"/>
</g>
<!-- n21 -->
<g id="node5" class="node">
<title>n21</title>
<polygon fill="none" stroke="#000000" points="62.3487,-239.8019 -.1165,-239.8019 -.1165,-198.5981 62.3487,-198.5981 62.3487,-239.8019"/>
<text text-anchor="middle" x="31.1161" y="-223.4" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="31.1161" y="-206.6" font-family="Arial" font-size="14.00" fill="#000000">2.1</text>
</g>
<!-- n2&#45;&gt;n21 -->
<g id="edge4" class="edge">
<title>n2-&gt;n21</title>
<path fill="none" stroke="#c0c0c0" d="M118.0565,-297.6044C101.7762,-282.9225 79.7819,-263.0877 61.9891,-247.0419"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="63.9156,-244.0661 54.1453,-239.9682 59.2276,-249.2645 63.9156,-244.0661"/>
</g>
<!-- n22 -->
<g id="node6" class="node">
<title>n22</title>
<polygon fill="none" stroke="#000000" points="142.3487,-239.8019 79.8835,-239.8019 79.8835,-198.5981 142.3487,-198.5981 142.3487,-239.8019"/>
<text text-anchor="middle" x="111.1161" y="-223.4" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="111.1161" y="-206.6" font-family="Arial" font-size="14.00" fill="#000000">2.2</text>
</g>
<!-- n2&#45;&gt;n22 -->
<g id="edge5" class="edge">
<title>n2-&gt;n22</title>
<path fill="none" stroke="#c0c0c0" d="M134.7539,-297.3622C130.5494,-283.4593 124.9713,-265.0147 120.2898,-249.5344"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="123.6112,-248.426 117.3663,-239.8673 116.9109,-250.4523 123.6112,-248.426"/>
</g>
<!-- n3&#45;&gt;n0 -->
<g id="edge20" class="edge">
<title>n3-&gt;n0</title>
<path fill="none" stroke="#ff0000" d="M246.4381,-339.2244C237.8883,-351.0629 226.7304,-366.0277 216.1161,-378.8 213.2498,-382.249 210.1763,-385.7923 207.0706,-389.2767"/>
<polygon fill="#ff0000" stroke="#ff0000" points="204.4162,-386.9935 200.2882,-396.7511 209.6001,-391.6975 204.4162,-386.9935"/>
<text text-anchor="middle" x="237.1192" y="-362.6" font-family="Arial" font-size="18.00" fill="#ff0000">e</text>
</g>
<!-- n31 -->
<g id="node7" class="node">
<title>n31</title>
<polygon fill="none" stroke="#000000" points="222.3487,-239.8019 159.8835,-239.8019 159.8835,-198.5981 222.3487,-198.5981 222.3487,-239.8019"/>
<text text-anchor="middle" x="191.1161" y="-223.4" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="191.1161" y="-206.6" font-family="Arial" font-size="14.00" fill="#000000">3.1</text>
</g>
<!-- n3&#45;&gt;n31 -->
<g id="edge6" class="edge">
<title>n3-&gt;n31</title>
<path fill="none" stroke="#c0c0c0" d="M246.2709,-297.3622C236.1801,-283.0621 222.6986,-263.957 211.5904,-248.215"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="214.3252,-246.0199 205.6999,-239.8673 208.6057,-250.0558 214.3252,-246.0199"/>
</g>
<!-- n32 -->
<g id="node8" class="node">
<title>n32</title>
<polygon fill="none" stroke="#000000" points="302.3487,-239.8019 239.8835,-239.8019 239.8835,-198.5981 302.3487,-198.5981 302.3487,-239.8019"/>
<text text-anchor="middle" x="271.1161" y="-223.4" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="271.1161" y="-206.6" font-family="Arial" font-size="14.00" fill="#000000">3.2</text>
</g>
<!-- n3&#45;&gt;n32 -->
<g id="edge7" class="edge">
<title>n3-&gt;n32</title>
<path fill="none" stroke="#c0c0c0" d="M263.2368,-297.3622C264.625,-283.5917 266.4623,-265.3656 268.0135,-249.9775"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="271.512,-250.1679 269.0327,-239.8673 264.5473,-249.4658 271.512,-250.1679"/>
</g>
<!-- n33 -->
<g id="node9" class="node">
<title>n33</title>
<polygon fill="none" stroke="#000000" points="382.3487,-239.8019 319.8835,-239.8019 319.8835,-198.5981 382.3487,-198.5981 382.3487,-239.8019"/>
<text text-anchor="middle" x="351.1161" y="-223.4" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="351.1161" y="-206.6" font-family="Arial" font-size="14.00" fill="#000000">3.3</text>
</g>
<!-- n3&#45;&gt;n33 -->
<g id="edge8" class="edge">
<title>n3-&gt;n33</title>
<path fill="none" stroke="#c0c0c0" d="M280.2028,-297.3622C293.417,-282.7973 311.1534,-263.2477 325.5823,-247.3439"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="328.2384,-249.6252 332.3655,-239.8673 323.0541,-244.9217 328.2384,-249.6252"/>
</g>
<!-- n221 -->
<g id="node10" class="node">
<title>n221</title>
<polygon fill="none" stroke="#000000" points="62.3487,-140.6019 -.1165,-140.6019 -.1165,-99.3981 62.3487,-99.3981 62.3487,-140.6019"/>
<text text-anchor="middle" x="31.1161" y="-124.2" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="31.1161" y="-107.4" font-family="Arial" font-size="14.00" fill="#000000">2.2.1</text>
</g>
<!-- n22&#45;&gt;n221 -->
<g id="edge9" class="edge">
<title>n22-&gt;n221</title>
<path fill="none" stroke="#c0c0c0" d="M94.1502,-198.1622C82.511,-183.7297 66.9248,-164.4028 54.1633,-148.5786"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="56.7853,-146.2543 47.7833,-140.6673 51.3364,-150.6486 56.7853,-146.2543"/>
</g>
<!-- n222 -->
<g id="node11" class="node">
<title>n222</title>
<polygon fill="none" stroke="#000000" points="142.3487,-140.6019 79.8835,-140.6019 79.8835,-99.3981 142.3487,-99.3981 142.3487,-140.6019"/>
<text text-anchor="middle" x="111.1161" y="-124.2" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="111.1161" y="-107.4" font-family="Arial" font-size="14.00" fill="#000000">2.2.2</text>
</g>
<!-- n22&#45;&gt;n222 -->
<g id="edge10" class="edge">
<title>n22-&gt;n222</title>
<path fill="none" stroke="#c0c0c0" d="M111.1161,-198.1622C111.1161,-184.3917 111.1161,-166.1656 111.1161,-150.7775"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="114.6162,-150.6672 111.1161,-140.6673 107.6162,-150.6673 114.6162,-150.6672"/>
</g>
<!-- n223 -->
<g id="node12" class="node">
<title>n223</title>
<polygon fill="none" stroke="#000000" points="222.3487,-140.6019 159.8835,-140.6019 159.8835,-99.3981 222.3487,-99.3981 222.3487,-140.6019"/>
<text text-anchor="middle" x="191.1161" y="-124.2" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="191.1161" y="-107.4" font-family="Arial" font-size="14.00" fill="#000000">2.2.3</text>
</g>
<!-- n22&#45;&gt;n223 -->
<g id="edge11" class="edge">
<title>n22-&gt;n223</title>
<path fill="none" stroke="#c0c0c0" d="M128.082,-198.1622C139.7212,-183.7297 155.3074,-164.4028 168.0689,-148.5786"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="170.8958,-150.6486 174.4489,-140.6673 165.4469,-146.2543 170.8958,-150.6486"/>
</g>
<!-- n33&#45;&gt;n3 -->
<g id="edge19" class="edge">
<title>n33-&gt;n3</title>
<path fill="none" stroke="#ff0000" d="M343.6585,-239.8365C338.4275,-252.3266 330.5104,-268.0233 320.1161,-279.6 314.5876,-285.7574 307.8726,-291.3653 300.9813,-296.2852"/>
<polygon fill="#ff0000" stroke="#ff0000" points="298.5982,-293.6686 292.2339,-302.1389 302.4913,-299.4861 298.5982,-293.6686"/>
<text text-anchor="middle" x="339.1192" y="-263.4" font-family="Arial" font-size="18.00" fill="#ff0000">e</text>
</g>
<!-- n331 -->
<g id="node13" class="node">
<title>n331</title>
<polygon fill="none" stroke="#000000" points="349.3487,-140.6019 286.8835,-140.6019 286.8835,-99.3981 349.3487,-99.3981 349.3487,-140.6019"/>
<text text-anchor="middle" x="318.1161" y="-124.2" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="318.1161" y="-107.4" font-family="Arial" font-size="14.00" fill="#000000">3.3.1</text>
</g>
<!-- n33&#45;&gt;n331 -->
<g id="edge12" class="edge">
<title>n33-&gt;n331</title>
<path fill="none" stroke="#c0c0c0" d="M339.7686,-198.2302C336.9976,-192.5544 334.2265,-186.3364 332.1161,-180.4 328.7533,-170.9407 325.9826,-160.3571 323.8189,-150.7238"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="327.2015,-149.8023 321.7099,-140.7418 320.3527,-151.2494 327.2015,-149.8023"/>
</g>
<!-- n332 -->
<g id="node14" class="node">
<title>n332</title>
<polygon fill="none" stroke="#000000" points="429.3487,-140.6019 366.8835,-140.6019 366.8835,-99.3981 429.3487,-99.3981 429.3487,-140.6019"/>
<text text-anchor="middle" x="398.1161" y="-124.2" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="398.1161" y="-107.4" font-family="Arial" font-size="14.00" fill="#000000">3.3.2</text>
</g>
<!-- n33&#45;&gt;n332 -->
<g id="edge13" class="edge">
<title>n33-&gt;n332</title>
<path fill="none" stroke="#c0c0c0" d="M361.0836,-198.1622C367.7334,-184.1269 376.5762,-165.4629 383.9531,-149.8929"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="387.2054,-151.2029 388.3241,-140.6673 380.8795,-148.2057 387.2054,-151.2029"/>
</g>
<!-- n331&#45;&gt;n33 -->
<g id="edge18" class="edge">
<title>n331-&gt;n33</title>
<path fill="none" stroke="#ff0000" d="M324.9913,-140.6673C329.5891,-154.4887 335.7201,-172.9187 340.8872,-188.4512"/>
<polygon fill="#ff0000" stroke="#ff0000" points="337.64,-189.7783 344.1176,-198.1622 344.2821,-187.5687 337.64,-189.7783"/>
<text text-anchor="middle" x="342.1192" y="-164.2" font-family="Arial" font-size="18.00" fill="#ff0000">e</text>
</g>
<!-- n3311 -->
<g id="node15" class="node">
<title>n3311</title>
<polygon fill="none" stroke="#000000" points="254.3487,-41.4019 191.8835,-41.4019 191.8835,-.1981 254.3487,-.1981 254.3487,-41.4019"/>
<text text-anchor="middle" x="223.1161" y="-25" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="223.1161" y="-8.2" font-family="Arial" font-size="14.00" fill="#000000">3.3.1.1</text>
</g>
<!-- n331&#45;&gt;n3311 -->
<g id="edge14" class="edge">
<title>n331-&gt;n3311</title>
<path fill="none" stroke="#c0c0c0" d="M297.969,-98.9622C284.0207,-84.3973 265.2989,-64.8477 250.0684,-48.9439"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="252.3527,-46.2688 242.9084,-41.4673 247.2971,-51.1104 252.3527,-46.2688"/>
</g>
<!-- n3312 -->
<g id="node16" class="node">
<title>n3312</title>
<polygon fill="none" stroke="#000000" points="334.3487,-41.4019 271.8835,-41.4019 271.8835,-.1981 334.3487,-.1981 334.3487,-41.4019"/>
<text text-anchor="middle" x="303.1161" y="-25" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="303.1161" y="-8.2" font-family="Arial" font-size="14.00" fill="#000000">3.3.1.2</text>
</g>
<!-- n331&#45;&gt;n3312 -->
<g id="edge15" class="edge">
<title>n331-&gt;n3312</title>
<path fill="none" stroke="#c0c0c0" d="M314.935,-98.9622C312.8528,-85.1917 310.0968,-66.9656 307.77,-51.5775"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="311.197,-50.8316 306.2412,-41.4673 304.2757,-51.8782 311.197,-50.8316"/>
</g>
<!-- n3313 -->
<g id="node17" class="node">
<title>n3313</title>
<polygon fill="none" stroke="#000000" points="414.3487,-41.4019 351.8835,-41.4019 351.8835,-.1981 414.3487,-.1981 414.3487,-41.4019"/>
<text text-anchor="middle" x="383.1161" y="-25" font-family="Arial" font-size="14.00" fill="#000000">m&#xE9;todo</text>
<text text-anchor="middle" x="383.1161" y="-8.2" font-family="Arial" font-size="14.00" fill="#000000">3.3.1.3</text>
</g>
<!-- n331&#45;&gt;n3313 -->
<g id="edge16" class="edge">
<title>n331-&gt;n3313</title>
<path fill="none" stroke="#c0c0c0" d="M330.24,-99.3491C337.2877,-87.5666 346.4614,-72.6 355.1161,-59.6 357.2193,-56.4408 359.4636,-53.1735 361.7317,-49.9372"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="364.7623,-51.7151 367.7102,-41.5387 359.0596,-47.6556 364.7623,-51.7151"/>
</g>
<!-- n3313&#45;&gt;n331 -->
<g id="edge17" class="edge">
<title>n3313-&gt;n331</title>
<path fill="none" stroke="#ff0000" d="M375.4766,-41.5473C370.5529,-53.6358 363.5087,-68.8764 355.1161,-81.2 352.6995,-84.7486 349.9525,-88.278 347.0728,-91.6799"/>
<polygon fill="#ff0000" stroke="#ff0000" points="344.2774,-89.5546 340.2052,-99.3356 349.4881,-94.2289 344.2774,-89.5546"/>
<text text-anchor="middle" x="371.1192" y="-65" font-family="Arial" font-size="18.00" fill="#ff0000">e</text>
</g>
</g>
</svg>
</p><p>En el diagrama de arriba podemos ver una situaci&#xF3;n t&#xED;pica de la programaci&#xF3;n estructurada donde si se produc&#xED;a un error en un m&#xF3;dulo b&#xE1;sico como el <strong><code>m&#xF3;dulo 3313()</code></strong> del ejemplo. Este ten&#xED;a que propagarse hacia arriba a trav&#xE9;s de todos los m&#xF3;dulos devolvi&#xE9;ndose en todas las llamadas. Esto hac&#xED;a, que muchos interfaces tuviesen que devolver informaci&#xF3;n adicional para el error con un interfaz similar al siguiente.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Metodo3</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Metodo33</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Metodo331</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Metodo3313</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">bool</span></span> error<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">string</span></span> mensajeError<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</pre></li>
<li>
<p><strong>Tratamiento asegurado</strong> de errores.</p>
</li>
</ul>
</li>
</ul>
<div style="page-break-after:always;"></div>
<h4 class="mume-header" id="excepciones-en-c">Excepciones en C#</h4>

<ul>
<li>Todas derivan de la clase <strong><code>System.Exception</code></strong></li>
<li>Existen algunas ya muchas <strong><a href="https://docs.microsoft.com/es-es/dotnet/standard/exceptions/?redirectedfrom=MSDN#common-exceptions" target="_blank">predefinidas</a></strong>.</li>
<li>Podemos definir <strong>excepciones propias</strong> mediante el mecanismo de herencia.</li>
</ul>
<h5 class="mume-header" id="generaci%C3%B3n-de-excepciones">Generaci&#xF3;n de excepciones</h5>

<p>Utilizaremos la instrucci&#xF3;n <strong><a href="https://docs.microsoft.com/es-es/dotnet/csharp/language-reference/keywords/throw" target="_blank">throw</a></strong> &#x2192; <strong><code>throw new &lt;TipoExcepci&#xF3;n&gt;(...);</code></strong></p>
<p>Veamos un <strong>ejemplo</strong> en el que vamos a usar la excepci&#xF3;n ya predefinida <strong><a href="https://docs.microsoft.com/es-es/dotnet/api/system.argumentnullexception?view=netcore-3.1" target="_blank">ArgumentNullException</a></strong> que me servir&#xE1; para detectar aquellos tipos referencia que sean <strong><code>null</code></strong> antes de usarlos.<br>
Por ejemplo, en el m&#xE9;todo <strong><code>Diagnostico</code></strong> del bloque anterior que creamos para la clase <strong><code>Sicologo</code></strong> podemos comprobar que el objeto <strong><code>Paciente</code></strong> que nos llega como par&#xE1;metro no sea <strong><code>null</code></strong></p>
<pre data-role="codeBlock" data-info="csharp {highlight=6-7}" class="language-csharp" data-line="6-7"><span class="token keyword">class</span> <span class="token class-name">Sicologo</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Diagnostico</span><span class="token punctuation">(</span><span class="token class-name">Paciente</span> p<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token string">&quot;paciente&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> p <span class="token keyword">switch</span>
        <span class="token punctuation">{</span>
            <span class="token return-type class-name">PacienteAlegre</span> _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">p<span class="token punctuation">.</span><span class="token function">GetNombre</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> le veo estupendamente. Enhorabuena!! no necesita m&#xE1;s terapia.&quot;</span></span><span class="token punctuation">,</span>
            <span class="token return-type class-name">PacienteTriste</span> _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">p<span class="token punctuation">.</span><span class="token function">GetNombre</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> tome fluoxetina 20mg y vuelva en un mes.&quot;</span></span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">p<span class="token punctuation">.</span><span class="token function">GetNombre</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> d&#xE9;jeme que estudie un poco m&#xE1;s su caso y vuelva la semana que viene.&quot;</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">




<div aria-hidden="true" class="line-highlight" data-range="6-7" data-start="6" data-end="7">

</div></div></pre><p>Nadie nos asegura que cuando se llame al m&#xE9;todo Diagn&#xF3;stico no se pase un null como par&#xE1;metro. Si eso sucediese la instrucci&#xF3;n <strong><code>p.GetNombre()</code></strong> generar&#xED;a la excepci&#xF3;n del sistema <strong><code>NullReferenceException</code></strong> finalizando el programa.<br>
Este es uno de los errores m&#xE1;s t&#xED;picos en muchos lenguajes y nosotros lo filtramos generando una excepci&#xF3;n de <strong><code>ArgumentNullException</code></strong> que podremos gestionar de una manera m&#xE1;s espec&#xED;fica.</p>
<blockquote>
<p>&#x270B; F&#xED;jate, que al lanzar la excepci&#xF3;n realmente lo que hacemos es crear una referencia objeto en memoria con <strong><code>new ArgumentNullException(&quot;paciente&quot;);</code></strong>. Este objeto contendr&#xE1; informaci&#xF3;n sobre el error y una referencia al mismo ser&#xE1; pasada al punto donde controlemos el error.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<h5 class="mume-header" id="captura-y-control-de-excepciones">Captura y control de excepciones</h5>

<p>En la gran mayor&#xED;a de lenguajes orientados a objetos se realiza con las palabras reservadas <strong><a href="https://docs.microsoft.com/es-es/dotnet/csharp/language-reference/keywords/try-catch">try y catch</a></strong>.</p>
<p>Una sintaxis b&#xE1;sica de este tipo de estructura podr&#xED;a ser...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp"><span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">// C&#xF3;digo del que quiero controlar errores.</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">TipoDeLaExcepci</span>&#xF3;<span class="token class-name">nACapturar</span> e<span class="token punctuation">)</span> <span class="token keyword">when</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>expresi&#xF3;n con e<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Tratamiento del error o excepci&#xF3;n del tipo TipoDeLaExcepci&#xF3;nACapturar</span>
<span class="token punctuation">}</span>
</pre><p>Donde <strong><code>catch</code></strong> es un punto de control de errores, en el cual el identificador <strong><code>e</code></strong> ser&#xE1; opcional y lo definiremos solo si lo vamos a usar dentro del bloque o en una condici&#xF3;n <strong><code>when</code></strong>.<br>
La cl&#xE1;usula <strong><code>when</code></strong> ser&#xE1; <strong>opcional</strong>.</p>
<blockquote>
<p><strong>Nota:</strong> No podremos, poner ning&#xFA;n bloque <strong><code>catch</code></strong> que no est&#xE9; asociado a uno <strong><code>try</code></strong></p>
</blockquote>
<p>Veamos un ejemplo de sint&#xE1;xis muy <strong>simple</strong> para ver c&#xF3;mo funcionan. Supongamos el siguiente c&#xF3;digo...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp"><span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Introduce un n&#xFA;mero real: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textoNumero <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">double</span></span> n <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>textoNumero<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Tu n&#xFA;mero es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">n</span><span class="token format-string"><span class="token punctuation">:</span>G</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>Si lo ejecutamos e introducimos <strong><code>25</code></strong> obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">Introduce un n&#xFA;mero real: <span class="token number">25</span>
Tu n&#xFA;mero es <span class="token number">25</span>
</pre><p>Pero si introducimos <strong><code>veinticinco</code></strong> obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">Introduce un n&#xFA;mero real: veinticinco
Unhandled exception. System.FormatException: Input string was not <span class="token keyword">in</span> a correct format.
   at System.Number.ThrowOverflowOrFormatException<span class="token punctuation">(</span>ParsingStatus status, TypeCode <span class="token builtin class-name">type</span><span class="token punctuation">)</span>
   at System.Double.Parse<span class="token punctuation">(</span>String s<span class="token punctuation">)</span>
   at EjemploExcepciones.EjemploExcepciones.Main<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">in</span> C:<span class="token punctuation">\</span>ejemplo<span class="token punctuation">\</span>Program.cs:line <span class="token number">15</span>
</pre><p>Si nos fijamos <strong><code>double.Parse(textoNumero);</code></strong> ha generado una excepci&#xF3;n de tipo <strong><code>FormatException</code></strong> porque no ha podido pasar la cadena de entrada <strong><code>&quot;veinticinco&quot;</code></strong> a <strong><code>double</code></strong>.</p>
<blockquote>
<p>&#x270B; <strong>Importante:</strong> Para saber que errores/excepciones puede generar una llamada a un m&#xE9;todo de. Adem&#xE1;s, de ver el error que produce como en el caso anterior. Lo m&#xE1;s normal es consultar la <strong><a href="https://docs.microsoft.com/es-es/dotnet/api/system.double.parse?view=net-5.0">documentaci&#xF3;n del m&#xE9;todo</a></strong> y en apartado <strong>Excepciones</strong> nos lo indicar&#xE1;.</p>
</blockquote>
<p>La excepci&#xF3;n ha sido capturada por el Runtime de C# nos la ha mostrado y ha finalizado la ejecuci&#xF3;n. A efectos pr&#xE1;cticos, es c&#xF3;mo si hubiera un bloque <strong><code>try - catch</code></strong> que englobara todo nuestro c&#xF3;digo y que <em>&apos;barriera&apos;</em> o capturase cualquier error/excepci&#xF3;n que se pudiera producir aunque nosotros no lo hagamos.</p>
<p>Veamos c&#xF3;mo ser&#xED;a el c&#xF3;digo siguiendo la sintaxis del try - catch para capturar la excepci&#xF3;n <strong><code>FormatException</code></strong></p>
<pre data-role="codeBlock" data-info="csharp {highlight=[5,6, 13, 16]}" class="language-csharp" data-line="5,6,13,16"><span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Tendremos que definir la variable textoNumero fuera del bloque try </span>
    <span class="token comment">// si queremos que sea accesible desde el bloque catch.</span>
    <span class="token class-name"><span class="token keyword">string</span></span> textoNumero <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Introduce un n&#xFA;mero real: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textoNumero <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span></span> n <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>textoNumero<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Tu n&#xFA;mero es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">n</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Como no usamos e no lo declaramos.</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Lo siento, el valor &apos;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">textoNumero</span><span class="token punctuation">}</span></span><span class="token string">&apos; no es Real.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">



<div aria-hidden="true" class="line-highlight" data-range="5" data-start="5">
</div></div><div class="line-highlight-wrapper">




<div aria-hidden="true" class="line-highlight" data-range="6" data-start="6">
</div></div><div class="line-highlight-wrapper">











<div aria-hidden="true" class="line-highlight" data-range="13" data-start="13">
</div></div><div class="line-highlight-wrapper">














<div aria-hidden="true" class="line-highlight" data-range="16" data-start="16">
</div></div></pre><p>Si lo ejecutamos e introducimos <strong>&apos;veinticinco&apos;</strong> ahora obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">Introduce un n&#xFA;mero real: veinticinco
Lo siento, el valor <span class="token string">&apos;veinticinco&apos;</span> no es Real.
</pre><p>Tambi&#xE9;n tendremos la opci&#xF3;n de mostrar el mensaje de error que devuelven las BCL a trav&#xE9;s del <strong>objeto</strong> <strong><code>e</code></strong> que contiene la informaci&#xF3;n de la excepci&#xF3;n y que se cre&#xF3; al generarse la misma en el <strong><code>throw</code></strong>.</p>
<pre data-role="codeBlock" data-info="csharp {highlight=11}" class="language-csharp" data-line="11"><span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Introduce un n&#xFA;mero real: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span></span> n <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Tu n&#xFA;mero es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">n</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">









<div aria-hidden="true" class="line-highlight" data-range="11" data-start="11">
</div></div></pre><p>Si lo ejecutamos e introducimos <strong>&apos;veinticinco&apos;</strong> ahora obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">Introduce un n&#xFA;mero real: veinticinco
Input string was not <span class="token keyword">in</span> a correct format.
</pre><blockquote>
<p>&#x270B; <strong>Importante:</strong> Al especificar que capturamos solo la excepci&#xF3;n <strong><code>FormatException</code></strong> solo se entrar&#xE1; en este bloque catch si se produce la misma. Por tanto, cualquier otro error/excepci&#xF3;n ser&#xE1; capturado por el Runtime.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<h6 class="mume-header" id="capturando-excepciones-diferentes">Capturando excepciones diferentes</h6>

<p>Si <strong><code>catch (FormatException e)</code></strong> solo captura las excepciones de formato de entrada incorrecto.<br>
<strong>&#xBF;C&#xF3;mo haremos para controlar diferentes tipos errores/excepciones?</strong></p>
<p>Supongamos el siguiente <strong>ejemplo</strong> donde hemos creado un m&#xE9;todo <strong><code>Divide</code></strong> que genera una excepci&#xF3;n <strong><code>DivideByZeroException</code></strong> al intentar dividir por cero. Pero si nos fijamos en el <strong><code>Main</code></strong> solo gestionamos <strong><code>FormatException</code></strong>.<br>
El programa ser&#xE1; un bucle infinito que siempre nos pedir&#xE1; 2 n&#xFA;meros e intentar&#xE1; dividirlos.</p>
<pre data-role="codeBlock" data-info="csharp {highlight=[6,12,19,21]}" class="language-csharp" data-line="6,12,19,21"><span class="token keyword">class</span> <span class="token class-name">EjemploExcepciones</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> <span class="token function">Divide</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> numerador<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> divisor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>divisor <span class="token operator">&lt;</span> <span class="token number">1e-5</span><span class="token punctuation">)</span> 
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DivideByZeroException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> numerador <span class="token operator">/</span> divisor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">try</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Introduce el numerador: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">double</span></span> numerador <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Introduce el divisor: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">double</span></span> divisor <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;La divisi&#xF3;n es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token function">Divide</span><span class="token punctuation">(</span>numerador<span class="token punctuation">,</span> divisor<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Has introducido un valor que no es un n&#xFA;mero real.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">




<div aria-hidden="true" class="line-highlight" data-range="6" data-start="6">
</div></div><div class="line-highlight-wrapper">










<div aria-hidden="true" class="line-highlight" data-range="12" data-start="12">
</div></div><div class="line-highlight-wrapper">

















<div aria-hidden="true" class="line-highlight" data-range="19" data-start="19">
</div></div><div class="line-highlight-wrapper">



















<div aria-hidden="true" class="line-highlight" data-range="21" data-start="21">
</div></div></pre><p>Al ejecutar el c&#xF3;digo e intentar dividir por cero obtendremos...</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash">Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: <span class="token number">0</span>
Unhandled exception. System.DivideByZeroException: Attempted to divide by zero.
   at EjemploExcepciones.EjemploExcepciones.Divide<span class="token punctuation">(</span>Double numerador, Double divisor<span class="token punctuation">)</span> <span class="token keyword">in</span> C:<span class="token punctuation">\</span>ejemplo<span class="token punctuation">\</span>Program.cs:line <span class="token number">11</span>
   at EjemploExcepciones.EjemploExcepciones.Main<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">in</span> C:<span class="token punctuation">\</span>ejemplo<span class="token punctuation">\</span>Program.cs:line <span class="token number">23</span>
</pre><p>Si nos fijamos el programa finaliza porque la excepci&#xF3;n es capturada por el catch del Runtime que est&#xE1; fuera del bucle infinito.</p>
<p>Para capturar tambi&#xE9;n este error, lo que haremos es a&#xF1;adir <strong>dos bloques</strong> <strong><code>catch</code></strong> <strong>consecutivos</strong> para el mismo bloque <strong><code>try</code></strong>.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp"><span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Has introducido un valor que no es un n&#xFA;mero real.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;No se puede dividir por cero.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p>Al ejecutar ahora con la misma entrada obtendremos...</p>
<pre data-role="codeBlock" data-info="bash {highlight=[3,6]}" class="language-bash" data-line="3,6">Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: <span class="token number">0</span>
No se puede dividir por cero.
Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: cero
Has introducido un valor que no es un n&#xFA;mero real.
Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: <span class="token number">2</span>
La divisi&#xF3;n es <span class="token number">2</span>
Introduce el numerador: <span class="token punctuation">..</span>.
<div class="line-highlight-wrapper">

<div aria-hidden="true" class="line-highlight" data-range="3" data-start="3">
</div></div><div class="line-highlight-wrapper">




<div aria-hidden="true" class="line-highlight" data-range="6" data-start="6">
</div></div></pre><p>F&#xED;jate que ahora capturamos &apos;<em>nosotros</em>&apos; los 2 errores y adem&#xE1;s nos &apos;<em>recuperamos</em>&apos; porque estamos en un bucle infinito.</p>
<blockquote>
<p>&#x270B; Importante: Si el <strong>tipo</strong> del primer bloque <strong><code>catch</code></strong> es una <strong>superclase</strong> del tipo del segundo. <strong>El segundo bloque catch nunca se ejecutar&#xE1;</strong> y adem&#xE1;s nos avisar&#xE1; con un <strong>error de compilaci&#xF3;n</strong>.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<p>Por ejemplo el siguiente c&#xF3;digo ...</p>
<pre data-role="codeBlock" data-info="csharp {highlight=5}" class="language-csharp" data-line="5"><span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Hay un error.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FormatException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Has introducido un valor que no es un n&#xFA;mero real.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DivideByZeroException</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;No se puede dividir por cero.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">



<div aria-hidden="true" class="line-highlight" data-range="5" data-start="5">
</div></div></pre><p>Generar&#xE1; el siguiente error ....</p>
<blockquote>
<p>&#x274C; <strong>&quot;Una cl&#xE1;usula catch previa ya detecta todas las excepciones de este tipo o de tipo superior (&apos;Exception&apos;)&quot;</strong></p>
</blockquote>
<p>ya que todas las excepciones heredan de <strong><code>Exception</code></strong> y por tanto <strong><code>FormatException</code></strong> y <strong><code>DivideByZeroException</code></strong> lo hacen. Lo cual implicar&#xED;a que es un c&#xF3;digo inalcanzable porque cualquier error entrar&#xED;a primero por el primer <strong><code>catch</code></strong>.</p>
<blockquote>
<p>&#x270B; <strong>Importante:</strong> De lo anterior se deduce que siempre podremos los <strong><code>catch</code></strong> excepciones m&#xE1;s concretas primero y a continuaci&#xF3;n las excepciones m&#xE1;s generales.</p>
</blockquote>
<p>Si a&#xF1;adimos un &#xFA;nico bloque catch (Exception e) en el Main controlar&#xED;amos cualquier error/excepci&#xF3;n que se produjese y seguir&#xED;amos con nuestro bucle infinito.</p>
<blockquote>
<p>&#x26A0;&#xFE0F; <strong>Aviso:</strong> Microsoft no nos recomienda hacerlo** fuera del <strong><code>Main</code></strong>, indic&#xE1;ndonos en su <a href="https://docs.microsoft.com/es-es/dotnet/standard/design-guidelines/using-standard-exception-types#exception-and-systemexception">documentaci&#xF3;n</a> que no es una buena pr&#xE1;ctica.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<p>Por tanto, si probamos el siguiente c&#xF3;digo....</p>
<pre data-role="codeBlock" data-info="csharp {highlight=5}" class="language-csharp" data-line="5"><span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Introduce el numerador: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">double</span></span> numerador <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Introduce el divisor: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">double</span></span> divisor <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;La divisi&#xF3;n es </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token function">Divide</span><span class="token punctuation">(</span>numerador<span class="token punctuation">,</span> divisor<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">



<div aria-hidden="true" class="line-highlight" data-range="5" data-start="5">
</div></div></pre><pre data-role="codeBlock" data-info="bash {highlight=[3,6]}" class="language-bash" data-line="3,6">Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: <span class="token number">0</span>
Attempted to divide by zero.
Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: cero
Input string was not <span class="token keyword">in</span> a correct format.
Introduce el numerador: <span class="token number">4</span>
Introduce el divisor: <span class="token number">2</span>
La divisi&#xF3;n es <span class="token number">2</span>
Introduce el numerador: <span class="token punctuation">..</span>.
<div class="line-highlight-wrapper">

<div aria-hidden="true" class="line-highlight" data-range="3" data-start="3">
</div></div><div class="line-highlight-wrapper">




<div aria-hidden="true" class="line-highlight" data-range="6" data-start="6">
</div></div></pre><div style="page-break-after:always;"></div>
<h5 class="mume-header" id="liberando-recursos-con-finally">Liberando recursos con finally</h5>

<p>En ocasiones se pueden dar casos en los que queramos, <strong>independientemente de si ha producido un error o no</strong>, hacer algo siempre despu&#xE9;s de un bloque de instrucciones. Por ejemplo:</p>
<ul>
<li>Liberar un recurso de memoria asociado a un fichero c&#xF3;mo una im&#xE1;gen o una fuente.</li>
<li>Cerrar una conexi&#xF3;n remota o a una base de datos, un fichero abierto por el sistema, etc.</li>
<li>Parar alg&#xFA;n proceso en paralelo iniciado.</li>
</ul>
<p>Para eso tendremos un bloque <strong><code>finally</code></strong>...</p>
<ul>
<li>
<p>El bloque <strong><code>finally</code></strong> es <strong>opcional</strong> y debe estar <strong>asociado a un bloque <code>try</code></strong>.</p>
</li>
<li>
<p>Libera o cierra los recursos usados dentro del un bloque <strong><code>try</code></strong> al que est&#xE1; asociado.</p>
</li>
<li>
<p>El bloque <strong><code>finally</code></strong> <strong>se ejecutar&#xE1; siempre</strong>, tanto si ha ido bien el bloque try, como si ha entrado por alguno de los bloques catch.</p>
</li>
<li>
<p>Se <strong>ejecutar&#xE1; en &#xFA;ltimo lugar</strong> respecto a sus bloques try-catch asociados en su &#xE1;mbito, esto es, despu&#xE9;s del <strong><code>try</code></strong> si todo ha ido bien o despu&#xE9;s del <strong><code>catch</code></strong> correspondiente.</p>
<blockquote>
<p>&#x270B; Se puede tener un bloque <strong><code>try</code></strong> seguido de un <strong><code>finally</code></strong> (sin bloques catch), y realizar la captura de la excepci&#xF3;n en un catch de &#xE1;mbito m&#xE1;s externo o incluso por el Runtime. En este caso, el finally se ejecutar&#xE1; siempre y antes que el catch del &#xE1;mbito superior.</p>
</blockquote>
<p>Ve&#xE1;moslo en un simples ejemplos de c&#xF3;digo esquematizado.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp">    <span class="token comment">// Si correcto: BT -&gt; BF               // Si correcto: BT1 -&gt; BT2         </span>
    <span class="token comment">// Si error:    BT -&gt; BC -&gt; BF         // Si error:    BT1 -&gt; BT2 -&gt; BF2 -&gt; BC1</span>
    <span class="token keyword">try</span>                                    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>                                      <span class="token punctuation">{</span>
        <span class="token comment">// BT                                  // BT1</span>
    <span class="token punctuation">}</span>                                          <span class="token keyword">try</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>                                 <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>                                              <span class="token comment">// BT2</span>
        <span class="token comment">// BC                                  }</span>
    <span class="token punctuation">}</span>                                          <span class="token keyword">finally</span>
    <span class="token keyword">finally</span>                                    <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>                                              <span class="token comment">// BF2</span>
        <span class="token comment">// BF                                  }</span>
    <span class="token punctuation">}</span>                                      <span class="token punctuation">}</span>
                                           <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
                                           <span class="token punctuation">{</span>
                                               <span class="token comment">// BC1</span>
                                           <span class="token punctuation">}</span>                                    
</pre></li>
</ul>
<div style="page-break-after:always;"></div>
<h6 class="mume-header" id="ejemplo-pr%C3%A1ctico-de-uso-de-finally">Ejemplo pr&#xE1;ctico de uso de finally</h6>

<p>Vemos un ejemplo t&#xED;pico de &#xFA;so de <strong><code>finally</code></strong> que se nos va a dar en en el futuro.</p>
<blockquote>
<p><strong>Nota:</strong> C&#xF3;mo a&#xFA;n no hemos visto E/S con ficheros, lee los comentarios para entender que estamos haciendo en cada bloque y el porqu&#xE9; de cada uno. Este ejemplo <strong>solo pretende aplicar un esquema pr&#xE1;ctico de uso real de try - catch - finally</strong> y no abordar la lectura de ficheros en este punto del curso.</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LeeFichero</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> posicion<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">char</span></span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">StreamReader</span> streamReader <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">string</span></span> ruta <span class="token operator">=</span> <span class="token string">@&quot;c:\test.txt&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Intentamos abrir un fichero</span>
        streamReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span>ruta<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Si llegamos aqu&#xED; le hemos dicho al SO que ocupamos un recurso </span>
        <span class="token comment">// (En nuestro caso un fichero) y por tanto deberemos liberarlo </span>
        <span class="token comment">// en el bloque finally, tanto si todo va bien como sino.</span>

        <span class="token comment">// Intentamos leer el fichero (podemos obtener una excepci&#xF3;n de lectura)</span>
        streamReader<span class="token punctuation">.</span><span class="token function">ReadBlock</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> posicion<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span><span class="token punctuation">)</span>  <span class="token comment">// Capturamos el error de que el fichero no existe.</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;El fichero </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ruta</span><span class="token punctuation">}</span></span><span class="token string"> no existe.&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token comment">// Capturamos un error de lectura devuelto por el dispositivo.</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Error leyendo de </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ruta</span><span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">e<span class="token punctuation">.</span>Message</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span> <span class="token comment">// ESTE BLOQUE SE EJECUTAR&#xC1; SIEMPRE</span>
    <span class="token punctuation">{</span>        
        <span class="token comment">// En el caso de que el fichero no exista, llegaremos aqu&#xED; desde el</span>
        <span class="token comment">// catch (FileNotFoundException). Por tanto, la referencia streamReader ser&#xE1; null </span>
        <span class="token comment">// y no deberemos liberar el recurso con Close().</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>streamReader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token comment">// En el caso de que el fichero exista, llegaremos aqu&#xED;:</span>
            <span class="token comment">//  1. Despu&#xE9;s de haber le&#xED;do correctamente el fichero.</span>
            <span class="token comment">//  2. Tras una excepci&#xF3;n de lectura capturada en el catch (IOException e) y en</span>
            <span class="token comment">// ambos casos deberemos liberar el recurso (el fichero) indic&#xE1;ndoselo al SO.</span>
            streamReader<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>

      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>