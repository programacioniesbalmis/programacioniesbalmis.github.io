<!DOCTYPE html><html><head>
      <title>Programación 1º DAM Tema 9.3</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="tema-93">Tema 9.3 </h1>
<p>Descargar estos apuntes en <a href="./Tema9_3.pdf">pdf</a> o <a href="./Tema9_3.html">html</a></p>
<h2 id="índice">Índice </h2>

<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#sobrecarga-o-redefinición-de-operadores" class="md-toc-link"><p>Sobrecarga o redefinición de operadores</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#operadores-binarios-aritméticos" class="md-toc-link">
            <p>Operadores binarios aritméticos</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#operadores-binarios-de-comparación" class="md-toc-link">
            <p>Operadores binarios de comparación</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#operadores-cast" class="md-toc-link">
            <p>Operadores cast</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#operador-unario-de-pre-y-post-incremetodecremento" class="md-toc-link">
            <p>Operador unario de pre y post incremeto/decremento</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#anexo-de-ampliación-opcional" class="md-toc-link"><p>Anexo de ampliación opcional</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#caso-especial-del-operador-de-indización" class="md-toc-link">
            <p>Caso especial del operador de indización</p>

          </a></div>
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<h2 id="sobrecarga-o-redefinición-de-operadores">Sobrecarga o redefinición de operadores </h2>
<p>En los primeros temas ya vimos los operadores unarios, binarios, de cast, etc… usados con tipos simples.</p>
<p>Para dos enteros la suma binaria <strong><code>+</code></strong> los sumaba <strong><code>2 + 3 → 5</code></strong> y para el caso del tipo cadena esta suma significaba <strong>concatenación</strong>, por ejemplo <strong><code>"Hola " + "Caracola" → "Hola Caracola"</code></strong>.</p>
<p>Entonces... <strong>¿Podemos cambiar el sentido de la suma según el tipo?</strong></p>
<p>La respuesta es <strong>sí</strong>. En algunos lenguajes orientados a objetos como <strong>C++</strong>, <strong>C#</strong>, <strong>Python</strong> o <strong>Kotlin</strong> podremos darle el significado que queramos a cualquiera de los operadores existentes, cuando lo apliquemos a dos objetos de una clase definida por nosotros (<strong>siempre y cuando la operación tenga sentido</strong>).</p>
<blockquote>
<p>📌 <strong>Nota:</strong> Los operadores aritméticos, lógicos y de comparación son redefinibles pero, no todos los operadores se pueden redefinir como (<strong><code>new, =</code></strong>). Además, algunos como <strong><code>[ ]</code></strong> no lo son con esta sintaxis.</p>
</blockquote>
<p>Usaremos la siguiente sintaxis general...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token operator">&lt;</span>tipoDevuelto<span class="token operator">&gt;</span> <span class="token generic-method"><span class="token function">operator</span> <span class="token generic class-name"><span class="token punctuation">&lt;</span>simboloOperacion<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>operandos<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token operator">&lt;</span>cuerpo de método de clase<span class="token operator">&gt;</span> 
<span class="token punctuation">}</span>
</code></pre><p>Vamos a ver cómo aplicar esta sintaxis a través de un ejemplo, que nos mostrará cómo ampliar las capacidades del lenguaje a través de la sobrecarga de operadores.</p>
<p>Supongamos que queremos ampliar nuestros tipos numéricos en el lenguaje, para poder manejar <a href="https://es.wikipedia.org/wiki/N%C3%BAmero_complejo#Representaci%C3%B3n_bin%C3%B3mica">números complejos en su forma binómica</a>.</p>
<p>Para ello podríamos definir un nuevo tipo valor de la siguiente manera ...</p>
<blockquote>
<p>📌 <strong>Nota:</strong> Aunque nosotros hemos definido la clase como <strong><code>struct</code></strong> porque el lenguaje nos lo permite. Si la definición la hiciésemos con una clase (tipo referencia) sería también perféctamente válido.</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">Complejo</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> ParteReal <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> ParteImaginaria <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token function">Complejo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-double">double</span></span> parteReal<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-double">double</span></span> parteImaginaria<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ParteReal <span class="token operator">=</span> parteReal<span class="token punctuation">;</span>
        ParteImaginaria <span class="token operator">=</span> parteImaginaria<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-string">string</span></span> texto <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ParteReal</span><span class="token format-string"><span class="token punctuation">:</span>G</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
        texto <span class="token operator">+=</span> ParteImaginaria <span class="token operator">&gt;</span> <span class="token number">0D</span> <span class="token punctuation">?</span> <span class="token string">" + "</span> <span class="token punctuation">:</span> <span class="token string">" - "</span><span class="token punctuation">;</span>
        texto <span class="token operator">+=</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>ParteImaginaria<span class="token punctuation">)</span></span><span class="token format-string"><span class="token punctuation">:</span>G</span><span class="token punctuation">}</span></span><span class="token string">i"</span></span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> texto<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="operadores-binarios-aritméticos">Operadores binarios aritméticos </h3>
<p>Vamos ahora a implementar el operador binario <strong><code>+</code></strong> que sumará dos números complejos.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Complejo <span class="token keyword keyword-operator">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Complejo</span> c1<span class="token punctuation">,</span> <span class="token class-name">Complejo</span> c2<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-double">double</span></span> pR <span class="token operator">=</span> c1<span class="token punctuation">.</span>ParteReal <span class="token operator">+</span> c2<span class="token punctuation">.</span>ParteReal<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword keyword-double">double</span></span> pI <span class="token operator">=</span> c1<span class="token punctuation">.</span>ParteImaginaria <span class="token operator">+</span> c2<span class="token punctuation">.</span>ParteImaginaria<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Complejo</span><span class="token punctuation">(</span>pR<span class="token punctuation">,</span> pI<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><blockquote>
<p>✋ <strong>Importante:</strong> fíjate que la operación dará como resultado un instáncia nueva del tipo (<strong><code>return new Complejo(pR, pI)</code></strong>). Esto no sucede solo porque el tipo sea valor. Si estuviéramos implementándolo a través de una clase <strong>sucedería lo mismo</strong>.</p>
</blockquote>
<p>Si queremos <a href="https://www.fisicalab.com/apartado/operaciones-complejos-binomica#suma-numeros-complejos">sumar 2 complejos</a> ahora podremos hacerlo con esta '<em>extensión del lenguaje</em>' de forma más intuitiva de la siguiente manera...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token class-name">Complejo</span> c1 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Complejo</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Complejo</span> c2 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Complejo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Complejo</span> c3 <span class="token operator">=</span> c1 <span class="token operator">+</span> c2<span class="token punctuation">;</span> <span class="token comment">// Sumo de forma 'amigable'.</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>c3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Mostrará 8 + 4i</span>
</code></pre><p>El resto de operadores binarios aritméticos se implementarían de forma análoga.</p>
<div style="page-break-after:always;"></div>
<h3 id="operadores-binarios-de-comparación">Operadores binarios de comparación </h3>
<p>Vamos a ver el caso especial de los operadores <strong><code>==</code></strong> y <strong><code>!=</code></strong>. Estos operadores conjugados deben definirse juntos ya que si definimos uno y no el otro obtendremos un error. Además, al definirlos, también deberemos invalidar los métodos virtuales <strong><code>Equals</code></strong> y <strong><code>GetHashCode</code></strong> de la clase <strong><code>Object</code></strong> puesto que no hacerlo, nos generará un <strong>aviso</strong> del compilador de C# indicándonos que es recomendable hacerlo.</p>
<ol>
<li>
<p>Invalidaremos <strong><code>int GetHashCode()</code></strong> de tal manera que me devolverá un valor entero que <strong>identifique de forma univoca a los objetos con un determinado estado</strong>. En nuestro caso los números complejos con unos determinados valores de parte real e imaginaria.<br>
Una forma simple es transformar el objeto en una cadena que identifique el objeto y generar el <strong>Hash</strong> de la cadena ya que la clase <strong><code>String</code></strong> invalida este método.<br>
Podríamos usar el <strong><code>ToString()</code></strong> pero es mejor usar una representación como cadena más específica para la comparación. Por ejemplo, para números complejos, la parte real e imaginaria concatenadas con dos decimales.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> <span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ParteReal</span><span class="token format-string"><span class="token punctuation">:</span>F2</span><span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ParteImaginaria</span><span class="token format-string"><span class="token punctuation">:</span>F2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></li>
<li>
<p>Invalidaremos <strong><code>bool Equals(object obj)</code></strong> para que me diga si dos números complejos son iguales.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">Equals</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-object">object</span></span> obj<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> obj <span class="token keyword keyword-is">is</span> <span class="token class-name">Complejo</span> c 
    <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>ParteReal <span class="token operator">==</span> ParteReal <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>ParteImaginaria <span class="token operator">==</span> ParteImaginaria<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></li>
<li>
<p>Implementamos los operadores <strong><code>==</code></strong> y <strong><code>!=</code></strong> y re-usamos <strong><code>Equals</code></strong> para la comparación.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">Complejo</span> c1<span class="token punctuation">,</span> <span class="token class-name">Complejo</span> c2<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> c1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token class-name">Complejo</span> c1<span class="token punctuation">,</span> <span class="token class-name">Complejo</span> c2<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token operator">!</span>c1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></li>
</ol>
<div style="page-break-after:always;"></div>
<h3 id="operadores-cast">Operadores cast </h3>
<ol>
<li>
<p>Operador de <strong>cast explícito</strong>:</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token comment">// Definición del cast explícito a float</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-explicit">explicit</span> <span class="token keyword keyword-operator">operator</span> <span class="token keyword keyword-float">float</span><span class="token punctuation">(</span><span class="token class-name">Complejo</span> c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Convert<span class="token punctuation">.</span><span class="token function">ToSingle</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>ParteReal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Uso</span>
<span class="token class-name">Complejo</span> c <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Complejo</span><span class="token punctuation">(</span><span class="token number">3.7</span><span class="token punctuation">,</span> <span class="token number">2.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name"><span class="token keyword keyword-float">float</span></span> f <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-float">float</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>     <span class="token comment">// Asignará 3.7 a f</span>
<span class="token class-name"><span class="token keyword keyword-double">double</span></span> d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-double">double</span><span class="token punctuation">)</span>c<span class="token punctuation">;</span>	<span class="token comment">// Daría error porque no está definido</span>
                        <span class="token comment">// el operador de cast explícito a double.</span>
</code></pre></li>
<li>
<p>Operador de <strong>cast implícito</strong>.</p>
<blockquote>
<p>💀 <strong>Cuidado:</strong> No implementar pues puede dar lugar a confusión.</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token comment">// Definición del cast implícito a double</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-implicit">implicit</span> <span class="token keyword keyword-operator">operator</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">(</span><span class="token class-name">Complejo</span> c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>ParteReal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Uso</span>
<span class="token class-name">Complejo</span> c <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Complejo</span><span class="token punctuation">(</span><span class="token number">3.7</span><span class="token punctuation">,</span> <span class="token number">2.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name"><span class="token keyword keyword-double">double</span></span> d <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token comment">// Asignará 3.7 a d sin darnos error.</span>
</code></pre></li>
</ol>
<h3 id="operador-unario-de-pre-y-post-incremetodecremento">Operador unario de pre y post incremeto/decremento </h3>
<p>Cuando se usen de forma <strong>prefija</strong> se evaluará el nuevo objeto creado, y cuando se usen de forma <strong>postifja</strong>, el compilador lo que hará será evaluar el objeto original que se les pasó como parámetro en lugar del creado en el <strong><code>return</code></strong>.</p>
<blockquote>
<p>📌 <strong>Nota:</strong> En ambos casos tras la evaluación, <strong><code>c</code></strong> pasará a referenciar al objeto creado en el <strong><code>return</code></strong>.</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token comment">// Definición del operador unario ++ (pre y post incremeto)</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Complejo <span class="token keyword keyword-operator">operator</span> <span class="token operator">++</span> <span class="token punctuation">(</span><span class="token class-name">Complejo</span> c<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Complejo</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>ParteReal <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>ParteImaginaria<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Uso</span>
<span class="token class-name">Complejo</span> c <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Complejo</span><span class="token punctuation">(</span><span class="token number">1d</span><span class="token punctuation">,</span> <span class="token number">1d</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// cAux será una copia de c y después c será el nuevo objeto incrementado.</span>
<span class="token class-name">Complejo</span> cAux <span class="token operator">=</span> c<span class="token operator">++</span><span class="token punctuation">;</span> 
<span class="token comment">// c será el nuevo objeto incrementado y cAux será una copia del nuevo c.</span>
<span class="token class-name">Complejo</span> cAux <span class="token operator">=</span> <span class="token operator">++</span>c<span class="token punctuation">;</span>
</code></pre><div style="page-break-after:always;"></div>
<blockquote>
<p>🎓 <strong>Caso de estudio:</strong></p>
<p>Vamos a crear las <strong>clases</strong> <strong><code>Centímetros</code></strong> y <strong><code>Metros</code></strong> para poder hacer operaciones seguras y semánticamente elegantes con ambos tipos de unidades. Para ello, vamos a seguir las siguientes especificaciones.</p>
<p>Ambas poseerán una <strong>propiedad double de solo lectura</strong> denominada <strong><code>Valor</code></strong> que almacenará el valor de las unidades que estamos representando.</p>
<p>Vamos a redefinir los siguiente operadores:</p>
<ol>
<li>
<p>Operadores <strong>binarios, <code>+</code> (suma) y <code>-</code> (resta)</strong> que permitan desde ambas clases sumar o restar centímetros con metros y viceversa, permitiendo aplicar por tanto la operación conmutativa de la operación.</p>
<p>Pare ello, deberemos tener en cuenta que igual que  cuando sumamos <strong><code>int ± double → double</code></strong>, deberemos decidir a qué se evalúa la suma de<br>
<strong><code>Centímetros ± Metros</code></strong> y viceversa. En nuestro caso, vamos a evaluar tanto la suma y como la resta a <strong><code>Centímetros</code></strong>. Esto es importante porque una misma operación no se puede evaluar a dos tipos diferentes. Por tanto tendremos que.</p>
<ul>
<li><strong><code>Metros ± Metros → Metros</code></strong></li>
<li><strong><code>Centímetros ± Centímetros → Centímetros</code></strong></li>
<li><strong><code>Centímetros ± Metros → Centímetros</code></strong></li>
<li><strong><code>Metros ± Centímetros → Centímetros</code></strong></li>
</ul>
</li>
<li>
<p>Operadores <strong>de cast explícitos</strong>:</p>
<ul>
<li>En la clase <strong><code>Centímetros</code></strong>: <code>(Metros)tipoCm;</code> y <code>(double)tipoCm;</code></li>
<li>En la clase <strong><code>Metros</code></strong>: <code>(Centímetros)tipoM;</code> y <code>(double)tipoM</code>;</li>
</ul>
</li>
<li>
<p>Operadores de comparación <strong><code>==</code></strong> y <strong><code>!=</code></strong> así como la invalidación de los métodos de <strong><code>Object</code></strong> asociados a estos. Ten en cuanta además todas las combinaciones posibles en la comparación: <strong><code>Metros con Metros</code></strong>, <strong><code>Centímetros con Centímetros</code></strong>, <strong><code>Metros con Centímetros</code></strong> y <strong><code>Centímetros con Metros</code></strong>.</p>
</li>
<li>
<p>Implementa un pequeño programa de test para probar todos los operadores implementados.</p>
</li>
</ol>
<p>✋ Intenta usar <strong>cuerpos de expresion</strong> en la medida de lo posible y siempre que lo consideres apropiado.<br>
✋ Intenta <strong>reutilizar al máximo el código</strong>. Esto es, usar operadores ya implementados para la implementación de otros, ya que en algún caso el cuerpo de expresión se puede repetir o es análogo.<br>
En las siguientes páginas tienes una propuesta de solución comentada para que puedas compararla con la tuya o echarle un vistazo si te quedas bloqueado/a.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<blockquote>
<p>🎓 <strong>Caso de estudio (Continuación)</strong></p>
<p>📌 <strong>Nota:</strong> En esta propuesta de solución hemos usado <strong>cuerpos de expresión</strong>, ya que la mayoría de métodos retornan únicamente una expresión y por tanto es un caso de uso adecuado de los mismos.<br>
👁️ En algunos casos para que la implementación del cuerpo de expresión no desbordase por la derecha, se ha bajado la parte del <strong><code>=&gt; &lt;cuerpo de expresión&gt;;</code></strong> a la siguiente línea.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Metros</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> Valor <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token function">Metros</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-double">double</span></span> metros<span class="token punctuation">)</span> <span class="token punctuation">{</span> Valor <span class="token operator">=</span> metros<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Fíjate que este tipo de operadores sencillos es un buen caso </span>
    <span class="token comment">// de uso adecuado de cuerpos de expresión.</span>
    <span class="token comment">// Invalidación de ToString para que sepamos mostrarlo con sus unidades.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Valor</span><span class="token punctuation">}</span></span><span class="token string"> m"</span></span><span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de los operadores de cast explícito de Metros a Centímetros y double.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-explicit">explicit</span> <span class="token keyword keyword-operator">operator</span> Centí<span class="token function">metros</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m<span class="token punctuation">)</span> 
    <span class="token operator">=&gt;</span> <span class="token keyword keyword-new">new</span> Centí<span class="token function">metros</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>Valor <span class="token operator">*</span> <span class="token number">100d</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-explicit">explicit</span> <span class="token keyword keyword-operator">operator</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Valor<span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de la suma y la resta binaria de Metros.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Metros <span class="token keyword keyword-operator">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m1<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m2<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Metros</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>Valor <span class="token operator">+</span> m2<span class="token punctuation">.</span>Valor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Metros <span class="token keyword keyword-operator">operator</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m1<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m2<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Metros</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>Valor <span class="token operator">-</span> m2<span class="token punctuation">.</span>Valor<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de operadores de comparación (Iguales hasta 2 decimales)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> <span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Valor</span><span class="token format-string"><span class="token punctuation">:</span>F2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">Equals</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-object">object</span></span> obj<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> obj <span class="token keyword keyword-is">is</span> <span class="token class-name">Metros</span> m <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>Valor <span class="token operator">-</span> m<span class="token punctuation">.</span>Valor<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1e-2</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m1<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m1<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span> m1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de la comparación de Metros con Centímetros, re-usamos </span>
    <span class="token comment">// las implementaciones del cast explícito a Metros y la comparación de </span>
    <span class="token comment">// Metros con Metros.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> cm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m <span class="token operator">==</span> <span class="token punctuation">(</span>Metros<span class="token punctuation">)</span>cm<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> cm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m <span class="token operator">!=</span> <span class="token punctuation">(</span>Metros<span class="token punctuation">)</span>cm<span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de la comparación de Centímetros con Metros, re-usamos </span>
    <span class="token comment">// la implementación de la comparación de Metros con Centímetros.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> cm<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m <span class="token operator">==</span> cm<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> cm<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m <span class="token operator">!=</span> cm<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></blockquote>
<div style="page-break-after:always;"></div>
<blockquote>
<p>🎓 <strong>Caso de estudio (Continuación)</strong></p>
<p>📌 <strong>Nota:</strong> Hemos dejado en esta clase todos los operadores binarios que se evalúan a Centímetros y los de comparación que comparan Centímetros con Centímetros.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Cent</span>ímetros
<span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-double">double</span></span> Valor <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> Centí<span class="token function">metros</span><span class="token punctuation">(</span><span class="token keyword keyword-double">double</span> centímetros<span class="token punctuation">)</span> <span class="token punctuation">{</span>  Valor <span class="token operator">=</span> centímetros<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Valor</span><span class="token punctuation">}</span></span><span class="token string"> cm"</span></span><span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de los operadores de cast explícito de Centímetros a Metros y double.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-explicit">explicit</span> <span class="token keyword keyword-operator">operator</span> <span class="token function">Metros</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Metros</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Valor <span class="token operator">/</span> <span class="token number">100d</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-explicit">explicit</span> <span class="token keyword keyword-operator">operator</span> <span class="token keyword keyword-double">double</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Valor<span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de la suma y la resta binaria de Centímetros.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Centímetros <span class="token keyword keyword-operator">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c1<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> c2<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> <span class="token keyword keyword-new">new</span> Centí<span class="token function">metros</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span>Valor <span class="token operator">+</span> c2<span class="token punctuation">.</span>Valor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Centímetros <span class="token keyword keyword-operator">operator</span> <span class="token operator">-</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c1<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> c2<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> <span class="token keyword keyword-new">new</span> Centí<span class="token function">metros</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span>Valor <span class="token operator">-</span> c2<span class="token punctuation">.</span>Valor<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de la suma y resta binaría de Centímetros con Metros reutilizando </span>
    <span class="token comment">// el código ya implementado de cast a Centímetros, así como la suma y resta  </span>
    <span class="token comment">// de Centímetros ya implementadas para no repetirnos y rehusar código.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Centímetros <span class="token keyword keyword-operator">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m<span class="token punctuation">)</span> 
    <span class="token operator">=&gt;</span> c <span class="token operator">+</span> <span class="token punctuation">(</span>Centímetros<span class="token punctuation">)</span>m<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Centímetros <span class="token keyword keyword-operator">operator</span> <span class="token operator">-</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c<span class="token punctuation">,</span> <span class="token class-name">Metros</span> m<span class="token punctuation">)</span> 
    <span class="token operator">=&gt;</span> c <span class="token operator">-</span> <span class="token punctuation">(</span>Centímetros<span class="token punctuation">)</span>m<span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de la suma y resta binaría de Metros con Centímetros para tener</span>
    <span class="token comment">// en cuenta así la conmutatividad de la operación.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Centímetros <span class="token keyword keyword-operator">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> c<span class="token punctuation">)</span> 
    <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Centímetros<span class="token punctuation">)</span>m <span class="token operator">+</span> c<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Centímetros <span class="token keyword keyword-operator">operator</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token class-name">Metros</span> m<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> c<span class="token punctuation">)</span> 
    <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Centímetros<span class="token punctuation">)</span>m <span class="token operator">-</span> c<span class="token punctuation">;</span>

    <span class="token comment">// Redefinición de operadores de comparación (Iguales hasta 2 decimales)</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> <span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Valor</span><span class="token format-string"><span class="token punctuation">:</span>F2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">Equals</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-object">object</span></span> obj<span class="token punctuation">)</span>
    <span class="token operator">=&gt;</span> obj <span class="token keyword keyword-is">is</span> <span class="token class-name">Cent</span>ímetros cm <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>Valor <span class="token operator">-</span> cm<span class="token punctuation">.</span>Valor<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1e-2</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c1<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> c2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> c1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span>Centí<span class="token class-name">metros</span> c1<span class="token punctuation">,</span> Centí<span class="token class-name">metros</span> c2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>c1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></blockquote>
<div style="page-break-after:always;"></div>
<blockquote>
<p>🎓 <strong>Caso de estudio (Continuación)</strong></p>
<p>Vamos a realizar un programa principal para probar la implementación anterior.</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">CasoDeEstudio</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> c1 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> Centí<span class="token function">metros</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> c2 <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> Centí<span class="token function">metros</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> m <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Metros</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c1</span><span class="token punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c1 <span class="token operator">+</span> m</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c1</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m <span class="token operator">+</span> c1</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> == </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c1</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m <span class="token operator">==</span> c1</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> == </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c2</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m <span class="token operator">==</span> c2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> != </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c2</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m <span class="token operator">!=</span> c2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m <span class="token operator">+</span> c1</span><span class="token punctuation">}</span></span><span class="token string"> == </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c2 <span class="token operator">+</span> c1</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m <span class="token operator">+</span> c1 <span class="token operator">==</span> c2 <span class="token operator">+</span> c1</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// De izquierda a derecha...</span>
        <span class="token comment">//      Suma m con m y se evalúa a m</span>
        <span class="token comment">//      Suma m con cm y se evalúa a cm</span>
        <span class="token comment">//      Suma cm con m y se evalúa a cm</span>
        <span class="token comment">//      Suma cm con cm y se evalúa a cm</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c1</span><span class="token punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c2</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m <span class="token operator">+</span> m <span class="token operator">+</span> c1 <span class="token operator">+</span> m <span class="token operator">+</span> c2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token punctuation">(</span>Centímetros<span class="token punctuation">)</span>m</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c1</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token punctuation">(</span>Metros<span class="token punctuation">)</span>c1</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">m</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token punctuation">(</span><span class="token keyword keyword-double">double</span><span class="token punctuation">)</span>m</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c1</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token punctuation">(</span><span class="token keyword keyword-double">double</span><span class="token punctuation">)</span>c1</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>La salida de ejecutar el programa anterior será la siguiente...</p>
<pre data-role="codeBlock" data-info="bash {.line-numbers}" class="language-bash bash line-numbers"><code><span class="token number">25</span> cm + <span class="token number">2</span> m <span class="token operator">=</span> <span class="token number">225</span> cm
<span class="token number">2</span> m + <span class="token number">25</span> cm <span class="token operator">=</span> <span class="token number">225</span> cm
<span class="token number">2</span> m <span class="token operator">==</span> <span class="token number">25</span> cm <span class="token operator">=</span> False
<span class="token number">2</span> m <span class="token operator">==</span> <span class="token number">200</span> cm <span class="token operator">=</span> True
<span class="token number">2</span> m <span class="token operator">!=</span> <span class="token number">200</span> cm <span class="token operator">=</span> False
<span class="token number">225</span> cm <span class="token operator">==</span> <span class="token number">225</span> cm <span class="token operator">=</span> True
<span class="token number">2</span> m + <span class="token number">2</span> m + <span class="token number">25</span> cm + <span class="token number">2</span> m + <span class="token number">200</span> cm <span class="token operator">=</span> <span class="token number">825</span> cm
<span class="token number">2</span> m <span class="token operator">=</span> <span class="token number">200</span> cm
<span class="token number">25</span> cm <span class="token operator">=</span> <span class="token number">0,25</span> m
<span class="token number">2</span> m <span class="token operator">=</span> <span class="token number">2</span>
<span class="token number">25</span> cm <span class="token operator">=</span> <span class="token number">25</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></blockquote>
<div style="page-break-after:always;"></div>
<h2 id="anexo-de-ampliación-opcional">Anexo de ampliación opcional </h2>
<h3 id="caso-especial-del-operador-de-indización">Caso especial del operador de indización </h3>
<p>El operados de indización, también conocidos como <strong>indizadores</strong>, me permiten mapear o indexar datos de un determinado tipo dentro de una clase utilizando el doble corchete <strong><code>[]</code></strong> como en las tablas. Es un concepto muy parecido al de las <strong>propiedades</strong> ya que podremos establecer (set) u obtener (get) un valor con el operador.</p>
<p>Una vez definido, este operador lo aplicaremos a los <strong>objetos instanciados</strong> de dicha clase. Además, para indexar <strong>no utilizaremos necesariamente un entero como índice</strong>, sino que también podremos utilizar otros tipos como: <strong>cadenas</strong>, <strong>tipos enumerados</strong>, etc.</p>
<p>Como hemos comentado la sintaxis básica es muy similar a la de las propiedades. Además, también podremos usar la sintáxis de cuerpos de expresión de forma análoga...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token operator">&lt;</span>tipoDelIndizador<span class="token operator">&gt;</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>parámetrosQueServiránDeÍndice<span class="token operator">&gt;</span><span class="token punctuation">]</span> 
<span class="token punctuation">{</span>
    <span class="token keyword keyword-set">set</span> 
    <span class="token punctuation">{</span>
        <span class="token comment">// Instrucciones para cambiar un "dato" del objeto según el índice o índices.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-get">get</span> 
    <span class="token punctuation">{</span>
        <span class="token comment">// Instrucciones para acceder a un "dato" del objeto según el índice o índices.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>tipoDelIndizador<span class="token operator">&gt;</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>parámetrosQueServiránDeÍndice<span class="token operator">&gt;</span><span class="token punctuation">]</span> 
<span class="token punctuation">{</span>
    <span class="token keyword keyword-set">set</span> <span class="token operator">=&gt;</span> <span class="token comment">// Expresión para cambiar un "dato". Se evaluará a void.</span>
    <span class="token keyword keyword-get">get</span> <span class="token operator">=&gt;</span> <span class="token comment">// Expresión para acceder a un "dato". Se evaluará a &lt;tipoDelIndizador&gt;.</span>
<span class="token punctuation">}</span>
</code></pre><p>Un posible uso podría ser encapsular o envolver el acceso a una tabla de datos dentro de una clase.</p>
<p>Por ejemplo, supongamos una clase simplificada <strong><code>Mago</code></strong> que contenga su <strong>nombre</strong> y una serie de habilidades adquiridas, de tal manera que cada una estará descrita por un tipo enumerado <strong><code>Habilidad</code></strong> definido de forma anidada en <strong><code>Mago</code></strong>.<br>
Además, querremos definir un indizador para los objetos <strong><code>Mago</code></strong> que me permita acceder o modificar dicha habilidad utilizando como índice el propio enumerado y de esta manera evitar excepciones del tipo <a href="https://docs.microsoft.com/es-es/dotnet/api/system.indexoutofrangeexception">IndexOutOfRangeException</a>.</p>
<p>Una posible implementación de la clase <strong><code>Mago</code></strong> podría ser ...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Mago</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-enum">enum</span> <span class="token class-name">Habilidad</span> <span class="token punctuation">{</span> Sabiduría<span class="token punctuation">,</span> Poder<span class="token punctuation">,</span> Destreza<span class="token punctuation">,</span> Energía <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> Nombre <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-ushort">ushort</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Valores <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token function">Mago</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> nombre<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Nombre <span class="token operator">=</span> nombre<span class="token punctuation">;</span>
        <span class="token comment">// Dimensionamos el array a los valores del enumerado.</span>
        Valores <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-ushort">ushort</span></span><span class="token punctuation">[</span>Enum<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Habilidad</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Fíjate que el índice en este caso no será un entero sino el</span>
    <span class="token comment">// del tipo enumerado de la habilidad.</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-ushort">ushort</span></span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token class-name">Habilidad</span> habilidad<span class="token punctuation">]</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-get">get</span> <span class="token operator">=&gt;</span> Valores<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>habilidad<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-set">set</span> <span class="token operator">=&gt;</span> Valores<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>habilidad<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-value">value</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-string">string</span></span> texto <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"Habilidades de </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Nombre</span><span class="token punctuation">}</span></span><span class="token string">:\n"</span></span><span class="token punctuation">;</span>        
        <span class="token comment">// Fíjate que con this[habilidad] estamos usando el indizador que</span>
        <span class="token comment">// acabamos de definir sobre objeto this para acceder al valor de la habilidad.</span>
        <span class="token keyword keyword-foreach">foreach</span><span class="token punctuation">(</span><span class="token class-name">Habilidad</span> habilidad <span class="token keyword keyword-in">in</span> Enum<span class="token punctuation">.</span><span class="token function">GetValues</span><span class="token punctuation">(</span><span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Habilidad</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            texto <span class="token operator">+=</span> <span class="token interpolation-string"><span class="token string">$"\t</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">habilidad</span><span class="token punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword keyword-this">this</span><span class="token punctuation">[</span>habilidad<span class="token punctuation">]</span></span><span class="token punctuation">}</span></span><span class="token string">\n"</span></span><span class="token punctuation">;</span>
        <span class="token comment">// Nos mostrará siempre las habilidades de forma correcta aunque cambiemos </span>
        <span class="token comment">// los identificadores en el enumerado.</span>
        <span class="token keyword keyword-return">return</span> texto<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Podemos testear nuestra definición de <strong><code>Mago</code></strong> con indizador con este sencillo <strong><code>Main()</code></strong>...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> m <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Mago</span><span class="token punctuation">(</span><span class="token string">"Gandalf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">[</span>Mago<span class="token punctuation">.</span>Habilidad<span class="token punctuation">.</span>Energía<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// Llamamos al get y después al set</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Supongamos ahora que queremos usar como índice un texto con el nombre de la habilidad. Podríamos sobrecargar el operador de indización para que aceptase también una cadena con el nombre de la misma. Una posible implementación de esta ampliación sería...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Mago</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... código anterior del ejemplo omitido para abreviar</span>
    <span class="token comment">// La comprobación del índice lo metemos en este método de clase privado</span>
    <span class="token comment">// para no repetirlo en e set y el get y así poder una cuerpos de expresión.</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-static">static</span> <span class="token return-type class-name">Habilidad</span> <span class="token function">PasaAEnum</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> habilidad<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Enum<span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>habilidad<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword keyword-out">out</span> <span class="token class-name">Habilidad</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword keyword-string">string</span></span> m <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">habilidad</span><span class="token punctuation">}</span></span><span class="token string"> no es un índice válido para Mago.\n"</span></span> 
            <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">$"Valores posibles: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword keyword-string">string</span><span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">,</span> Enum<span class="token punctuation">.</span><span class="token function">GetNames</span><span class="token punctuation">(</span><span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Habilidad</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
            <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">IndexOutOfRangeException</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-return">return</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-ushort">ushort</span></span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> habilidad<span class="token punctuation">]</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Podemos usar el indizador de enumerados ya implementado que se encargará</span>
        <span class="token comment">// ya de hacer la transformación a entero y así no la repetimos.</span>
        <span class="token keyword keyword-get">get</span> <span class="token operator">=&gt;</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token function">PasaAEnum</span><span class="token punctuation">(</span>habilidad<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-set">set</span> <span class="token operator">=&gt;</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token function">PasaAEnum</span><span class="token punctuation">(</span>habilidad<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-value">value</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Si modificamos ahora el programa de test de nuestra clase de la siguiente manara ...</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword keyword-var">var</span></span> m <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Mago</span><span class="token punctuation">(</span><span class="token string">"Gandalf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m<span class="token punctuation">[</span>Mago<span class="token punctuation">.</span>Habilidad<span class="token punctuation">.</span>Energía<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">7</span><span class="token punctuation">;</span>
    m<span class="token punctuation">[</span><span class="token string">"Poder"</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// Llamamos al get y después al set del nuevo indizador</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m<span class="token punctuation">[</span><span class="token string">"Fuerza"</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">;</span>   <span class="token comment">// Generará una excepción de IndexOutOfRangeException</span>
<span class="token punctuation">}</span>
</code></pre><p>Al ejecutarlo obtendremos la siguiente salida ...</p>
<pre data-role="codeBlock" data-info="cmd" class="language-cmd cmd"><code>Habilidades de Gandalf:
        Sabiduría = 0
        Poder = 2
        Destreza = 0
        Energía = 7

Unhandled exception. System.IndexOutOfRangeException: Fuerza no es un índice válido para Mago.
Valores posibles: Sabiduría, Poder, Destreza, Energía
   at Indizadores.Mago.PasaAEnum(String habilidad) in C:\WD\Program.cs:line 29
   at Indizadores.Mago.get_Item(String habilidad) in C:\WD\Program.cs:line 33
   at Indizadores.Program.Main() in C:\WD\Program.cs:line 54
</code></pre><p>En el ejemplo anterior hemos visto el uso de indizadores para encapsular y controlar el acceso a una tabla dentro de la clase. Pero no siempre es necesario tener siempre una tabla para usar un indizador.</p>
<p>En el siguiente ejemplo podemos indizar un objeto <strong><code>GYM</code></strong> de tal manera que dado un día de la semana y un tipo de clase me diga a la hora que se imparte.</p>
<blockquote>
<p>📌 <strong>Nota:</strong> Seguramente habrá <strong>formas más simples y semánticas</strong> de solucionar la propuesta del ejemplo. Pero solo se trata de ver un ejemplo de sintaxis donde definamos un indizador que <strong>use dos índices</strong> y cuyos objetos <strong>no contengan ningún tipo de tabla</strong>. Además de otras características nuevas de C#.</p>
</blockquote>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">GYM</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-enum">enum</span> <span class="token class-name">DiaSemana</span> <span class="token punctuation">{</span> Lunes<span class="token punctuation">,</span> Martes<span class="token punctuation">,</span> Jueves <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-enum">enum</span> <span class="token class-name">Clase</span> <span class="token punctuation">{</span> Yoga<span class="token punctuation">,</span> Pilates<span class="token punctuation">,</span> GAP <span class="token punctuation">}</span>
    <span class="token comment">// Cómo solo definimos get podemos usar la sintaxis abreviada de </span>
    <span class="token comment">// cuerpo de expresión análoga a las propiedades, usando un doble switch de expresión.</span>
    <span class="token comment">// En este caso usaremos dos índices.</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token class-name">DiaSemana</span> d<span class="token punctuation">,</span> <span class="token class-name">Clase</span> c<span class="token punctuation">]</span> <span class="token operator">=&gt;</span> d <span class="token keyword keyword-switch">switch</span>
    <span class="token punctuation">{</span>
        DiaSemana<span class="token punctuation">.</span>Lunes <span class="token operator">=&gt;</span> c <span class="token keyword keyword-switch">switch</span>
        <span class="token punctuation">{</span>
            Clase<span class="token punctuation">.</span>Pilates <span class="token operator">=&gt;</span> <span class="token string">"12:00"</span><span class="token punctuation">,</span>
            Clase<span class="token punctuation">.</span>GAP <span class="token operator">=&gt;</span> <span class="token string">"8:00"</span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"El </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">d</span><span class="token punctuation">}</span></span><span class="token string"> no hay </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        DiaSemana<span class="token punctuation">.</span>Martes <span class="token operator">=&gt;</span> c <span class="token keyword keyword-switch">switch</span>
        <span class="token punctuation">{</span>
            Clase<span class="token punctuation">.</span>Yoga <span class="token operator">=&gt;</span> <span class="token string">"21:00"</span><span class="token punctuation">,</span>
            Clase<span class="token punctuation">.</span>GAP <span class="token operator">=&gt;</span> <span class="token string">"16:00"</span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"El </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">d</span><span class="token punctuation">}</span></span><span class="token string"> no hay </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        DiaSemana<span class="token punctuation">.</span>Jueves <span class="token operator">=&gt;</span> c <span class="token keyword keyword-switch">switch</span>
        <span class="token punctuation">{</span>
            Clase<span class="token punctuation">.</span>Yoga <span class="token operator">=&gt;</span> <span class="token string">"7:00"</span><span class="token punctuation">,</span>
            Clase<span class="token punctuation">.</span>Pilates <span class="token operator">=&gt;</span> <span class="token string">"20:00"</span><span class="token punctuation">,</span>
            _ <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"El </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">d</span><span class="token punctuation">}</span></span><span class="token string"> no hay </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">c</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        _ <span class="token operator">=&gt;</span> <span class="token string">"Cerrado"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword keyword-var">var</span></span> gym <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">GYM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>gym<span class="token punctuation">[</span>GYM<span class="token punctuation">.</span>DiaSemana<span class="token punctuation">.</span>Lunes<span class="token punctuation">,</span> GYM<span class="token punctuation">.</span>Clase<span class="token punctuation">.</span>Pilates<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>gym<span class="token punctuation">[</span>GYM<span class="token punctuation">.</span>DiaSemana<span class="token punctuation">.</span>Martes<span class="token punctuation">,</span> GYM<span class="token punctuation">.</span>Clase<span class="token punctuation">.</span>Pilates<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>gym<span class="token punctuation">[</span>GYM<span class="token punctuation">.</span>DiaSemana<span class="token punctuation">.</span>Jueves<span class="token punctuation">,</span> GYM<span class="token punctuation">.</span>Clase<span class="token punctuation">.</span>Pilates<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div style="page-break-after:always;"></div>
<blockquote>
<p><strong>🎓 Caso de estudio:</strong></p>
<p>Vamos a ver un ejemplo, similar al último, que trate de usar todo lo que hemos visto en el tema, repasando conceptos anteriores.</p>
<p>Para ello voy a crear un tipo valor <strong><code>Hora</code></strong> que:</p>
<ul>
<li>A partir de una cadena del tipo <strong><code>"HH:MM"</code></strong> que llegará al constructor y usando expresiones regulares, descompondrá la información para ambos valores en dos propiedades autoimplementadas de solo lectura <strong><code>HH</code></strong> y <strong><code>MM</code></strong> respectivamente. Generaremos la excepción adecuada si la clase no es la correcta.</li>
<li>Invalidará <strong><code>Equals</code></strong>, <strong><code>GetHasCode</code></strong> y <strong><code>ToString</code></strong>. Mostrando este último las horas en formato <strong><code>HH:MM</code></strong>.</li>
<li>Redefinirá los operadores <strong><code>==</code></strong>, <strong><code>!=</code></strong>, <strong><code>&gt;</code></strong>, <strong><code>&lt;</code></strong>, <strong><code>&gt;=</code></strong> y <strong><code>&lt;=</code></strong></li>
</ul>
<p>Además, deberemos crear la clase <strong><code>Horario</code></strong> que:</p>
<ul>
<li>Definirá el <strong>enumerado</strong> <strong><code>Dia</code></strong> con los días de la semana de <strong>Lunes</strong> a <strong>Viernes</strong>.</li>
<li>Definirá un campo de solo lectura horas que será un array de objetos <strong><code>Hora</code></strong>.</li>
<li>Definirá un campo de solo lectura horario que será una matriz de cadenas (acrónimo de las asignaturas o módulos).</li>
<li>Un constructor que recibirá el array de horas en el horario y dimensionará la matriz sin datos.</li>
<li>Definirá un <strong>indizador</strong> que reciba un objeto <strong>Hora</strong> válido dentro del rango del horario de horas y el valor enumerado de día y me devolverá o asignará el valor del módulo impartido. Es importante que si añadimos un valor de hora fuera del horário, generaremos una excepción de <strong><code>IndexOutOfRangeException</code></strong>.<br>
📌 <strong>Nota:</strong> si tengo clase de Programación de <strong>8:00</strong> a <strong>8:55</strong> y la hora que me pasan es las 8:22, el indizador devolverá dicho módulo o cambiará el nombre del mismo por otra cadena.</li>
<li>Definirá un <strong>indizador</strong> que solo permitirá asignar (set) en determinada hora, un array de módulos a impartir durante los diferentes días de la semana.<br>
📌 <strong>Nota:</strong> Este indizador debe reutilizar el indizador que hemos definido anteriormente.</li>
<li>Invalidaremos el método <strong><code>ToString</code></strong> para que muestre el horario por consola.</li>
</ul>
<p>Por último, vamos a implementar un pequeño programa principal, donde creemos un objeto de clase horario inicializándo sus clases con el indizador de hora y posteriormente en un bucle infinito que se recupere de las posibles excepciones producidas, pediremos día y hora por teclado para mostrar la clase que hay en el horario usando el indizador definido en horario.<br>
Ej. <strong><code>string actividad = horario[new Hora("9:45"), Dia.Lunes]</code></strong></p>
</blockquote>
<blockquote>
<p><strong>🎓 Caso de estudio (continuación)</strong></p>
<p>Un ejemplo de ejecución podría ser el siguiente...<br>
Mostraríamos en primer lugar el horario.</p>
<pre data-role="codeBlock" data-info="txt" class="language-txt txt"><code>          Lunes     Martes    Miércoles Jueves    Viernes   
08:00     BD        BD        BD        BD        BD        
08:55     BD        BD        BD        BD        BD        
09:50     Prog      SI        SI        SI        Prog      
10:45     ED        ED        IT        LM        LM        
11:05     Prog      SI        SI        SI        Prog      
12:00     Prog      Prog                Prog      Prog      
12:55               ED        LM        IT        FOL       
13:15               FOL                 FOL       SI        
14:10               Prog                Prog      SI        

Introduce la hora (HH:MM): 8:33
Introduce el dia de Lunes a Viernes: Lunes
En ese momento estas en: BD

Introduce la hora (HH:MM): 10:33
Introduce el dia de Lunes a Viernes: Lunes
En ese momento estas en: Prog

Introduce la hora (HH:MM): 7:00
Introduce el dia de Lunes a Viernes: Martes
Las 07:00 está fuera de horario.

Introduce la hora (HH:MM): 22:00
Introduce el dia de Lunes a Viernes: Jueves
Las 22:00 está fuera de horario.
</code></pre><p>Puedes intentar hacerlo y compararlo con la siguiente propuesta de solución.</p>
<p>En la siguiente página tienes una propuesta de solución ...</p>
</blockquote>
<div style="page-break-after:always;"></div>
<blockquote>
<p><strong>🎓 Caso de estudio (continuación)</strong></p>
<p>Empecemos con las implementación de la clase <strong><code>Hora</code></strong></p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">Hora</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> HH <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> MM <span class="token punctuation">{</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token function">Hora</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> hora<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Regex</span> patron <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Regex</span><span class="token punctuation">(</span><span class="token string">@"^(?&lt;hora&gt;\d{1,2}):(?&lt;minuto&gt;\d{1,2})$"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Match</span> coincidencia <span class="token operator">=</span> patron<span class="token punctuation">.</span><span class="token function">Match</span><span class="token punctuation">(</span>hora<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>coincidencia<span class="token punctuation">.</span>Success<span class="token punctuation">)</span>
            <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span>
                           <span class="token interpolation-string"><span class="token string">$"La hora </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">hora</span><span class="token punctuation">}</span></span><span class="token string"> no tiene un formáto válido HH:MM"</span></span><span class="token punctuation">,</span> <span class="token string">"hora"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        HH <span class="token operator">=</span> <span class="token keyword keyword-ushort">ushort</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>coincidencia<span class="token punctuation">.</span>Groups<span class="token punctuation">[</span><span class="token string">"hora"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        MM <span class="token operator">=</span> <span class="token keyword keyword-ushort">ushort</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>coincidencia<span class="token punctuation">.</span>Groups<span class="token punctuation">[</span><span class="token string">"minuto"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">HH</span><span class="token format-string"><span class="token punctuation">:</span>D2</span><span class="token punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">MM</span><span class="token format-string"><span class="token punctuation">:</span>D2</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> <span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">Equals</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-object">object</span></span> o<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> o <span class="token keyword keyword-is">is</span> <span class="token class-name">Hora</span> h <span class="token operator">&amp;&amp;</span> h<span class="token punctuation">.</span>HH <span class="token operator">==</span> HH <span class="token operator">&amp;&amp;</span> h<span class="token punctuation">.</span>MM <span class="token operator">==</span> MM<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">Hora</span> h1<span class="token punctuation">,</span> <span class="token class-name">Hora</span> h2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> h1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>h2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token class-name">Hora</span> h1<span class="token punctuation">,</span> <span class="token class-name">Hora</span> h2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>h1<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>h2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token class-name">Hora</span> h1<span class="token punctuation">,</span> <span class="token class-name">Hora</span> h2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">(</span>h1<span class="token punctuation">.</span>HH <span class="token operator">&gt;</span> h2<span class="token punctuation">.</span>HH<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>h1<span class="token punctuation">.</span>HH <span class="token operator">==</span> h2<span class="token punctuation">.</span>HH <span class="token operator">&amp;&amp;</span> h1<span class="token punctuation">.</span>MM <span class="token operator">&gt;</span> h2<span class="token punctuation">.</span>MM<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">Hora</span> h1<span class="token punctuation">,</span> <span class="token class-name">Hora</span> h2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token operator">!</span><span class="token punctuation">(</span>h1 <span class="token operator">&gt;</span> h2 <span class="token operator">||</span> h1 <span class="token operator">==</span> h2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> Hora <span class="token keyword keyword-operator">operator</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Hora</span> h<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> minutos<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-int">int</span></span> m <span class="token operator">=</span> h<span class="token punctuation">.</span>M <span class="token operator">+</span> minutos<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-int">int</span></span> hora <span class="token operator">=</span> h<span class="token punctuation">.</span>H <span class="token operator">+</span> m <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span>
        m <span class="token operator">%=</span> <span class="token number">60</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span>hora<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Horario</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-enum">enum</span> <span class="token class-name">Dia</span> <span class="token punctuation">{</span> Lunes<span class="token punctuation">,</span> Martes<span class="token punctuation">,</span> Miércoles<span class="token punctuation">,</span> Jueves<span class="token punctuation">,</span> Viernes <span class="token punctuation">}</span>
    <span class="token comment">// Definimos los campos.</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-readonly">readonly</span> <span class="token class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span></span> horario<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-readonly">readonly</span> <span class="token class-name">Hora<span class="token punctuation">[</span><span class="token punctuation">]</span></span> horas<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token function">Horario</span><span class="token punctuation">(</span><span class="token class-name">Hora<span class="token punctuation">[</span><span class="token punctuation">]</span></span> horas<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Dimensiono la matriz sin clases.</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>horas <span class="token operator">=</span> horas<span class="token punctuation">;</span>
        horario <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span></span><span class="token punctuation">[</span>horas<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> Enum<span class="token punctuation">.</span><span class="token function">GetNames</span><span class="token punctuation">(</span><span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Dia</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></blockquote>
<blockquote>
<p><strong>🎓 Caso de estudio (continuación)</strong></p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>    <span class="token comment">// Buscaremos el indice que se corresponde en el array de horas </span>
    <span class="token comment">// (filas en la matriz) que se corresponde con la hora introducida. </span>
    <span class="token comment">// Por ejemplo, si la primera hora son las 8:00 (ind = 0) y la segunda </span>
    <span class="token comment">// las 8:55 (ind = 1) y recibo las 8:33 devolveré el índice 0, pero a </span>
    <span class="token comment">// partir de las 8:55 hasta la siguiente hora devolveré el índice 1.</span>
    <span class="token keyword keyword-private">private</span> <span class="token return-type class-name"><span class="token keyword keyword-int">int</span></span> <span class="token function">IndiceSegunHora</span><span class="token punctuation">(</span><span class="token class-name">Hora</span> hora<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>hora <span class="token operator">==</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span>
                                  <span class="token string">"El indizador no admite valores nulos."</span><span class="token punctuation">,</span> <span class="token string">"hora"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-int">int</span></span> ind <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-int">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> horas<span class="token punctuation">.</span>Length <span class="token operator">&amp;&amp;</span> ind <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>hora <span class="token operator">==</span> horas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> ind <span class="token operator">=</span> i<span class="token punctuation">;</span>
            <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>hora <span class="token operator">&lt;</span> horas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> ind <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> estamosAunEnlaUltimaHora <span class="token operator">=</span> hora <span class="token operator">&gt;</span> horas<span class="token punctuation">[</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> hora <span class="token operator">&lt;</span> horas<span class="token punctuation">[</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">55</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>estamosAunEnlaUltimaHora<span class="token punctuation">)</span> ind <span class="token operator">=</span> horas<span class="token punctuation">.</span>Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>ind <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-throw">throw</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">ArgumentOutOfRangeException</span><span class="token punctuation">(</span>
                  <span class="token interpolation-string"><span class="token string">$"La hora </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">hora</span><span class="token punctuation">}</span></span><span class="token string"> no está fuera del horario."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
        <span class="token keyword keyword-return">return</span> ind<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token class-name">Hora</span> hora<span class="token punctuation">,</span> <span class="token class-name">Dia</span> dia<span class="token punctuation">]</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Índizador que establece una clase para una Hora y un Día.</span>
        <span class="token keyword keyword-set">set</span> <span class="token operator">=&gt;</span> horario<span class="token punctuation">[</span><span class="token function">IndiceSegunHora</span><span class="token punctuation">(</span>hora<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>dia<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-value">value</span><span class="token punctuation">;</span>
        <span class="token comment">// Índizador que obtiene una clase para una Hora y un Día.</span>
        <span class="token comment">// Si hay un null devolverá HUECO</span>
        <span class="token keyword keyword-get">get</span> <span class="token operator">=&gt;</span> horario<span class="token punctuation">[</span><span class="token function">IndiceSegunHora</span><span class="token punctuation">(</span>hora<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>dia<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string">"HUECO"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span><span class="token class-name">Hora</span> hora<span class="token punctuation">]</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Indizador que usando el anterior, ponga las clases de Lunes</span>
        <span class="token comment">// a viernes para una determinada hora.</span>
        <span class="token keyword keyword-set">set</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword keyword-int">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name">Dia</span> dia <span class="token operator">=</span> Dia<span class="token punctuation">.</span>Lunes<span class="token punctuation">;</span> dia <span class="token operator">&lt;=</span> Dia<span class="token punctuation">.</span>Viernes<span class="token punctuation">;</span> dia<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword keyword-this">this</span><span class="token punctuation">[</span>hora<span class="token punctuation">,</span> dia<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-value">value</span><span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></blockquote>
<div style="page-break-after:always;"></div>
<blockquote>
<p><strong>🎓 Caso de estudio (continuación)</strong></p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>    <span class="token comment">// Mostrar la matriz del horario.</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token return-type class-name"><span class="token keyword keyword-string">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> ANCHO_COLUMNA <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> diasSemana <span class="token operator">=</span> Enum<span class="token punctuation">.</span><span class="token function">GetNames</span><span class="token punctuation">(</span><span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Dia</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StringBuilder</span> texto <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token string">""</span><span class="token punctuation">,</span><span class="token operator">-</span>ANCHO_COLUMNA</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-foreach">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-string">string</span></span> dia <span class="token keyword keyword-in">in</span> diasSemana<span class="token punctuation">)</span>
            texto<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">dia<span class="token punctuation">,</span><span class="token operator">-</span>ANCHO_COLUMNA</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        texto<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-int">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> horas<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            texto<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">horas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">-</span>ANCHO_COLUMNA</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-int">int</span></span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> diasSemana<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
                texto<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">horario<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">-</span>ANCHO_COLUMNA</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            texto<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-return">return</span> texto<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Clase con el programa principal</span>
<span class="token keyword keyword-static">static</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Principal</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Método que crea e inicializa un objeto horario.</span>
    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name">Horario</span> <span class="token function">Horario1DAM</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> horas <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora<span class="token punctuation">[</span><span class="token punctuation">]</span></span>
        <span class="token punctuation">{</span>
            <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"8:00"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"8:55"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"9:50"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"10:45"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"11:05"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"12:00"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"12:55"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"13:15"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span><span class="token string">"14:10"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token class-name">Horario</span> horario <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Horario</span><span class="token punctuation">(</span>horas<span class="token punctuation">)</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span><span class="token punctuation">,</span> <span class="token string">"BD"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">"Prog"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span><span class="token punctuation">,</span> <span class="token string">"Prog"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">"ED"</span><span class="token punctuation">,</span> <span class="token string">"ED"</span><span class="token punctuation">,</span> <span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"LM"</span><span class="token punctuation">,</span> <span class="token string">"LM"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">"Prog"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span><span class="token punctuation">,</span> <span class="token string">"Prog"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">"Prog"</span><span class="token punctuation">,</span> <span class="token string">"Prog"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"Prog"</span><span class="token punctuation">,</span> <span class="token string">"Prog"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"ED"</span><span class="token punctuation">,</span> <span class="token string">"LM"</span><span class="token punctuation">,</span> <span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"FOL"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"FOL"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"FOL"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        horario<span class="token punctuation">[</span>horas<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name"><span class="token keyword keyword-string">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"Prog"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"Prog"</span><span class="token punctuation">,</span> <span class="token string">"SI"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-return">return</span> horario<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></blockquote>
<div style="page-break-after:always;"></div>
<blockquote>
<p><strong>🎓 Caso de estudio (continuación)</strong></p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><code>    <span class="token keyword keyword-static">static</span> <span class="token return-type class-name"><span class="token keyword keyword-void">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Horario</span> horario <span class="token operator">=</span> <span class="token function">Horario1DAM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword keyword-try">try</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>horario<span class="token punctuation">)</span><span class="token punctuation">;</span>
                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce la hora (HH:MM): "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Hora</span> hora <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token constructor-invocation class-name">Hora</span><span class="token punctuation">(</span>Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"Introduce el dia de Lunes a Viernes: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Horario<span class="token punctuation">.</span>Dia</span> dia <span class="token operator">=</span> <span class="token punctuation">(</span>Horario<span class="token punctuation">.</span>Dia<span class="token punctuation">)</span>Enum<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>
                                                      <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Horario<span class="token punctuation">.</span>Dia</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                                                      Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"En ese momento estas en: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">horario<span class="token punctuation">[</span>hora<span class="token punctuation">,</span> dia<span class="token punctuation">]</span></span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></blockquote>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>